{"ast":null,"code":"/**\n * 按照数据中的结果设置fixorder\n */\nconst initDataOrder = (g, nodeOrder) => {\n  const simpleNodes = g.nodes().filter(v => {\n    var _a;\n    return !((_a = g.children(v)) === null || _a === void 0 ? void 0 : _a.length);\n  });\n  const ranks = simpleNodes.map(v => g.node(v).rank);\n  const maxRank = Math.max(...ranks);\n  const layers = [];\n  for (let i = 0; i < maxRank + 1; i++) {\n    layers.push([]);\n  }\n  nodeOrder === null || nodeOrder === void 0 ? void 0 : nodeOrder.forEach(n => {\n    const node = g.node(n);\n    // 只考虑原有节点，dummy节点需要按照后续算法排出\n    if (!node || node.dummy) return;\n    if (!isNaN(node.rank)) {\n      node.fixorder = layers[node.rank].length; // 设置fixorder为当层的顺序\n      layers[node.rank].push(n);\n    }\n  });\n};\nexport default initDataOrder;","map":{"version":3,"names":["initDataOrder","g","nodeOrder","simpleNodes","nodes","filter","v","_a","children","length","ranks","map","node","rank","maxRank","Math","max","layers","i","push","forEach","n","dummy","isNaN","fixorder"],"sources":["../../../../../src/layout/dagre/src/order/init-data-order.ts"],"sourcesContent":[null],"mappings":"AAIA;;;AAGA,MAAMA,aAAa,GAAGA,CAACC,CAAQ,EAAEC,SAAmB,KAAI;EACtD,MAAMC,WAAW,GAAGF,CAAC,CAACG,KAAK,EAAE,CAACC,MAAM,CAAEC,CAAC,IAAI;;IACzC,OAAO,EAAC,CAAAC,EAAA,GAAAN,CAAC,CAACO,QAAQ,CAACF,CAAC,CAAC,cAAAC,EAAA,uBAAAA,EAAA,CAAEE,MAAM;EAC/B,CAAC,CAAC;EACF,MAAMC,KAAK,GAAGP,WAAW,CAACQ,GAAG,CAAEL,CAAC,IAAML,CAAC,CAACW,IAAI,CAACN,CAAC,CAAC,CAACO,IAAe,CAAC;EAChE,MAAMC,OAAO,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAGN,KAAK,CAAC;EAClC,MAAMO,MAAM,GAAQ,EAAE;EACtB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,OAAO,GAAG,CAAC,EAAEI,CAAC,EAAG,EAAE;IACrCD,MAAM,CAACE,IAAI,CAAC,EAAE,CAAC;;EAEjBjB,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEkB,OAAO,CAAEC,CAAC,IAAI;IACvB,MAAMT,IAAI,GAAGX,CAAC,CAACW,IAAI,CAACS,CAAC,CAAC;IACtB;IACA,IAAI,CAACT,IAAI,IAAIA,IAAI,CAACU,KAAK,EAAE;IACzB,IAAI,CAACC,KAAK,CAACX,IAAI,CAACC,IAAc,CAAC,EAAE;MAC/BD,IAAI,CAACY,QAAQ,GAAGP,MAAM,CAACL,IAAI,CAACC,IAAc,CAAC,CAACJ,MAAM,CAAC,CAAC;MACpDQ,MAAM,CAACL,IAAI,CAACC,IAAc,CAAC,CAACM,IAAI,CAACE,CAAC,CAAC;;EAEvC,CAAC,CAAC;AACJ,CAAC;AAED,eAAerB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}