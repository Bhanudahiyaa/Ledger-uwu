{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Point from '@mapbox/point-geometry';\nimport { indexTouches } from \"./handler_util\";\n\n/**\n * A `TouchPanHandler` allows the user to pan the map using touch gestures.\n */\nexport class TouchPanHandler {\n  constructor(options, map) {\n    _defineProperty(this, \"_enabled\", void 0);\n    _defineProperty(this, \"_active\", void 0);\n    _defineProperty(this, \"_touches\", void 0);\n    _defineProperty(this, \"_clickTolerance\", void 0);\n    _defineProperty(this, \"_sum\", void 0);\n    _defineProperty(this, \"_map\", void 0);\n    this._clickTolerance = options.clickTolerance || 1;\n    this._map = map;\n    this.reset();\n  }\n  reset() {\n    this._active = false;\n    this._touches = {};\n    this._sum = new Point(0, 0);\n  }\n  minTouchs() {\n    return this._map.cooperativeGestures.isEnabled() ? 2 : 1;\n  }\n  touchstart(e, points, mapTouches) {\n    return this._calculateTransform(e, points, mapTouches);\n  }\n  touchmove(e, points, mapTouches) {\n    if (!this._active || mapTouches.length < this.minTouchs()) return;\n    e.preventDefault();\n    return this._calculateTransform(e, points, mapTouches);\n  }\n  touchend(e, points, mapTouches) {\n    this._calculateTransform(e, points, mapTouches);\n    if (this._active && mapTouches.length < this.minTouchs()) {\n      this.reset();\n    }\n  }\n  touchcancel() {\n    this.reset();\n  }\n  _calculateTransform(e, points, mapTouches) {\n    if (mapTouches.length > 0) this._active = true;\n    const touches = indexTouches(mapTouches, points);\n    const touchPointSum = new Point(0, 0);\n    const touchDeltaSum = new Point(0, 0);\n    let touchDeltaCount = 0;\n    for (const identifier in touches) {\n      const point = touches[identifier];\n      const prevPoint = this._touches[identifier];\n      if (prevPoint) {\n        touchPointSum._add(point);\n        touchDeltaSum._add(point.sub(prevPoint));\n        touchDeltaCount++;\n        touches[identifier] = point;\n      }\n    }\n    this._touches = touches;\n    if (touchDeltaCount < this.minTouchs() || !touchDeltaSum.mag()) return;\n    const panDelta = touchDeltaSum.div(touchDeltaCount);\n    this._sum._add(panDelta);\n    if (this._sum.mag() < this._clickTolerance) return;\n    const around = touchPointSum.div(touchDeltaCount);\n    return {\n      around,\n      panDelta\n    };\n  }\n  enable() {\n    this._enabled = true;\n  }\n  disable() {\n    this._enabled = false;\n    this.reset();\n  }\n  isEnabled() {\n    return this._enabled;\n  }\n  isActive() {\n    return this._active;\n  }\n}","map":{"version":3,"names":["_defineProperty","Point","indexTouches","TouchPanHandler","constructor","options","map","_clickTolerance","clickTolerance","_map","reset","_active","_touches","_sum","minTouchs","cooperativeGestures","isEnabled","touchstart","e","points","mapTouches","_calculateTransform","touchmove","length","preventDefault","touchend","touchcancel","touches","touchPointSum","touchDeltaSum","touchDeltaCount","identifier","point","prevPoint","_add","sub","mag","panDelta","div","around","enable","_enabled","disable","isActive"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-map/es/map/handler/touch_pan.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Point from '@mapbox/point-geometry';\nimport { indexTouches } from \"./handler_util\";\n\n/**\n * A `TouchPanHandler` allows the user to pan the map using touch gestures.\n */\nexport class TouchPanHandler {\n  constructor(options, map) {\n    _defineProperty(this, \"_enabled\", void 0);\n    _defineProperty(this, \"_active\", void 0);\n    _defineProperty(this, \"_touches\", void 0);\n    _defineProperty(this, \"_clickTolerance\", void 0);\n    _defineProperty(this, \"_sum\", void 0);\n    _defineProperty(this, \"_map\", void 0);\n    this._clickTolerance = options.clickTolerance || 1;\n    this._map = map;\n    this.reset();\n  }\n  reset() {\n    this._active = false;\n    this._touches = {};\n    this._sum = new Point(0, 0);\n  }\n  minTouchs() {\n    return this._map.cooperativeGestures.isEnabled() ? 2 : 1;\n  }\n  touchstart(e, points, mapTouches) {\n    return this._calculateTransform(e, points, mapTouches);\n  }\n  touchmove(e, points, mapTouches) {\n    if (!this._active || mapTouches.length < this.minTouchs()) return;\n    e.preventDefault();\n    return this._calculateTransform(e, points, mapTouches);\n  }\n  touchend(e, points, mapTouches) {\n    this._calculateTransform(e, points, mapTouches);\n    if (this._active && mapTouches.length < this.minTouchs()) {\n      this.reset();\n    }\n  }\n  touchcancel() {\n    this.reset();\n  }\n  _calculateTransform(e, points, mapTouches) {\n    if (mapTouches.length > 0) this._active = true;\n    const touches = indexTouches(mapTouches, points);\n    const touchPointSum = new Point(0, 0);\n    const touchDeltaSum = new Point(0, 0);\n    let touchDeltaCount = 0;\n    for (const identifier in touches) {\n      const point = touches[identifier];\n      const prevPoint = this._touches[identifier];\n      if (prevPoint) {\n        touchPointSum._add(point);\n        touchDeltaSum._add(point.sub(prevPoint));\n        touchDeltaCount++;\n        touches[identifier] = point;\n      }\n    }\n    this._touches = touches;\n    if (touchDeltaCount < this.minTouchs() || !touchDeltaSum.mag()) return;\n    const panDelta = touchDeltaSum.div(touchDeltaCount);\n    this._sum._add(panDelta);\n    if (this._sum.mag() < this._clickTolerance) return;\n    const around = touchPointSum.div(touchDeltaCount);\n    return {\n      around,\n      panDelta\n    };\n  }\n  enable() {\n    this._enabled = true;\n  }\n  disable() {\n    this._enabled = false;\n    this.reset();\n  }\n  isEnabled() {\n    return this._enabled;\n  }\n  isActive() {\n    return this._active;\n  }\n}"],"mappings":"AAAA,OAAOA,eAAe,MAAM,2CAA2C;AACvE,OAAOC,KAAK,MAAM,wBAAwB;AAC1C,SAASC,YAAY,QAAQ,gBAAgB;;AAE7C;AACA;AACA;AACA,OAAO,MAAMC,eAAe,CAAC;EAC3BC,WAAWA,CAACC,OAAO,EAAEC,GAAG,EAAE;IACxBN,eAAe,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;IACzCA,eAAe,CAAC,IAAI,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;IACxCA,eAAe,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC,CAAC;IACzCA,eAAe,CAAC,IAAI,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAC;IAChDA,eAAe,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;IACrCA,eAAe,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;IACrC,IAAI,CAACO,eAAe,GAAGF,OAAO,CAACG,cAAc,IAAI,CAAC;IAClD,IAAI,CAACC,IAAI,GAAGH,GAAG;IACf,IAAI,CAACI,KAAK,CAAC,CAAC;EACd;EACAA,KAAKA,CAAA,EAAG;IACN,IAAI,CAACC,OAAO,GAAG,KAAK;IACpB,IAAI,CAACC,QAAQ,GAAG,CAAC,CAAC;IAClB,IAAI,CAACC,IAAI,GAAG,IAAIZ,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAC7B;EACAa,SAASA,CAAA,EAAG;IACV,OAAO,IAAI,CAACL,IAAI,CAACM,mBAAmB,CAACC,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC;EAC1D;EACAC,UAAUA,CAACC,CAAC,EAAEC,MAAM,EAAEC,UAAU,EAAE;IAChC,OAAO,IAAI,CAACC,mBAAmB,CAACH,CAAC,EAAEC,MAAM,EAAEC,UAAU,CAAC;EACxD;EACAE,SAASA,CAACJ,CAAC,EAAEC,MAAM,EAAEC,UAAU,EAAE;IAC/B,IAAI,CAAC,IAAI,CAACT,OAAO,IAAIS,UAAU,CAACG,MAAM,GAAG,IAAI,CAACT,SAAS,CAAC,CAAC,EAAE;IAC3DI,CAAC,CAACM,cAAc,CAAC,CAAC;IAClB,OAAO,IAAI,CAACH,mBAAmB,CAACH,CAAC,EAAEC,MAAM,EAAEC,UAAU,CAAC;EACxD;EACAK,QAAQA,CAACP,CAAC,EAAEC,MAAM,EAAEC,UAAU,EAAE;IAC9B,IAAI,CAACC,mBAAmB,CAACH,CAAC,EAAEC,MAAM,EAAEC,UAAU,CAAC;IAC/C,IAAI,IAAI,CAACT,OAAO,IAAIS,UAAU,CAACG,MAAM,GAAG,IAAI,CAACT,SAAS,CAAC,CAAC,EAAE;MACxD,IAAI,CAACJ,KAAK,CAAC,CAAC;IACd;EACF;EACAgB,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAChB,KAAK,CAAC,CAAC;EACd;EACAW,mBAAmBA,CAACH,CAAC,EAAEC,MAAM,EAAEC,UAAU,EAAE;IACzC,IAAIA,UAAU,CAACG,MAAM,GAAG,CAAC,EAAE,IAAI,CAACZ,OAAO,GAAG,IAAI;IAC9C,MAAMgB,OAAO,GAAGzB,YAAY,CAACkB,UAAU,EAAED,MAAM,CAAC;IAChD,MAAMS,aAAa,GAAG,IAAI3B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IACrC,MAAM4B,aAAa,GAAG,IAAI5B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IACrC,IAAI6B,eAAe,GAAG,CAAC;IACvB,KAAK,MAAMC,UAAU,IAAIJ,OAAO,EAAE;MAChC,MAAMK,KAAK,GAAGL,OAAO,CAACI,UAAU,CAAC;MACjC,MAAME,SAAS,GAAG,IAAI,CAACrB,QAAQ,CAACmB,UAAU,CAAC;MAC3C,IAAIE,SAAS,EAAE;QACbL,aAAa,CAACM,IAAI,CAACF,KAAK,CAAC;QACzBH,aAAa,CAACK,IAAI,CAACF,KAAK,CAACG,GAAG,CAACF,SAAS,CAAC,CAAC;QACxCH,eAAe,EAAE;QACjBH,OAAO,CAACI,UAAU,CAAC,GAAGC,KAAK;MAC7B;IACF;IACA,IAAI,CAACpB,QAAQ,GAAGe,OAAO;IACvB,IAAIG,eAAe,GAAG,IAAI,CAAChB,SAAS,CAAC,CAAC,IAAI,CAACe,aAAa,CAACO,GAAG,CAAC,CAAC,EAAE;IAChE,MAAMC,QAAQ,GAAGR,aAAa,CAACS,GAAG,CAACR,eAAe,CAAC;IACnD,IAAI,CAACjB,IAAI,CAACqB,IAAI,CAACG,QAAQ,CAAC;IACxB,IAAI,IAAI,CAACxB,IAAI,CAACuB,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC7B,eAAe,EAAE;IAC5C,MAAMgC,MAAM,GAAGX,aAAa,CAACU,GAAG,CAACR,eAAe,CAAC;IACjD,OAAO;MACLS,MAAM;MACNF;IACF,CAAC;EACH;EACAG,MAAMA,CAAA,EAAG;IACP,IAAI,CAACC,QAAQ,GAAG,IAAI;EACtB;EACAC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACD,QAAQ,GAAG,KAAK;IACrB,IAAI,CAAC/B,KAAK,CAAC,CAAC;EACd;EACAM,SAASA,CAAA,EAAG;IACV,OAAO,IAAI,CAACyB,QAAQ;EACtB;EACAE,QAAQA,CAAA,EAAG;IACT,OAAO,IAAI,CAAChC,OAAO;EACrB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}