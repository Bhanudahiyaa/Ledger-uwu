{"ast":null,"code":"import { uniqueId } from '@antv/util';\nimport EventEmitter from '@antv/event-emitter';\nexport class LayerGroup extends EventEmitter {\n  constructor(layers = [], option = {}) {\n    super();\n    this.name = option.name ? option.name : uniqueId('layerGroup');\n    this.layers = layers;\n  }\n  /**\n   * 图层组添加到地图上\n   */\n  addTo(scene) {\n    this.scene = scene;\n    let layerIndex = 0;\n    const layerLength = this.layers.length;\n    this.layers.forEach(layer => {\n      layer.once('inited', e => {\n        layerIndex++;\n        this.emit('inited', e);\n        if (layerIndex === layerLength) {\n          this.emit('inited-all');\n        }\n      });\n      layer.addTo(scene);\n    });\n  }\n  /**\n   * 图层组是否有该图层\n   */\n  hasLayer(layer) {\n    return this.layers.some(itemLayer => itemLayer === layer);\n  }\n  /**\n   * 增加图层\n   */\n  addLayer(layer) {\n    // TODO: duplicate layer\n    this.layers.push(layer);\n    if (this.scene) {\n      layer.once('inited', e => this.emit('inited', e));\n      layer.addTo(this.scene);\n    }\n  }\n  /**\n   * 移除 layer 图层\n   */\n  removeLayer(layer) {\n    const layerIndex = this.layers.findIndex(itemLayer => itemLayer === layer);\n    if (layerIndex === -1) return false;\n    this.layers.splice(layerIndex, 1);\n    if (this.scene) {\n      layer.remove(this.scene);\n    }\n    return true;\n  }\n  /**\n   * 获取所有的地图图层\n   */\n  getLayers() {\n    return this.layers;\n  }\n  /**\n   * 获取所有的带交互图层\n   */\n  getInteractionLayers() {\n    return this.layers.filter(({\n      interaction\n    }) => interaction);\n  }\n  /**\n   * 根据图层 ID 获取图层对象\n   */\n  getLayer(id) {\n    return this.layers.find(({\n      layer\n    }) => layer.id === id);\n  }\n  /**\n   * 根据图层 name 获取图层对象\n   */\n  getLayerByName(name) {\n    return this.layers.find(itemLayer => itemLayer.name === name);\n  }\n  /**\n   * 移除所有的图层对象\n   */\n  removeAllLayer() {\n    this.layers.forEach(layer => {\n      if (this.scene) {\n        layer.remove(this.scene);\n      }\n    });\n    this.layers = [];\n  }\n  /**\n   * 是否图层组为空\n   */\n  isEmpty() {\n    return this.layers.length === 0;\n  }\n}","map":{"version":3,"names":["uniqueId","EventEmitter","LayerGroup","constructor","layers","option","name","addTo","scene","layerIndex","layerLength","length","forEach","layer","once","e","emit","hasLayer","some","itemLayer","addLayer","push","removeLayer","findIndex","splice","remove","getLayers","getInteractionLayers","filter","interaction","getLayer","id","find","getLayerByName","removeAllLayer","isEmpty"],"sources":["../../../../src/core/layer/layer-group.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}