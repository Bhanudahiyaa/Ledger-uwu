{"ast":null,"code":"// 最大比对层级\nconst MAX_MIX_LEVEL = 5;\nconst toString = new Object().toString;\nconst isType = (value, type) => toString.call(value) === '[object ' + type + ']';\nconst isArray = value => {\n  return isType(value, 'Array');\n};\nconst isObjectLike = value => {\n  /**\n   * isObjectLike({}) => true\n   * isObjectLike([1, 2, 3]) => true\n   * isObjectLike(Function) => false\n   */\n  return typeof value === 'object' && value !== null;\n};\nconst isPlainObject = value => {\n  /**\n   * isObjectLike(new Foo) => false\n   * isObjectLike([1, 2, 3]) => false\n   * isObjectLike({ x: 0, y: 0 }) => true\n   */\n  if (!isObjectLike(value) || !isType(value, 'Object')) {\n    return false;\n  }\n  let proto = value;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(value) === proto;\n};\nconst deep = (target, source, level, maxLevel) => {\n  level = level || 0;\n  maxLevel = maxLevel || MAX_MIX_LEVEL;\n  for (const key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      const value = source[key];\n      if (!value) {\n        // null 、 undefined 等情况直接赋值\n        target[key] = value;\n      } else {\n        if (isPlainObject(value)) {\n          if (!isPlainObject(target[key])) {\n            target[key] = {};\n          }\n          if (level < maxLevel) {\n            deep(target[key], value, level + 1, maxLevel);\n          } else {\n            // 层级过深直接赋值，性能问题\n            target[key] = source[key];\n          }\n        } else if (isArray(value)) {\n          target[key] = [];\n          target[key] = target[key].concat(value);\n        } else {\n          target[key] = value;\n        }\n      }\n    }\n  }\n};\n/**\n * deepAssign 对象深度合并\n * deepAssign 功能类似 deepMix\n * 不同点在于 deepAssign 会将 null undefined 等类型直接覆盖给 source\n */\nexport const deepAssign = (target, ...sources) => {\n  for (let i = 0; i < sources.length; i += 1) {\n    deep(target, sources[i]);\n  }\n  return target;\n};","map":{"version":3,"names":["MAX_MIX_LEVEL","toString","Object","isType","value","type","call","isArray","isObjectLike","isPlainObject","proto","getPrototypeOf","deep","target","source","level","maxLevel","key","prototype","hasOwnProperty","concat","deepAssign","sources","i","length"],"sources":["../../../src/utils/deep-assign.ts"],"sourcesContent":[null],"mappings":"AAAA;AACA,MAAMA,aAAa,GAAG,CAAC;AAEvB,MAAMC,QAAQ,GAAG,IAAIC,MAAM,EAAE,CAACD,QAAQ;AAEtC,MAAME,MAAM,GAAGA,CAACC,KAAc,EAAEC,IAAY,KAAcJ,QAAQ,CAACK,IAAI,CAACF,KAAK,CAAC,KAAK,UAAU,GAAGC,IAAI,GAAG,GAAG;AAE1G,MAAME,OAAO,GAAIH,KAAc,IAAa;EAC1C,OAAOD,MAAM,CAACC,KAAK,EAAE,OAAO,CAAC;AAC/B,CAAC;AAED,MAAMI,YAAY,GAAIJ,KAAc,IAAa;EAC/C;;;;;EAKA,OAAO,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI;AACpD,CAAC;AAED,MAAMK,aAAa,GAAIL,KAAc,IAAa;EAChD;;;;;EAKA,IAAI,CAACI,YAAY,CAACJ,KAAK,CAAC,IAAI,CAACD,MAAM,CAACC,KAAK,EAAE,QAAQ,CAAC,EAAE;IACpD,OAAO,KAAK;EACd;EACA,IAAIM,KAAK,GAAGN,KAAK;EACjB,OAAOF,MAAM,CAACS,cAAc,CAACD,KAAK,CAAC,KAAK,IAAI,EAAE;IAC5CA,KAAK,GAAGR,MAAM,CAACS,cAAc,CAACD,KAAK,CAAC;EACtC;EACA,OAAOR,MAAM,CAACS,cAAc,CAACP,KAAK,CAAC,KAAKM,KAAK;AAC/C,CAAC;AAED,MAAME,IAAI,GAAGA,CAACC,MAA2B,EAAEC,MAA2B,EAAEC,KAAc,EAAEC,QAAiB,KAAI;EAC3GD,KAAK,GAAGA,KAAK,IAAI,CAAC;EAClBC,QAAQ,GAAGA,QAAQ,IAAIhB,aAAa;EACpC,KAAK,MAAMiB,GAAG,IAAIH,MAAM,EAAE;IACxB,IAAIZ,MAAM,CAACgB,SAAS,CAACC,cAAc,CAACb,IAAI,CAACQ,MAAM,EAAEG,GAAG,CAAC,EAAE;MACrD,MAAMb,KAAK,GAAGU,MAAM,CAACG,GAAG,CAAC;MACzB,IAAI,CAACb,KAAK,EAAE;QACV;QACAS,MAAM,CAACI,GAAG,CAAC,GAAGb,KAAK;MACrB,CAAC,MAAM;QACL,IAAIK,aAAa,CAACL,KAAK,CAAC,EAAE;UACxB,IAAI,CAACK,aAAa,CAACI,MAAM,CAACI,GAAG,CAAC,CAAC,EAAE;YAC/BJ,MAAM,CAACI,GAAG,CAAC,GAAG,EAAE;UAClB;UACA,IAAIF,KAAK,GAAGC,QAAQ,EAAE;YACpBJ,IAAI,CAACC,MAAM,CAACI,GAAG,CAAC,EAAEb,KAAK,EAAEW,KAAK,GAAG,CAAC,EAAEC,QAAQ,CAAC;UAC/C,CAAC,MAAM;YACL;YACAH,MAAM,CAACI,GAAG,CAAC,GAAGH,MAAM,CAACG,GAAG,CAAC;UAC3B;QACF,CAAC,MAAM,IAAIV,OAAO,CAACH,KAAK,CAAC,EAAE;UACzBS,MAAM,CAACI,GAAG,CAAC,GAAG,EAAE;UAChBJ,MAAM,CAACI,GAAG,CAAC,GAAGJ,MAAM,CAACI,GAAG,CAAC,CAACG,MAAM,CAAChB,KAAK,CAAC;QACzC,CAAC,MAAM;UACLS,MAAM,CAACI,GAAG,CAAC,GAAGb,KAAK;QACrB;MACF;IACF;EACF;AACF,CAAC;AAED;;;;;AAKA,OAAO,MAAMiB,UAAU,GAAGA,CAACR,MAA2B,EAAE,GAAGS,OAA8B,KAAS;EAChG,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,OAAO,CAACE,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;IAC1CX,IAAI,CAACC,MAAM,EAAES,OAAO,CAACC,CAAC,CAAC,CAAC;EAC1B;EACA,OAAOV,MAAM;AACf,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}