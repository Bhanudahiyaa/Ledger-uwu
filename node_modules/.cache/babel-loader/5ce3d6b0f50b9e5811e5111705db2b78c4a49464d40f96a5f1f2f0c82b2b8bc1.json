{"ast":null,"code":"import { isUndefined } from '@antv/util';\nimport { MappingLayer } from '../../adaptor/layer';\nconst defaultHighlightColor = '#2f54eb';\nconst defaultState = {\n  active: {\n    fill: false,\n    stroke: defaultHighlightColor,\n    lineWidth: 1.5,\n    lineOpacity: 0.8\n  },\n  select: {\n    fill: false,\n    stroke: defaultHighlightColor,\n    lineWidth: 1.5,\n    lineOpacity: 0.8\n  }\n};\nexport const getDefaultState = state => {\n  if (isUndefined(state)) {\n    return defaultState;\n  }\n  if (state.active === false) {\n    defaultState.active = Object.assign(defaultState.active, {\n      fill: false,\n      stroke: false\n    });\n  } else if (typeof state.active === 'object') {\n    if (state.active.fill === false) {\n      defaultState.active.fill = false;\n    } else if (typeof state.active.fill === 'string') {\n      defaultState.active.fill = state.active.fill;\n    }\n    if (state.active.stroke === false) {\n      defaultState.active.stroke = false;\n    } else if (typeof state.active.stroke === 'string') {\n      defaultState.active.stroke = state.active.stroke;\n    }\n    if (typeof state.active.lineWidth === 'number') {\n      defaultState.active.lineWidth = state.active.lineWidth;\n    }\n    if (typeof state.active.lineOpacity === 'number') {\n      defaultState.active.lineOpacity = state.active.lineOpacity;\n    }\n  }\n  if (state.select === false) {\n    defaultState.select = Object.assign(defaultState.select, {\n      fill: false,\n      stroke: false\n    });\n  } else if (typeof state.select === 'object') {\n    if (state.select.fill === false) {\n      defaultState.select.fill = false;\n    } else if (typeof state.select.fill === 'string') {\n      defaultState.select.fill = state.select.fill;\n    }\n    if (state.select.stroke === false) {\n      defaultState.select.stroke = false;\n    } else if (typeof state.select.stroke === 'string') {\n      defaultState.select.stroke = state.select.stroke;\n    }\n    if (typeof state.select.lineWidth === 'number') {\n      defaultState.select.lineWidth = state.select.lineWidth;\n    }\n    if (typeof state.select.lineOpacity === 'number') {\n      defaultState.select.lineOpacity = state.select.lineOpacity;\n    }\n  }\n  return defaultState;\n};\nexport function mappingLayer(layer, strokeLayer, highlightLayer, selectFillLayer, selectStrokeLayer, options) {\n  const {\n    color,\n    style,\n    state\n  } = options;\n  const defaultState = getDefaultState(state);\n  const fillState = {\n    active: defaultState.active.fill === false ? false : {\n      color: defaultState.active.fill\n    },\n    select: false\n  };\n  const fillStyle = {\n    opacity: style === null || style === void 0 ? void 0 : style.opacity\n  };\n  const strokeSize = style === null || style === void 0 ? void 0 : style.lineWidth;\n  const strokeColor = style === null || style === void 0 ? void 0 : style.stroke;\n  const strokeStyle = {\n    opacity: style === null || style === void 0 ? void 0 : style.lineOpacity,\n    dashArray: style === null || style === void 0 ? void 0 : style.lineDash,\n    lineType: style === null || style === void 0 ? void 0 : style.lineType\n  };\n  /**\n   * 映射填充面图层\n   */\n  // shape\n  MappingLayer.shape(layer, 'fill');\n  // color\n  color && MappingLayer.color(layer, color);\n  // style\n  fillStyle && MappingLayer.style(layer, fillStyle);\n  // state\n  fillState && MappingLayer.state(layer, fillState);\n  /**\n   * 描边图层\n   */\n  // shape\n  MappingLayer.shape(strokeLayer, 'line');\n  // size\n  strokeSize && MappingLayer.size(strokeLayer, strokeSize);\n  // color\n  strokeColor && MappingLayer.color(strokeLayer, strokeColor);\n  // style\n  strokeStyle && MappingLayer.style(strokeLayer, strokeStyle);\n  /**\n   * 高亮图层\n   */\n  if (defaultState.active.stroke) {\n    const color = defaultState.active.stroke;\n    const size = defaultState.active.lineWidth || strokeSize;\n    const style = {\n      opacity: defaultState.active.lineOpacity\n    };\n    // shape\n    MappingLayer.shape(highlightLayer, 'line');\n    // size\n    size && MappingLayer.size(highlightLayer, size);\n    // color\n    color && MappingLayer.color(highlightLayer, color);\n    // style\n    style && MappingLayer.style(highlightLayer, style);\n  }\n  /**\n   * 选中填充图层\n   */\n  if (defaultState.select.fill) {\n    const color = defaultState.select.fill;\n    // shape\n    MappingLayer.shape(selectFillLayer, 'fill');\n    // color\n    color && MappingLayer.color(selectFillLayer, color);\n    // style\n    fillStyle && MappingLayer.style(selectFillLayer, fillStyle);\n    // state\n    MappingLayer.state(selectFillLayer, {\n      select: false,\n      active: false\n    });\n  }\n  /**\n   * 选中描边图层\n   */\n  if (defaultState.select.stroke) {\n    const color = defaultState.select.stroke;\n    const size = defaultState.select.lineWidth || strokeSize;\n    const style = {\n      opacity: defaultState.select.lineOpacity\n    };\n    // shape\n    MappingLayer.shape(selectStrokeLayer, 'line');\n    // size\n    size && MappingLayer.size(selectStrokeLayer, size);\n    // color\n    color && MappingLayer.color(selectStrokeLayer, color);\n    // style\n    style && MappingLayer.style(selectStrokeLayer, style);\n  }\n}","map":{"version":3,"names":["isUndefined","MappingLayer","defaultHighlightColor","defaultState","active","fill","stroke","lineWidth","lineOpacity","select","getDefaultState","state","Object","assign","mappingLayer","layer","strokeLayer","highlightLayer","selectFillLayer","selectStrokeLayer","options","color","style","fillState","fillStyle","opacity","strokeSize","strokeColor","strokeStyle","dashArray","lineDash","lineType","shape","size"],"sources":["../../../../src/layers/area-layer/adaptor.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}