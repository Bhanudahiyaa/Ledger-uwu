{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport BaseMapService from \"../utils/BaseMapService\";\nimport { MapServiceEvent } from '@antv/l7-core';\nimport { MercatorCoordinate } from '@antv/l7-map';\nimport Viewport from \"../lib/web-mercator-viewport\";\nimport { load } from \"./maploader\";\nlet mapdivCount = 0;\nconst EventMap = {\n  zoomchange: ['Ge']\n};\n\n// TODO: 基于抽象类 BaseMap 实现，补全缺失方法，解决类型问题\nexport default class TdtMapService extends BaseMapService {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"viewport\", null);\n    _defineProperty(this, \"evtCbProxyMap\", new Map());\n    // @ts-ignore\n    _defineProperty(this, \"sceneContainer\", void 0);\n    _defineProperty(this, \"handleCameraChanged\", () => {\n      this.emit('mapchange');\n      const map = this.map;\n      const {\n        lng,\n        lat\n      } = this.map.getCenter();\n      const option = {\n        center: [lng, lat],\n        // @ts-ignore\n        viewportHeight: map.getContainer().clientHeight,\n        // @ts-ignore\n        viewportWidth: map.getContainer().clientWidth,\n        // @ts-ignore\n        bearing: 360,\n        // @ts-ignore\n        pitch: 0,\n        // @ts-ignore\n        zoom: map.getZoom() - 1\n      };\n      if (this.viewport) {\n        this.viewport.syncWithMapCamera(option);\n        this.updateCoordinateSystemService();\n        this.cameraChangedCallback(this.viewport);\n      }\n    });\n  }\n  // 不直接用自带的marker的div，因为会收到天地图缩放时visibility变成hidden的影响\n  addMarkerContainer() {\n    const container = this.map.getContainer();\n    const div = this.markerContainer = document.createElement('div');\n    container.appendChild(div);\n    // div.classList.add('l7-marker-container');\n    // div.classList.add('leaflet-layer');\n    // div.classList.add('leaflet-zoom-animated');\n    div.setAttribute('tabindex', '-1');\n    div.id = 'tdt-L7-marker';\n    div.style.position = 'absolute';\n    div.style.left = '';\n    div.style.top = '';\n    div.style.zIndex = '600';\n    div.style.width = '0px';\n    div.style.height = '0px';\n    div.style.overflow = 'visible';\n    return;\n  }\n  getMarkerContainer() {\n    return this.markerContainer;\n  }\n  onCameraChanged(callback) {\n    this.cameraChangedCallback = callback;\n  }\n  resize(ev) {\n    this.sceneContainer.style.width = ev.newSize.x + 'px';\n    this.sceneContainer.style.height = ev.newSize.y + 'px';\n  }\n  update() {\n    const bounds = this.map.getBounds();\n    const {\n      x,\n      y\n    } = this.map.lngLatToLayerPoint({\n      lng: bounds.getSouthWest().lng,\n      lat: bounds.getNorthEast().lat\n    });\n    this.sceneContainer.style.transition = '';\n    this.sceneContainer.style.transformOrigin = 'center';\n    this.sceneContainer.style.transform = `translate3d(${x}px, ${y}px, 0px) scale(1)`;\n    //更新marker容器的位置 实现平移\n    this.markerContainer.style.transition = '';\n    this.markerContainer.style.transformOrigin = 'center';\n    this.markerContainer.style.transform = `translate3d(${-x}px, ${-y}px, 0px) scale(1)`;\n    // @ts-ignore\n    this.sceneContainer._tdt_pos = new T.Point(x, y);\n    this.handleCameraChanged();\n  }\n  getZoomScale(toZoom, fromZoom) {\n    // TODO replace with universal implementation after refactoring projections\n    const crs = this.map.options.IW;\n    fromZoom = fromZoom === undefined ? this.map.getZoom() : fromZoom;\n    return crs.scale(toZoom) / crs.scale(fromZoom);\n  }\n  zoomStartUpdate(ev) {\n    // T._Q :DomUtil\n    // this.map.options.IW.qW:map.project\n    // GQ:multiply aQ:add DQ:substract\n    // 都是混淆后的方法,后续需要考虑讲这些方法都实现了,避免api更新后方法名发生改变\n    const center = ev.center;\n    const zoom = ev.zoom;\n    const scale = this.getZoomScale(zoom, this.map.getZoom());\n\n    // @ts-ignore\n    const position = T._Q.getPosition(this.sceneContainer);\n    const viewHalf = this.map.getSize().GQ(0.5);\n    const currentCenterPoint = this.map.options.IW.qW(this.map.getCenter(), zoom);\n    const destCenterPoint = this.map.options.IW.qW(center, zoom);\n    const centerOffset = destCenterPoint.DQ(currentCenterPoint);\n    // @ts-ignore\n    const topLeftOffset = new T.Point(viewHalf.x, viewHalf.y).GQ(-scale);\n    topLeftOffset.aQ(position);\n    topLeftOffset.aQ(viewHalf);\n    topLeftOffset.DQ(centerOffset);\n    this.sceneContainer.style.transform = `translate3d(${topLeftOffset.x}px,${topLeftOffset.y}px,0px) scale(${scale})`;\n    this.sceneContainer.style.transformOrigin = '0 0';\n    this.sceneContainer.style.transition = 'transform 0.25s cubic-bezier(0,0,0.25,1)';\n    this.handleCameraChanged();\n  }\n  getOverlayContainer() {\n    var _this$map$getPanes;\n    const overlayPane = (_this$map$getPanes = this.map.getPanes()) === null || _this$map$getPanes === void 0 ? void 0 : _this$map$getPanes.overlayPane;\n    const container = document.createElement('div');\n    overlayPane.parentElement.appendChild(container);\n    container.id = 'tdt-L7';\n    const size = this.map.getSize();\n    container.style.zIndex = '200'; //置于上层\n    container.style.width = `${size.x}px`;\n    container.style.height = `${size.y}px`;\n    // @ts-ignore\n    this.sceneContainer = container;\n    return container;\n  }\n  init() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.viewport = new Viewport();\n      const {\n        id,\n        mapInstance,\n        center = [121.30654632240122, 31.25744185633306],\n        token = 'b15e548080c79819617367d3f6095c69',\n        minZoom = 1,\n        maxZoom = 18,\n        zoom = 3\n      } = _this.config;\n\n      // @ts-ignore\n      if (!window.T) {\n        yield load({\n          tk: token\n        });\n      }\n      if (mapInstance) {\n        _this.map = mapInstance;\n        // @ts-ignore\n        _this.map.centerAndZoom(new window.T.LngLat(center[0], center[1]), zoom);\n        _this.$mapContainer = _this.map.getContainer();\n\n        // @ts-ignore\n        const point = new window.T.LngLat(center[0], center[1]);\n        _this.map.centerAndZoom(point, zoom);\n        _this.setMinZoom(minZoom);\n        _this.setMaxZoom(maxZoom);\n      } else {\n        if (!id) {\n          throw Error('No container id specified');\n        }\n        _this.$mapContainer = _this.creatMapContainer(id);\n        // @ts-ignore\n        const map = new T.Map(_this.$mapContainer, {\n          // @ts-ignore\n          center: window.T.LngLat(center[0], center[1]),\n          minZoom,\n          maxZoom,\n          zoom,\n          projection: 'EPSG:900913'\n        });\n        _this.map = map;\n        // @ts-ignore\n        const control = new window.T.Control.Zoom();\n        map.addControl(control);\n      }\n      const container = _this.map.getContainer();\n      const tdtPanes = container.querySelector('.tdt-pane');\n      tdtPanes.style.zIndex = 1;\n      _this.handleCameraChanged();\n      _this.map.on('move', _this.update, _this);\n      //对应leaflet中的zoomanim\n      _this.map.on('Ge', _this.zoomStartUpdate, _this);\n      _this.map.on('resize', _this.resize, _this);\n    })();\n  }\n  destroy() {\n    return;\n  }\n\n  // MapEvent\n  on(type, handle) {\n    if (MapServiceEvent.indexOf(type) !== -1) {\n      this.eventEmitter.on(type, handle);\n    } else {\n      const onProxy = eventName => {\n        let cbProxyMap = this.evtCbProxyMap.get(eventName);\n        if (!cbProxyMap) {\n          this.evtCbProxyMap.set(eventName, cbProxyMap = new Map());\n        }\n        if (cbProxyMap.get(handle)) {\n          return;\n        }\n        const handleProxy = (...args) => {\n          if (args[0] && typeof args[0] === 'object' && !args[0].lngLat && !args[0].lnglat) {\n            args[0].lngLat = args[0].latlng || args[0].latLng;\n            args[0].map = this.map;\n          }\n          handle(...args);\n        };\n        cbProxyMap.set(handle, handleProxy);\n        this.map.on(eventName, handleProxy);\n      };\n      if (Array.isArray(EventMap[type])) {\n        EventMap[type].forEach(eventName => {\n          onProxy(eventName || type);\n        });\n      } else {\n        onProxy(EventMap[type] || type);\n      }\n    }\n  }\n  off(type, handle) {\n    if (MapServiceEvent.indexOf(type) !== -1) {\n      this.eventEmitter.off(type, handle);\n      return;\n    }\n    const offProxy = eventName => {\n      var _this$evtCbProxyMap$g, _this$evtCbProxyMap$g2;\n      const handleProxy = (_this$evtCbProxyMap$g = this.evtCbProxyMap.get(type)) === null || _this$evtCbProxyMap$g === void 0 ? void 0 : _this$evtCbProxyMap$g.get(handle);\n      if (!handleProxy) {\n        return;\n      }\n      (_this$evtCbProxyMap$g2 = this.evtCbProxyMap.get(eventName)) === null || _this$evtCbProxyMap$g2 === void 0 || _this$evtCbProxyMap$g2.delete(handle);\n      this.map.off(eventName, handleProxy);\n    };\n    if (Array.isArray(EventMap[type])) {\n      EventMap[type].forEach(eventName => {\n        offProxy(eventName || type);\n      });\n    } else {\n      offProxy(EventMap[type] || type);\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  once(type, handler) {\n    throw new Error('Method not implemented.');\n  }\n\n  // get dom\n\n  getMapContainer() {\n    return this.map.getContainer();\n  }\n  getType() {\n    return 'tdtmap';\n  }\n  getMapCanvasContainer() {\n    var _this$map$getContaine;\n    // tdt-container\n    return (_this$map$getContaine = this.map.getContainer()) === null || _this$map$getContaine === void 0 ? void 0 : _this$map$getContaine.getElementsByClassName('tdt-container')[0];\n  }\n\n  // get mapStatus method\n  getSize() {\n    const size = this.map.getSize();\n    return [size.x, size.y];\n  }\n\n  // get mapStatus method\n\n  getZoom() {\n    return this.map.getZoom();\n  }\n  setZoom(zoom) {\n    return this.map.setZoom(zoom);\n  }\n  getCenter() {\n    return this.map.getCenter();\n  }\n  setCenter(lnglat) {\n    // @ts-ignore\n    const lngLat = window.T.LngLat(lnglat[0], lnglat[1]);\n    this.map.centerAndZoom(lngLat, this.map.getZoom());\n  }\n  setZoomAndCenter(zoom, center) {\n    // @ts-ignore\n    const lngLat = window.T.LngLat(center[0], center[1]);\n    this.map.centerAndZoom(lngLat, zoom);\n  }\n  getPitch() {\n    return 0;\n  }\n  getRotation() {\n    return 0;\n  }\n  setRotation(rotation) {\n    this.map.setBearing(rotation);\n  }\n  zoomIn(option, eventData) {\n    this.map.zoomIn(option, eventData);\n  }\n  zoomOut(option, eventData) {\n    this.map.zoomOut(option, eventData);\n  }\n  panTo(p) {\n    this.map.panTo(p);\n  }\n  panBy(x = 0, y = 0) {\n    // @ts-ignore\n    this.map.panBy([x, y]);\n  }\n  fitBounds(bound) {\n    const [sw, ne] = bound;\n    // @ts-ignore\n    this.map.setViewport([new window.T.LngLat(sw[0], sw[1]), new window.T.LngLat(ne[0], ne[1])]);\n  }\n  setMaxZoom(max) {\n    this.map.setMaxZoom(max);\n  }\n  setMinZoom(min) {\n    this.map.setMinZoom(min);\n  }\n  setMapStatus(option) {\n    if (option.doubleClickZoom === true) {\n      this.map.enableDoubleClickZoom();\n    }\n    if (option.doubleClickZoom === false) {\n      this.map.disableDoubleClickZoom();\n    }\n    if (option.dragEnable === false) {\n      this.map.disableDrag();\n    }\n    if (option.dragEnable === true) {\n      this.map.enableDrag();\n    }\n    if (option.keyboardEnable === false) {\n      this.map.disableKeyboard();\n    }\n    if (option.keyboardEnable === true) {\n      this.map.enableKeyboard();\n    }\n    if (option.zoomEnable === false) {\n      this.map.disableScrollWheelZoom();\n    }\n    if (option.zoomEnable === true) {\n      this.map.enableScrollWheelZoom();\n    }\n  }\n\n  // coordinates methods\n\n  getModelMatrix() {\n    throw new Error('Method not implemented.');\n  }\n  pixelToLngLat([x, y]) {\n    const lngLat = this.map.layerPointToLngLat({\n      x,\n      y\n    });\n    return {\n      lng: lngLat.lng,\n      lat: lngLat.lat\n    };\n  }\n  lngLatToPixel([lng, lat]) {\n    const pixel = this.map.lngLatToLayerPoint({\n      lng,\n      lat\n    });\n    return {\n      x: pixel.x,\n      y: pixel.y\n    };\n  }\n  containerToLngLat([x, y]) {\n    const point = this.map.containerPointToLngLat({\n      x,\n      y\n    });\n    return {\n      lng: point.lng,\n      lat: point.lat\n    };\n  }\n  lngLatToContainer([lng, lat]) {\n    const overlayPixel = this.map.lngLatToContainerPoint({\n      lat,\n      lng\n    });\n    return {\n      x: overlayPixel.x,\n      y: overlayPixel.y\n    };\n  }\n  lngLatToCoord([lng, lat]) {\n    const pixelCoord = this.lngLatToPixel([lng, lat]);\n    return [pixelCoord.x, pixelCoord.y];\n  }\n  lngLatToCoords(list) {\n    return list.map(item => Array.isArray(item[0]) ? this.lngLatToCoords(item) : this.lngLatToCoord(item));\n  }\n  getBounds() {\n    const latlngBound = this.map.getBounds();\n    const sw = latlngBound.getSouthWest(),\n      ne = latlngBound.getNorthEast();\n    return [[sw.lng, sw.lat], [ne.lng, ne.lat]];\n  }\n  lngLatToMercator(lnglat, altitude) {\n    // Use built in mercator tools due to Tencent not provided related methods\n    const {\n      x = 0,\n      y = 0,\n      z = 0\n    } = MercatorCoordinate.fromLngLat(lnglat, altitude);\n    return {\n      x,\n      y,\n      z\n    };\n  }\n  getCustomCoordCenter() {\n    throw new Error('Method not implemented.');\n  }\n  creatMapContainer(id) {\n    let $wrapper = id;\n    if (typeof id === 'string') {\n      $wrapper = document.getElementById(id);\n    }\n    const $tdtmapdiv = document.createElement('div');\n    $tdtmapdiv.style.cssText += `\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    `;\n    $tdtmapdiv.id = 'l7_tdt_div' + mapdivCount++;\n    $wrapper.appendChild($tdtmapdiv);\n    return $tdtmapdiv;\n  }\n\n  // public exportMap() {}\n  //\n  // private hideLogo() {}\n}","map":{"version":3,"names":["_asyncToGenerator","_defineProperty","BaseMapService","MapServiceEvent","MercatorCoordinate","Viewport","load","mapdivCount","EventMap","zoomchange","TdtMapService","constructor","args","Map","emit","map","lng","lat","getCenter","option","center","viewportHeight","getContainer","clientHeight","viewportWidth","clientWidth","bearing","pitch","zoom","getZoom","viewport","syncWithMapCamera","updateCoordinateSystemService","cameraChangedCallback","addMarkerContainer","container","div","markerContainer","document","createElement","appendChild","setAttribute","id","style","position","left","top","zIndex","width","height","overflow","getMarkerContainer","onCameraChanged","callback","resize","ev","sceneContainer","newSize","x","y","update","bounds","getBounds","lngLatToLayerPoint","getSouthWest","getNorthEast","transition","transformOrigin","transform","_tdt_pos","T","Point","handleCameraChanged","getZoomScale","toZoom","fromZoom","crs","options","IW","undefined","scale","zoomStartUpdate","_Q","getPosition","viewHalf","getSize","GQ","currentCenterPoint","qW","destCenterPoint","centerOffset","DQ","topLeftOffset","aQ","getOverlayContainer","_this$map$getPanes","overlayPane","getPanes","parentElement","size","init","_this","mapInstance","token","minZoom","maxZoom","config","window","tk","centerAndZoom","LngLat","$mapContainer","point","setMinZoom","setMaxZoom","Error","creatMapContainer","projection","control","Control","Zoom","addControl","tdtPanes","querySelector","on","destroy","type","handle","indexOf","eventEmitter","onProxy","eventName","cbProxyMap","evtCbProxyMap","get","set","handleProxy","lngLat","lnglat","latlng","latLng","Array","isArray","forEach","off","offProxy","_this$evtCbProxyMap$g","_this$evtCbProxyMap$g2","delete","once","handler","getMapContainer","getType","getMapCanvasContainer","_this$map$getContaine","getElementsByClassName","setZoom","setCenter","setZoomAndCenter","getPitch","getRotation","setRotation","rotation","setBearing","zoomIn","eventData","zoomOut","panTo","p","panBy","fitBounds","bound","sw","ne","setViewport","max","min","setMapStatus","doubleClickZoom","enableDoubleClickZoom","disableDoubleClickZoom","dragEnable","disableDrag","enableDrag","keyboardEnable","disableKeyboard","enableKeyboard","zoomEnable","disableScrollWheelZoom","enableScrollWheelZoom","getModelMatrix","pixelToLngLat","layerPointToLngLat","lngLatToPixel","pixel","containerToLngLat","containerPointToLngLat","lngLatToContainer","overlayPixel","lngLatToContainerPoint","lngLatToCoord","pixelCoord","lngLatToCoords","list","item","latlngBound","lngLatToMercator","altitude","z","fromLngLat","getCustomCoordCenter","$wrapper","getElementById","$tdtmapdiv","cssText"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-maps/es/tdtmap/map.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport BaseMapService from \"../utils/BaseMapService\";\nimport { MapServiceEvent } from '@antv/l7-core';\nimport { MercatorCoordinate } from '@antv/l7-map';\nimport Viewport from \"../lib/web-mercator-viewport\";\nimport { load } from \"./maploader\";\nlet mapdivCount = 0;\nconst EventMap = {\n  zoomchange: ['Ge']\n};\n\n// TODO: 基于抽象类 BaseMap 实现，补全缺失方法，解决类型问题\nexport default class TdtMapService extends BaseMapService {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"viewport\", null);\n    _defineProperty(this, \"evtCbProxyMap\", new Map());\n    // @ts-ignore\n    _defineProperty(this, \"sceneContainer\", void 0);\n    _defineProperty(this, \"handleCameraChanged\", () => {\n      this.emit('mapchange');\n      const map = this.map;\n      const {\n        lng,\n        lat\n      } = this.map.getCenter();\n      const option = {\n        center: [lng, lat],\n        // @ts-ignore\n        viewportHeight: map.getContainer().clientHeight,\n        // @ts-ignore\n        viewportWidth: map.getContainer().clientWidth,\n        // @ts-ignore\n        bearing: 360,\n        // @ts-ignore\n        pitch: 0,\n        // @ts-ignore\n        zoom: map.getZoom() - 1\n      };\n      if (this.viewport) {\n        this.viewport.syncWithMapCamera(option);\n        this.updateCoordinateSystemService();\n        this.cameraChangedCallback(this.viewport);\n      }\n    });\n  }\n  // 不直接用自带的marker的div，因为会收到天地图缩放时visibility变成hidden的影响\n  addMarkerContainer() {\n    const container = this.map.getContainer();\n    const div = this.markerContainer = document.createElement('div');\n    container.appendChild(div);\n    // div.classList.add('l7-marker-container');\n    // div.classList.add('leaflet-layer');\n    // div.classList.add('leaflet-zoom-animated');\n    div.setAttribute('tabindex', '-1');\n    div.id = 'tdt-L7-marker';\n    div.style.position = 'absolute';\n    div.style.left = '';\n    div.style.top = '';\n    div.style.zIndex = '600';\n    div.style.width = '0px';\n    div.style.height = '0px';\n    div.style.overflow = 'visible';\n    return;\n  }\n  getMarkerContainer() {\n    return this.markerContainer;\n  }\n  onCameraChanged(callback) {\n    this.cameraChangedCallback = callback;\n  }\n  resize(ev) {\n    this.sceneContainer.style.width = ev.newSize.x + 'px';\n    this.sceneContainer.style.height = ev.newSize.y + 'px';\n  }\n  update() {\n    const bounds = this.map.getBounds();\n    const {\n      x,\n      y\n    } = this.map.lngLatToLayerPoint({\n      lng: bounds.getSouthWest().lng,\n      lat: bounds.getNorthEast().lat\n    });\n    this.sceneContainer.style.transition = '';\n    this.sceneContainer.style.transformOrigin = 'center';\n    this.sceneContainer.style.transform = `translate3d(${x}px, ${y}px, 0px) scale(1)`;\n    //更新marker容器的位置 实现平移\n    this.markerContainer.style.transition = '';\n    this.markerContainer.style.transformOrigin = 'center';\n    this.markerContainer.style.transform = `translate3d(${-x}px, ${-y}px, 0px) scale(1)`;\n    // @ts-ignore\n    this.sceneContainer._tdt_pos = new T.Point(x, y);\n    this.handleCameraChanged();\n  }\n  getZoomScale(toZoom, fromZoom) {\n    // TODO replace with universal implementation after refactoring projections\n    const crs = this.map.options.IW;\n    fromZoom = fromZoom === undefined ? this.map.getZoom() : fromZoom;\n    return crs.scale(toZoom) / crs.scale(fromZoom);\n  }\n  zoomStartUpdate(ev) {\n    // T._Q :DomUtil\n    // this.map.options.IW.qW:map.project\n    // GQ:multiply aQ:add DQ:substract\n    // 都是混淆后的方法,后续需要考虑讲这些方法都实现了,避免api更新后方法名发生改变\n    const center = ev.center;\n    const zoom = ev.zoom;\n    const scale = this.getZoomScale(zoom, this.map.getZoom());\n\n    // @ts-ignore\n    const position = T._Q.getPosition(this.sceneContainer);\n    const viewHalf = this.map.getSize().GQ(0.5);\n    const currentCenterPoint = this.map.options.IW.qW(this.map.getCenter(), zoom);\n    const destCenterPoint = this.map.options.IW.qW(center, zoom);\n    const centerOffset = destCenterPoint.DQ(currentCenterPoint);\n    // @ts-ignore\n    const topLeftOffset = new T.Point(viewHalf.x, viewHalf.y).GQ(-scale);\n    topLeftOffset.aQ(position);\n    topLeftOffset.aQ(viewHalf);\n    topLeftOffset.DQ(centerOffset);\n    this.sceneContainer.style.transform = `translate3d(${topLeftOffset.x}px,${topLeftOffset.y}px,0px) scale(${scale})`;\n    this.sceneContainer.style.transformOrigin = '0 0';\n    this.sceneContainer.style.transition = 'transform 0.25s cubic-bezier(0,0,0.25,1)';\n    this.handleCameraChanged();\n  }\n  getOverlayContainer() {\n    var _this$map$getPanes;\n    const overlayPane = (_this$map$getPanes = this.map.getPanes()) === null || _this$map$getPanes === void 0 ? void 0 : _this$map$getPanes.overlayPane;\n    const container = document.createElement('div');\n    overlayPane.parentElement.appendChild(container);\n    container.id = 'tdt-L7';\n    const size = this.map.getSize();\n    container.style.zIndex = '200'; //置于上层\n    container.style.width = `${size.x}px`;\n    container.style.height = `${size.y}px`;\n    // @ts-ignore\n    this.sceneContainer = container;\n    return container;\n  }\n  init() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.viewport = new Viewport();\n      const {\n        id,\n        mapInstance,\n        center = [121.30654632240122, 31.25744185633306],\n        token = 'b15e548080c79819617367d3f6095c69',\n        minZoom = 1,\n        maxZoom = 18,\n        zoom = 3\n      } = _this.config;\n\n      // @ts-ignore\n      if (!window.T) {\n        yield load({\n          tk: token\n        });\n      }\n      if (mapInstance) {\n        _this.map = mapInstance;\n        // @ts-ignore\n        _this.map.centerAndZoom(new window.T.LngLat(center[0], center[1]), zoom);\n        _this.$mapContainer = _this.map.getContainer();\n\n        // @ts-ignore\n        const point = new window.T.LngLat(center[0], center[1]);\n        _this.map.centerAndZoom(point, zoom);\n        _this.setMinZoom(minZoom);\n        _this.setMaxZoom(maxZoom);\n      } else {\n        if (!id) {\n          throw Error('No container id specified');\n        }\n        _this.$mapContainer = _this.creatMapContainer(id);\n        // @ts-ignore\n        const map = new T.Map(_this.$mapContainer, {\n          // @ts-ignore\n          center: window.T.LngLat(center[0], center[1]),\n          minZoom,\n          maxZoom,\n          zoom,\n          projection: 'EPSG:900913'\n        });\n        _this.map = map;\n        // @ts-ignore\n        const control = new window.T.Control.Zoom();\n        map.addControl(control);\n      }\n      const container = _this.map.getContainer();\n      const tdtPanes = container.querySelector('.tdt-pane');\n      tdtPanes.style.zIndex = 1;\n      _this.handleCameraChanged();\n      _this.map.on('move', _this.update, _this);\n      //对应leaflet中的zoomanim\n      _this.map.on('Ge', _this.zoomStartUpdate, _this);\n      _this.map.on('resize', _this.resize, _this);\n    })();\n  }\n  destroy() {\n    return;\n  }\n\n  // MapEvent\n  on(type, handle) {\n    if (MapServiceEvent.indexOf(type) !== -1) {\n      this.eventEmitter.on(type, handle);\n    } else {\n      const onProxy = eventName => {\n        let cbProxyMap = this.evtCbProxyMap.get(eventName);\n        if (!cbProxyMap) {\n          this.evtCbProxyMap.set(eventName, cbProxyMap = new Map());\n        }\n        if (cbProxyMap.get(handle)) {\n          return;\n        }\n        const handleProxy = (...args) => {\n          if (args[0] && typeof args[0] === 'object' && !args[0].lngLat && !args[0].lnglat) {\n            args[0].lngLat = args[0].latlng || args[0].latLng;\n            args[0].map = this.map;\n          }\n          handle(...args);\n        };\n        cbProxyMap.set(handle, handleProxy);\n        this.map.on(eventName, handleProxy);\n      };\n      if (Array.isArray(EventMap[type])) {\n        EventMap[type].forEach(eventName => {\n          onProxy(eventName || type);\n        });\n      } else {\n        onProxy(EventMap[type] || type);\n      }\n    }\n  }\n  off(type, handle) {\n    if (MapServiceEvent.indexOf(type) !== -1) {\n      this.eventEmitter.off(type, handle);\n      return;\n    }\n    const offProxy = eventName => {\n      var _this$evtCbProxyMap$g, _this$evtCbProxyMap$g2;\n      const handleProxy = (_this$evtCbProxyMap$g = this.evtCbProxyMap.get(type)) === null || _this$evtCbProxyMap$g === void 0 ? void 0 : _this$evtCbProxyMap$g.get(handle);\n      if (!handleProxy) {\n        return;\n      }\n      (_this$evtCbProxyMap$g2 = this.evtCbProxyMap.get(eventName)) === null || _this$evtCbProxyMap$g2 === void 0 || _this$evtCbProxyMap$g2.delete(handle);\n      this.map.off(eventName, handleProxy);\n    };\n    if (Array.isArray(EventMap[type])) {\n      EventMap[type].forEach(eventName => {\n        offProxy(eventName || type);\n      });\n    } else {\n      offProxy(EventMap[type] || type);\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  once(type, handler) {\n    throw new Error('Method not implemented.');\n  }\n\n  // get dom\n\n  getMapContainer() {\n    return this.map.getContainer();\n  }\n  getType() {\n    return 'tdtmap';\n  }\n  getMapCanvasContainer() {\n    var _this$map$getContaine;\n    // tdt-container\n    return (_this$map$getContaine = this.map.getContainer()) === null || _this$map$getContaine === void 0 ? void 0 : _this$map$getContaine.getElementsByClassName('tdt-container')[0];\n  }\n\n  // get mapStatus method\n  getSize() {\n    const size = this.map.getSize();\n    return [size.x, size.y];\n  }\n\n  // get mapStatus method\n\n  getZoom() {\n    return this.map.getZoom();\n  }\n  setZoom(zoom) {\n    return this.map.setZoom(zoom);\n  }\n  getCenter() {\n    return this.map.getCenter();\n  }\n  setCenter(lnglat) {\n    // @ts-ignore\n    const lngLat = window.T.LngLat(lnglat[0], lnglat[1]);\n    this.map.centerAndZoom(lngLat, this.map.getZoom());\n  }\n  setZoomAndCenter(zoom, center) {\n    // @ts-ignore\n    const lngLat = window.T.LngLat(center[0], center[1]);\n    this.map.centerAndZoom(lngLat, zoom);\n  }\n  getPitch() {\n    return 0;\n  }\n  getRotation() {\n    return 0;\n  }\n  setRotation(rotation) {\n    this.map.setBearing(rotation);\n  }\n  zoomIn(option, eventData) {\n    this.map.zoomIn(option, eventData);\n  }\n  zoomOut(option, eventData) {\n    this.map.zoomOut(option, eventData);\n  }\n  panTo(p) {\n    this.map.panTo(p);\n  }\n  panBy(x = 0, y = 0) {\n    // @ts-ignore\n    this.map.panBy([x, y]);\n  }\n  fitBounds(bound) {\n    const [sw, ne] = bound;\n    // @ts-ignore\n    this.map.setViewport([new window.T.LngLat(sw[0], sw[1]), new window.T.LngLat(ne[0], ne[1])]);\n  }\n  setMaxZoom(max) {\n    this.map.setMaxZoom(max);\n  }\n  setMinZoom(min) {\n    this.map.setMinZoom(min);\n  }\n  setMapStatus(option) {\n    if (option.doubleClickZoom === true) {\n      this.map.enableDoubleClickZoom();\n    }\n    if (option.doubleClickZoom === false) {\n      this.map.disableDoubleClickZoom();\n    }\n    if (option.dragEnable === false) {\n      this.map.disableDrag();\n    }\n    if (option.dragEnable === true) {\n      this.map.enableDrag();\n    }\n    if (option.keyboardEnable === false) {\n      this.map.disableKeyboard();\n    }\n    if (option.keyboardEnable === true) {\n      this.map.enableKeyboard();\n    }\n    if (option.zoomEnable === false) {\n      this.map.disableScrollWheelZoom();\n    }\n    if (option.zoomEnable === true) {\n      this.map.enableScrollWheelZoom();\n    }\n  }\n\n  // coordinates methods\n\n  getModelMatrix() {\n    throw new Error('Method not implemented.');\n  }\n  pixelToLngLat([x, y]) {\n    const lngLat = this.map.layerPointToLngLat({\n      x,\n      y\n    });\n    return {\n      lng: lngLat.lng,\n      lat: lngLat.lat\n    };\n  }\n  lngLatToPixel([lng, lat]) {\n    const pixel = this.map.lngLatToLayerPoint({\n      lng,\n      lat\n    });\n    return {\n      x: pixel.x,\n      y: pixel.y\n    };\n  }\n  containerToLngLat([x, y]) {\n    const point = this.map.containerPointToLngLat({\n      x,\n      y\n    });\n    return {\n      lng: point.lng,\n      lat: point.lat\n    };\n  }\n  lngLatToContainer([lng, lat]) {\n    const overlayPixel = this.map.lngLatToContainerPoint({\n      lat,\n      lng\n    });\n    return {\n      x: overlayPixel.x,\n      y: overlayPixel.y\n    };\n  }\n  lngLatToCoord([lng, lat]) {\n    const pixelCoord = this.lngLatToPixel([lng, lat]);\n    return [pixelCoord.x, pixelCoord.y];\n  }\n  lngLatToCoords(list) {\n    return list.map(item => Array.isArray(item[0]) ? this.lngLatToCoords(item) : this.lngLatToCoord(item));\n  }\n  getBounds() {\n    const latlngBound = this.map.getBounds();\n    const sw = latlngBound.getSouthWest(),\n      ne = latlngBound.getNorthEast();\n    return [[sw.lng, sw.lat], [ne.lng, ne.lat]];\n  }\n  lngLatToMercator(lnglat, altitude) {\n    // Use built in mercator tools due to Tencent not provided related methods\n    const {\n      x = 0,\n      y = 0,\n      z = 0\n    } = MercatorCoordinate.fromLngLat(lnglat, altitude);\n    return {\n      x,\n      y,\n      z\n    };\n  }\n  getCustomCoordCenter() {\n    throw new Error('Method not implemented.');\n  }\n  creatMapContainer(id) {\n    let $wrapper = id;\n    if (typeof id === 'string') {\n      $wrapper = document.getElementById(id);\n    }\n    const $tdtmapdiv = document.createElement('div');\n    $tdtmapdiv.style.cssText += `\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    `;\n    $tdtmapdiv.id = 'l7_tdt_div' + mapdivCount++;\n    $wrapper.appendChild($tdtmapdiv);\n    return $tdtmapdiv;\n  }\n\n  // public exportMap() {}\n  //\n  // private hideLogo() {}\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}