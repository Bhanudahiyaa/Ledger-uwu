{"ast":null,"code":"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Event, Emitter } from './event'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nconst shortcutEvent = Object.freeze(Object.assign(function (callback, context) {\n  const handle = setTimeout(callback.bind(context), 0);\n  return {\n    dispose() {\n      clearTimeout(handle);\n    }\n  };\n}, {\n  maxListeners: 0\n}));\nexport var CancellationToken;\n(function (CancellationToken) {\n  CancellationToken.None = Object.freeze({\n    isCancellationRequested: false,\n    onCancellationRequested: Event.None\n  });\n  CancellationToken.Cancelled = Object.freeze({\n    isCancellationRequested: true,\n    onCancellationRequested: shortcutEvent\n  });\n})(CancellationToken || (CancellationToken = {}));\nclass MutableToken {\n  constructor() {\n    this._isCancelled = false;\n    this._emitter = void 0;\n  }\n  cancel() {\n    if (!this._isCancelled) {\n      this._isCancelled = true;\n      if (this._emitter) {\n        this._emitter.fire(undefined);\n        this._emitter = undefined;\n      }\n    }\n  }\n  get isCancellationRequested() {\n    return this._isCancelled;\n  }\n  get onCancellationRequested() {\n    if (this._isCancelled) {\n      return shortcutEvent;\n    }\n    if (!this._emitter) {\n      this._emitter = new Emitter();\n    }\n    return this._emitter.event;\n  }\n}\nexport class CancellationTokenSource {\n  constructor() {\n    this._token = void 0;\n  }\n  get token() {\n    if (!this._token) {\n      // be lazy and create the token only when\n      // actually needed\n      this._token = new MutableToken();\n    }\n    return this._token;\n  }\n  cancel() {\n    if (!this._token) {\n      // save an object by returning the default\n      // cancelled token when cancellation happens\n      // before someone asks for the token\n      this._token = CancellationToken.Cancelled;\n    } else if (this._token !== CancellationToken.Cancelled) {\n      this._token.cancel();\n    }\n  }\n  dispose() {\n    this.cancel();\n  }\n}\nconst cancelledMessage = 'Cancelled';\nexport function cancelled() {\n  return new Error(cancelledMessage);\n}\nexport function isCancelled(err) {\n  return !!err && err.message === cancelledMessage;\n}\nexport function checkCancelled(token) {\n  if (!!token && token.isCancellationRequested) {\n    throw cancelled();\n  }\n}","map":{"version":3,"names":["Event","Emitter","shortcutEvent","Object","freeze","assign","callback","context","handle","setTimeout","bind","dispose","clearTimeout","maxListeners","CancellationToken","None","isCancellationRequested","onCancellationRequested","Cancelled","MutableToken","constructor","_isCancelled","_emitter","cancel","fire","undefined","event","CancellationTokenSource","_token","token","cancelledMessage","cancelled","Error","isCancelled","err","message","checkCancelled"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/mana-common/es/cancellation.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { Event, Emitter } from './event'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nconst shortcutEvent = Object.freeze(Object.assign(function (callback, context) {\n  const handle = setTimeout(callback.bind(context), 0);\n  return {\n    dispose() {\n      clearTimeout(handle);\n    }\n\n  };\n}, {\n  maxListeners: 0\n}));\nexport var CancellationToken;\n\n(function (CancellationToken) {\n  CancellationToken.None = Object.freeze({\n    isCancellationRequested: false,\n    onCancellationRequested: Event.None\n  });\n  CancellationToken.Cancelled = Object.freeze({\n    isCancellationRequested: true,\n    onCancellationRequested: shortcutEvent\n  });\n})(CancellationToken || (CancellationToken = {}));\n\nclass MutableToken {\n  constructor() {\n    this._isCancelled = false;\n    this._emitter = void 0;\n  }\n\n  cancel() {\n    if (!this._isCancelled) {\n      this._isCancelled = true;\n\n      if (this._emitter) {\n        this._emitter.fire(undefined);\n\n        this._emitter = undefined;\n      }\n    }\n  }\n\n  get isCancellationRequested() {\n    return this._isCancelled;\n  }\n\n  get onCancellationRequested() {\n    if (this._isCancelled) {\n      return shortcutEvent;\n    }\n\n    if (!this._emitter) {\n      this._emitter = new Emitter();\n    }\n\n    return this._emitter.event;\n  }\n\n}\n\nexport class CancellationTokenSource {\n  constructor() {\n    this._token = void 0;\n  }\n\n  get token() {\n    if (!this._token) {\n      // be lazy and create the token only when\n      // actually needed\n      this._token = new MutableToken();\n    }\n\n    return this._token;\n  }\n\n  cancel() {\n    if (!this._token) {\n      // save an object by returning the default\n      // cancelled token when cancellation happens\n      // before someone asks for the token\n      this._token = CancellationToken.Cancelled;\n    } else if (this._token !== CancellationToken.Cancelled) {\n      this._token.cancel();\n    }\n  }\n\n  dispose() {\n    this.cancel();\n  }\n\n}\nconst cancelledMessage = 'Cancelled';\nexport function cancelled() {\n  return new Error(cancelledMessage);\n}\nexport function isCancelled(err) {\n  return !!err && err.message === cancelledMessage;\n}\nexport function checkCancelled(token) {\n  if (!!token && token.isCancellationRequested) {\n    throw cancelled();\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}