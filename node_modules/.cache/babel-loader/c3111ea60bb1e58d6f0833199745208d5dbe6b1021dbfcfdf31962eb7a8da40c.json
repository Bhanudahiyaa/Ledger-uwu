{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport BaseLayer from \"../core/BaseLayer\";\nimport PolygonModels from \"./models/\";\nexport default class PolygonLayer extends BaseLayer {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"type\", 'PolygonLayer');\n    _defineProperty(this, \"enableShaderEncodeStyles\", ['opacity', 'extrusionBase',\n    // shape 为文本时\n    'rotation', 'offsets', 'stroke']);\n  }\n  buildModels() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const shape = _this.getModelType();\n      _this.layerModel = new PolygonModels[shape](_this);\n      yield _this.initLayerModels();\n    })();\n  }\n  getModelType() {\n    var _shapeAttribute$scale;\n    const shapeAttribute = this.styleAttributeService.getLayerStyleAttribute('shape');\n    const shape = shapeAttribute === null || shapeAttribute === void 0 || (_shapeAttribute$scale = shapeAttribute.scale) === null || _shapeAttribute$scale === void 0 ? void 0 : _shapeAttribute$scale.field;\n    if (shape === 'fill' || !shape) {\n      return 'fill';\n    } else if (shape === 'extrude') {\n      return 'extrude';\n    } else if (shape === 'extrusion') {\n      return 'extrusion';\n    } else if (shape === 'water') {\n      return 'water';\n    } else if (shape === 'ocean') {\n      return 'ocean';\n    } else if (shape === 'line') {\n      return 'line';\n    } else {\n      return this.getPointModelType();\n    }\n  }\n  getPointModelType() {\n    // pointlayer\n    //  2D、 3d、 shape、image、text、normal、\n    const layerData = this.getEncodedData();\n    const {\n      shape2d,\n      shape3d\n    } = this.getLayerConfig();\n    const iconMap = this.iconService.getIconMap();\n    const item = layerData.find(fe => {\n      return fe.hasOwnProperty('shape');\n    });\n    if (!item) {\n      return 'fill';\n    } else {\n      const shape = item.shape;\n      if (shape === 'dot') {\n        return 'point_normal';\n      }\n      if ((shape2d === null || shape2d === void 0 ? void 0 : shape2d.indexOf(shape)) !== -1) {\n        return 'point_fill';\n      }\n      if ((shape3d === null || shape3d === void 0 ? void 0 : shape3d.indexOf(shape)) !== -1) {\n        return 'point_extrude';\n      }\n      if (iconMap.hasOwnProperty(shape)) {\n        return 'point_image';\n      }\n      return 'text';\n    }\n  }\n}","map":{"version":3,"names":["_asyncToGenerator","_defineProperty","BaseLayer","PolygonModels","PolygonLayer","constructor","args","buildModels","_this","shape","getModelType","layerModel","initLayerModels","_shapeAttribute$scale","shapeAttribute","styleAttributeService","getLayerStyleAttribute","scale","field","getPointModelType","layerData","getEncodedData","shape2d","shape3d","getLayerConfig","iconMap","iconService","getIconMap","item","find","fe","hasOwnProperty","indexOf"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-layers/es/polygon/index.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport BaseLayer from \"../core/BaseLayer\";\nimport PolygonModels from \"./models/\";\nexport default class PolygonLayer extends BaseLayer {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"type\", 'PolygonLayer');\n    _defineProperty(this, \"enableShaderEncodeStyles\", ['opacity', 'extrusionBase',\n    // shape 为文本时\n    'rotation', 'offsets', 'stroke']);\n  }\n  buildModels() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const shape = _this.getModelType();\n      _this.layerModel = new PolygonModels[shape](_this);\n      yield _this.initLayerModels();\n    })();\n  }\n  getModelType() {\n    var _shapeAttribute$scale;\n    const shapeAttribute = this.styleAttributeService.getLayerStyleAttribute('shape');\n    const shape = shapeAttribute === null || shapeAttribute === void 0 || (_shapeAttribute$scale = shapeAttribute.scale) === null || _shapeAttribute$scale === void 0 ? void 0 : _shapeAttribute$scale.field;\n    if (shape === 'fill' || !shape) {\n      return 'fill';\n    } else if (shape === 'extrude') {\n      return 'extrude';\n    } else if (shape === 'extrusion') {\n      return 'extrusion';\n    } else if (shape === 'water') {\n      return 'water';\n    } else if (shape === 'ocean') {\n      return 'ocean';\n    } else if (shape === 'line') {\n      return 'line';\n    } else {\n      return this.getPointModelType();\n    }\n  }\n  getPointModelType() {\n    // pointlayer\n    //  2D、 3d、 shape、image、text、normal、\n    const layerData = this.getEncodedData();\n    const {\n      shape2d,\n      shape3d\n    } = this.getLayerConfig();\n    const iconMap = this.iconService.getIconMap();\n    const item = layerData.find(fe => {\n      return fe.hasOwnProperty('shape');\n    });\n    if (!item) {\n      return 'fill';\n    } else {\n      const shape = item.shape;\n      if (shape === 'dot') {\n        return 'point_normal';\n      }\n      if ((shape2d === null || shape2d === void 0 ? void 0 : shape2d.indexOf(shape)) !== -1) {\n        return 'point_fill';\n      }\n      if ((shape3d === null || shape3d === void 0 ? void 0 : shape3d.indexOf(shape)) !== -1) {\n        return 'point_extrude';\n      }\n      if (iconMap.hasOwnProperty(shape)) {\n        return 'point_image';\n      }\n      return 'text';\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}