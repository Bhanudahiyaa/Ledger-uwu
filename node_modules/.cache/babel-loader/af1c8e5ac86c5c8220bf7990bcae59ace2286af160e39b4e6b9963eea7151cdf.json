{"ast":null,"code":"import { uniqueId } from '@antv/util';\nimport { HeatmapLayer as Heatmap } from '@antv/l7';\nimport { PlotLayer } from '../../core/layer/plot-layer';\nimport { mappingLayer } from './adaptor';\nconst DEFAULT_OPTIONS = {\n  source: {\n    data: [],\n    parser: {\n      type: 'json',\n      x: 'x',\n      y: 'y'\n    }\n  },\n  shape: 'heatmap',\n  size: {\n    value: [0, 1]\n  },\n  style: {\n    intensity: 3,\n    radius: 20,\n    opacity: 1,\n    colorsRamp: [{\n      color: 'rgba(33,102,172,0.0)',\n      position: 0\n    }, {\n      color: 'rgb(103,169,207)',\n      position: 0.2\n    }, {\n      color: 'rgb(209,229,240)',\n      position: 0.4\n    }, {\n      color: 'rgb(253,219,199)',\n      position: 0.6\n    }, {\n      color: 'rgb(239,138,98)',\n      position: 0.8\n    }, {\n      color: 'rgb(178,24,43,1.0)',\n      position: 1\n    }]\n  }\n};\nconst LAYER_OPTIONS_KEYS = ['shape', 'color', 'size', 'style', 'state'];\nexport class HeatmapLayer extends PlotLayer {\n  constructor(options) {\n    super(options);\n    /**\n     * 图层类型\n     */\n    this.type = PlotLayer.LayerType.HeatmapLayer;\n    /**\n     * 图层是否具有交互属性\n     */\n    this.interaction = false;\n    const {\n      name,\n      source\n    } = this.options;\n    const config = this.pickLayerConfig(this.options);\n    this.name = name ? name : uniqueId(this.type);\n    this.layer = new Heatmap(Object.assign(Object.assign({}, config), {\n      name: this.name\n    }));\n    this.mappingLayer(this.layer, this.options);\n    this.setSource(source);\n  }\n  /**\n   * 获取默认配置\n   */\n  getDefaultOptions() {\n    return DEFAULT_OPTIONS;\n  }\n  mappingLayer(layer, options) {\n    mappingLayer(layer, options);\n  }\n  update(options) {\n    super.update(options);\n    this.mappingLayer(this.layer, this.options);\n  }\n}\n/**\n * 默认配置项\n */\nHeatmapLayer.DefaultOptions = DEFAULT_OPTIONS;\n/**\n * 图层配置项 Keys\n */\nHeatmapLayer.LayerOptionsKeys = PlotLayer.LayerConfigkeys.concat(LAYER_OPTIONS_KEYS);","map":{"version":3,"names":["uniqueId","HeatmapLayer","Heatmap","PlotLayer","mappingLayer","DEFAULT_OPTIONS","source","data","parser","type","x","y","shape","size","value","style","intensity","radius","opacity","colorsRamp","color","position","LAYER_OPTIONS_KEYS","constructor","options","LayerType","interaction","name","config","pickLayerConfig","layer","Object","assign","setSource","getDefaultOptions","update","DefaultOptions","LayerOptionsKeys","LayerConfigkeys","concat"],"sources":["../../../../src/layers/heatmap-layer/index.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,QAAQ,QAAQ,YAAY;AACrC,SAASC,YAAY,IAAIC,OAAO,QAAQ,UAAU;AAClD,SAASC,SAAS,QAAQ,6BAA6B;AACvD,SAASC,YAAY,QAAQ,WAAW;AAMxC,MAAMC,eAAe,GAAwB;EAC3CC,MAAM,EAAE;IACNC,IAAI,EAAE,EAAE;IACRC,MAAM,EAAE;MACNC,IAAI,EAAE,MAAM;MACZC,CAAC,EAAE,GAAG;MACNC,CAAC,EAAE;;GAEN;EACDC,KAAK,EAAE,SAAS;EAChBC,IAAI,EAAE;IACJC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC;GACb;EACDC,KAAK,EAAE;IACLC,SAAS,EAAE,CAAC;IACZC,MAAM,EAAE,EAAE;IACVC,OAAO,EAAE,CAAC;IACVC,UAAU,EAAE,CACV;MAAEC,KAAK,EAAE,sBAAsB;MAAEC,QAAQ,EAAE;IAAC,CAAE,EAC9C;MAAED,KAAK,EAAE,kBAAkB;MAAEC,QAAQ,EAAE;IAAG,CAAE,EAC5C;MAAED,KAAK,EAAE,kBAAkB;MAAEC,QAAQ,EAAE;IAAG,CAAE,EAC5C;MAAED,KAAK,EAAE,kBAAkB;MAAEC,QAAQ,EAAE;IAAG,CAAE,EAC5C;MAAED,KAAK,EAAE,iBAAiB;MAAEC,QAAQ,EAAE;IAAG,CAAE,EAC3C;MAAED,KAAK,EAAE,oBAAoB;MAAEC,QAAQ,EAAE;IAAC,CAAE;;CAGjD;AACD,MAAMC,kBAAkB,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC;AAEvE,OAAM,MAAOrB,YAAa,SAAQE,SAA8B;EA0B9DoB,YAAYC,OAA4B;IACtC,KAAK,CAACA,OAAO,CAAC;IAVhB;;;IAGO,KAAAf,IAAI,GAAGN,SAAS,CAACsB,SAAS,CAACxB,YAAY;IAC9C;;;IAGO,KAAAyB,WAAW,GAAG,KAAK;IAIxB,MAAM;MAAEC,IAAI;MAAErB;IAAM,CAAE,GAAG,IAAI,CAACkB,OAAO;IACrC,MAAMI,MAAM,GAAG,IAAI,CAACC,eAAe,CAAC,IAAI,CAACL,OAAO,CAAC;IAEjD,IAAI,CAACG,IAAI,GAAGA,IAAI,GAAGA,IAAI,GAAG3B,QAAQ,CAAC,IAAI,CAACS,IAAI,CAAC;IAC7C,IAAI,CAACqB,KAAK,GAAG,IAAI5B,OAAO,CAAA6B,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAMJ,MAAM;MAAED,IAAI,EAAE,IAAI,CAACA;IAAI,GAAG;IAExD,IAAI,CAACvB,YAAY,CAAC,IAAI,CAAC0B,KAAK,EAAE,IAAI,CAACN,OAAO,CAAC;IAC3C,IAAI,CAACS,SAAS,CAAC3B,MAAM,CAAC;EACxB;EAEA;;;EAGO4B,iBAAiBA,CAAA;IACtB,OAAO7B,eAAe;EACxB;EAEUD,YAAYA,CAAC0B,KAAa,EAAEN,OAA4B;IAChEpB,YAAY,CAAC0B,KAAK,EAAEN,OAAO,CAAC;EAC9B;EAEOW,MAAMA,CAACX,OAAqC;IACjD,KAAK,CAACW,MAAM,CAACX,OAAO,CAAC;IACrB,IAAI,CAACpB,YAAY,CAAC,IAAI,CAAC0B,KAAK,EAAE,IAAI,CAACN,OAAO,CAAC;EAC7C;;AAnDA;;;AAGOvB,YAAA,CAAAmC,cAAc,GAAG/B,eAAe;AACvC;;;AAGOJ,YAAA,CAAAoC,gBAAgB,GAAGlC,SAAS,CAACmC,eAAe,CAACC,MAAM,CAACjB,kBAAkB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}