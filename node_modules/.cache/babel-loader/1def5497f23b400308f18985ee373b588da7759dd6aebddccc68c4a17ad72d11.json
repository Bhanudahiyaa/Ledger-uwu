{"ast":null,"code":"import React from 'react';\nimport { useXFlowApp } from '@antv/xflow-core';\nimport { ToolbarConfig } from './config';\nimport { XFlowToolbar } from './render-components';\nexport const CanvasToolbar = props => {\n  const app = useXFlowApp();\n  const hasApp = !!app;\n  /** 获取ContextMenu的配置 */\n  const contextMenuConfig = React.useMemo(() => props.config ? props.config : new ToolbarConfig(), [props.config]);\n  if (!hasApp) {\n    return null;\n  }\n  return React.createElement(XFlowToolbar, Object.assign({}, props, {\n    config: contextMenuConfig\n  }));\n};\nexport const createToolbarConfig = addOptions => value => {\n  /** bridge config and value */\n  const proxy = React.useMemo(() => ({\n    getValue: () => ({})\n  }), []);\n  proxy.getValue = () => value;\n  /** 生成config */\n  const toolbarConfig = React.useMemo(() => {\n    const config = new ToolbarConfig();\n    addOptions(config, proxy);\n    return config;\n  }, [proxy]);\n  return toolbarConfig;\n};","map":{"version":3,"names":["React","useXFlowApp","ToolbarConfig","XFlowToolbar","CanvasToolbar","props","app","hasApp","contextMenuConfig","useMemo","config","createElement","Object","assign","createToolbarConfig","addOptions","value","proxy","getValue","toolbarConfig"],"sources":["../../src/canvas-toolbar/index.tsx"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,aAAa,QAAQ,UAAU;AACxC,SAASC,YAAY,QAAQ,qBAAqB;AAGlD,OAAO,MAAMC,aAAa,GAA4BC,KAAK,IAAG;EAC5D,MAAMC,GAAG,GAAGL,WAAW,EAAE;EACzB,MAAMM,MAAM,GAAG,CAAC,CAACD,GAAG;EACpB;EACA,MAAME,iBAAiB,GAAGR,KAAK,CAACS,OAAO,CACrC,MAAOJ,KAAK,CAACK,MAAM,GAAGL,KAAK,CAACK,MAAM,GAAG,IAAIR,aAAa,EAAG,EACzD,CAACG,KAAK,CAACK,MAAM,CAAC,CACf;EAED,IAAI,CAACH,MAAM,EAAE;IACX,OAAO,IAAI;;EAGb,OAAOP,KAAA,CAAAW,aAAA,CAACR,YAAY,EAAAS,MAAA,CAAAC,MAAA,KAAKR,KAAK;IAAEK,MAAM,EAAEF;EAAiB,GAAI;AAC/D,CAAC;AAOD,OAAO,MAAMM,mBAAmB,GACJC,UAAkE,IAC3FC,KAAS,IAAI;EACZ;EACA,MAAMC,KAAK,GAAGjB,KAAK,CAACS,OAAO,CAAC,OAAO;IAAES,QAAQ,EAAEA,CAAA,MAAO,EAAQ;EAAA,CAAE,CAAC,EAAE,EAAE,CAAC;EACtED,KAAK,CAACC,QAAQ,GAAG,MAAMF,KAAK;EAC5B;EACA,MAAMG,aAAa,GAAGnB,KAAK,CAACS,OAAO,CAAC,MAAK;IACvC,MAAMC,MAAM,GAAG,IAAIR,aAAa,EAAE;IAClCa,UAAU,CAACL,MAAM,EAAEO,KAAK,CAAC;IACzB,OAAOP,MAAM;EACf,CAAC,EAAE,CAACO,KAAK,CAAC,CAAC;EAEX,OAAOE,aAAa;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}