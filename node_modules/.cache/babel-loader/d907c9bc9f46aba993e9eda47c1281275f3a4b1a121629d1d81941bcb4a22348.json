{"ast":null,"code":"import { uniqueId } from '@antv/util';\nimport { PointLayer } from '@antv/l7';\nimport { PlotLayer } from '../../core/layer/plot-layer';\nimport { mappingLayer } from './adaptor';\nimport { getColorLegendItems } from './helper';\nconst DEFAULT_OPTIONS = {\n  source: {\n    data: [],\n    parser: {\n      type: 'json',\n      x: 'x',\n      y: 'y'\n    }\n  },\n  shape: 'circle',\n  size: 12,\n  color: '#5FD3A6'\n};\nconst LAYER_OPTIONS_KEYS = ['shape', 'color', 'size', 'style', 'state', 'animate'];\nexport class DotLayer extends PlotLayer {\n  constructor(options) {\n    super(options);\n    /**\n     * 图层类型\n     */\n    this.type = PlotLayer.LayerType.DotLayer;\n    /**\n     * 图层是否具有交互属性\n     */\n    this.interaction = true;\n    const {\n      name,\n      source\n    } = this.options;\n    const config = this.pickLayerConfig(this.options);\n    this.name = name ? name : uniqueId(this.type);\n    this.layer = new PointLayer(Object.assign(Object.assign({}, config), {\n      name: this.name\n    }));\n    this.mappingLayer(this.layer, this.options);\n    this.setSource(source);\n  }\n  /**\n   * 获取默认配置\n   */\n  getDefaultOptions() {\n    return DEFAULT_OPTIONS;\n  }\n  mappingLayer(layer, options) {\n    mappingLayer(layer, options);\n  }\n  update(options) {\n    super.update(options);\n    this.mappingLayer(this.layer, this.options);\n  }\n  getColorLegendItems() {\n    const colorLegendItems = this.layer.getLegendItems('color');\n    if (Array.isArray(colorLegendItems) && colorLegendItems.length !== 0) {\n      const items = getColorLegendItems(colorLegendItems);\n      return items;\n    }\n    return [];\n  }\n}\n/**\n * 默认配置项\n */\nDotLayer.DefaultOptions = DEFAULT_OPTIONS;\n/**\n * 图层配置项 Keys\n */\nDotLayer.LayerOptionsKeys = PlotLayer.LayerConfigkeys.concat(LAYER_OPTIONS_KEYS);","map":{"version":3,"names":["uniqueId","PointLayer","PlotLayer","mappingLayer","getColorLegendItems","DEFAULT_OPTIONS","source","data","parser","type","x","y","shape","size","color","LAYER_OPTIONS_KEYS","DotLayer","constructor","options","LayerType","interaction","name","config","pickLayerConfig","layer","Object","assign","setSource","getDefaultOptions","update","colorLegendItems","getLegendItems","Array","isArray","length","items","DefaultOptions","LayerOptionsKeys","LayerConfigkeys","concat"],"sources":["../../../../src/layers/dot-layer/index.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,QAAQ,QAAQ,YAAY;AACrC,SAASC,UAAU,QAAQ,UAAU;AACrC,SAASC,SAAS,QAAQ,6BAA6B;AACvD,SAASC,YAAY,QAAQ,WAAW;AAGxC,SAASC,mBAAmB,QAAQ,UAAU;AAI9C,MAAMC,eAAe,GAAG;EACtBC,MAAM,EAAE;IACNC,IAAI,EAAE,EAAE;IACRC,MAAM,EAAE;MACNC,IAAI,EAAE,MAAM;MACZC,CAAC,EAAE,GAAG;MACNC,CAAC,EAAE;;GAEN;EACDC,KAAK,EAAE,QAAQ;EACfC,IAAI,EAAE,EAAE;EACRC,KAAK,EAAE;CACR;AACD,MAAMC,kBAAkB,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,CAAC;AAElF,OAAM,MAAOC,QAAsD,SAAQd,SAAY;EA0BrFe,YAAYC,OAAU;IACpB,KAAK,CAACA,OAAO,CAAC;IAVhB;;;IAGO,KAAAT,IAAI,GAAGP,SAAS,CAACiB,SAAS,CAACH,QAAQ;IAC1C;;;IAGO,KAAAI,WAAW,GAAG,IAAI;IAIvB,MAAM;MAAEC,IAAI;MAAEf;IAAM,CAAE,GAAG,IAAI,CAACY,OAAO;IACrC,MAAMI,MAAM,GAAG,IAAI,CAACC,eAAe,CAAC,IAAI,CAACL,OAAO,CAAC;IAEjD,IAAI,CAACG,IAAI,GAAGA,IAAI,GAAGA,IAAI,GAAGrB,QAAQ,CAAC,IAAI,CAACS,IAAI,CAAC;IAC7C,IAAI,CAACe,KAAK,GAAG,IAAIvB,UAAU,CAAAwB,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAMJ,MAAM;MAAED,IAAI,EAAE,IAAI,CAACA;IAAI,GAAG;IAE3D,IAAI,CAAClB,YAAY,CAAC,IAAI,CAACqB,KAAK,EAAE,IAAI,CAACN,OAAO,CAAC;IAC3C,IAAI,CAACS,SAAS,CAACrB,MAAM,CAAC;EACxB;EAEA;;;EAGOsB,iBAAiBA,CAAA;IACtB,OAAOvB,eAAoB;EAC7B;EAEUF,YAAYA,CAACqB,KAAa,EAAEN,OAAU;IAC9Cf,YAAY,CAACqB,KAAK,EAAEN,OAAO,CAAC;EAC9B;EAEOW,MAAMA,CAACX,OAAmB;IAC/B,KAAK,CAACW,MAAM,CAACX,OAAO,CAAC;IAErB,IAAI,CAACf,YAAY,CAAC,IAAI,CAACqB,KAAK,EAAE,IAAI,CAACN,OAAO,CAAC;EAC7C;EAEOd,mBAAmBA,CAAA;IACxB,MAAM0B,gBAAgB,GAAG,IAAI,CAACN,KAAK,CAACO,cAAc,CAAC,OAAO,CAAC;IAC3D,IAAIC,KAAK,CAACC,OAAO,CAACH,gBAAgB,CAAC,IAAIA,gBAAgB,CAACI,MAAM,KAAK,CAAC,EAAE;MACpE,MAAMC,KAAK,GAAG/B,mBAAmB,CAAC0B,gBAAgB,CAAC;MACnD,OAAOK,KAAK;IACd;IAEA,OAAO,EAAE;EACX;;AA9DA;;;AAGOnB,QAAA,CAAAoB,cAAc,GAAG/B,eAAe;AACvC;;;AAGOW,QAAA,CAAAqB,gBAAgB,GAAGnC,SAAS,CAACoC,eAAe,CAACC,MAAM,CAACxB,kBAAkB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}