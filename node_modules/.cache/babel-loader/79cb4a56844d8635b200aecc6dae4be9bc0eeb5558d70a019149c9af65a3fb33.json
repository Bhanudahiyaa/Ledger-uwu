{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { IconStore, MODELS, XFlowGraphCommands } from '@antv/xflow-core';\nimport { ZoomInOutlined, ZoomOutOutlined, OneToOneOutlined, CompressOutlined, FullscreenOutlined, FullscreenExitOutlined } from '@ant-design/icons';\nimport { createToolbarConfig } from '../canvas-toolbar';\nexport var CANVAS_SCALE_TOOLBAR_CONFIG;\n(function (CANVAS_SCALE_TOOLBAR_CONFIG) {\n  IconStore.set('ZoomInOutlined', ZoomInOutlined);\n  IconStore.set('ZoomOutOutlined', ZoomOutOutlined);\n  IconStore.set('OneToOneOutlined', OneToOneOutlined);\n  IconStore.set('CompressOutlined', CompressOutlined);\n  IconStore.set('FullscreenOutlined', FullscreenOutlined);\n  IconStore.set('FullscreenExitOutlined', FullscreenExitOutlined);\n  CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-in';\n  CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT = XFlowGraphCommands.GRAPH_ZOOM.id + '-zoom-out';\n  CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-one';\n  CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT = XFlowGraphCommands.GRAPH_ZOOM.id + '-scale-to-fit';\n  CANVAS_SCALE_TOOLBAR_CONFIG.FULLSCREEN = XFlowGraphCommands.GRAPH_ZOOM.id + '-fullscreen';\n  CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE = 1.5;\n  CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE = 0.05;\n  CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions = {\n    maxScale: CANVAS_SCALE_TOOLBAR_CONFIG.MAX_SCALE,\n    minScale: CANVAS_SCALE_TOOLBAR_CONFIG.MIN_SCALE\n  };\n  CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig = ({\n    zoomFactor,\n    fullscreen\n  }) => {\n    return [{\n      name: 'main',\n      items: [{\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_IN,\n        tooltip: '放大',\n        iconName: 'ZoomInOutlined',\n        onClick: ({\n          commandService\n        }) => {\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 0.1,\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.ZOOM_OUT,\n        tooltip: '缩小',\n        iconName: 'ZoomOutOutlined',\n        onClick: ({\n          commandService\n        }) => {\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: -0.1,\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_ONE,\n        iconName: 'OneToOneOutlined',\n        tooltip: '缩放到1:1',\n        isEnabled: zoomFactor !== 1,\n        onClick: ({\n          commandService\n        }) => {\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 'real',\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.SCALE_TO_FIT,\n        tooltip: '缩放到适应屏幕',\n        iconName: 'CompressOutlined',\n        onClick: ({\n          commandService\n        }) => {\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_ZOOM.id, {\n            factor: 'fit',\n            zoomOptions: CANVAS_SCALE_TOOLBAR_CONFIG.zoomOptions\n          });\n        }\n      }, {\n        id: CANVAS_SCALE_TOOLBAR_CONFIG.FULLSCREEN,\n        tooltip: !fullscreen ? '全屏' : '退出全屏',\n        iconName: !fullscreen ? 'FullscreenOutlined' : 'FullscreenExitOutlined',\n        onClick: ({\n          commandService\n        }) => {\n          commandService.executeCommand(XFlowGraphCommands.GRAPH_FULLSCREEN.id, {});\n        }\n      }]\n    }];\n  };\n})(CANVAS_SCALE_TOOLBAR_CONFIG || (CANVAS_SCALE_TOOLBAR_CONFIG = {}));\nexport const TOOLBAR_TYPE = 'CANVAS_SCALE_TOOLBAR';\nexport const useConfig = createToolbarConfig(config => {\n  config.setToolbarModelService((model, modelService) => __awaiter(void 0, void 0, void 0, function* () {\n    const graphScale = yield MODELS.GRAPH_SCALE.useValue(modelService);\n    /** 设置初始值*/\n    model.setValue(m => {\n      m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig({\n        zoomFactor: graphScale.zoomFactor,\n        fullscreen: false\n      });\n    });\n    const graphFullscreenModel = yield MODELS.GRAPH_FULLSCREEN.getModel(modelService);\n    /** 初始化全屏默认值 */\n    graphFullscreenModel.setValue(false);\n    /** 全屏 */\n    graphFullscreenModel.watch(fullscreen => {\n      model.setValue(m => {\n        m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig({\n          zoomFactor: graphScale.zoomFactor,\n          fullscreen\n        });\n      });\n    });\n    const graphScaleModel = yield MODELS.GRAPH_SCALE.getModel(modelService);\n    /** graphScaleModel更新时联动 Toolbar*/\n    graphScaleModel.watch(({\n      zoomFactor\n    }) => __awaiter(void 0, void 0, void 0, function* () {\n      const fullscreen = yield MODELS.GRAPH_FULLSCREEN.useValue(modelService);\n      model.setValue(m => {\n        m.mainGroups = CANVAS_SCALE_TOOLBAR_CONFIG.getToolbarConfig({\n          zoomFactor,\n          fullscreen\n        });\n      });\n    }));\n  }));\n});","map":{"version":3,"names":["IconStore","MODELS","XFlowGraphCommands","ZoomInOutlined","ZoomOutOutlined","OneToOneOutlined","CompressOutlined","FullscreenOutlined","FullscreenExitOutlined","createToolbarConfig","CANVAS_SCALE_TOOLBAR_CONFIG","set","ZOOM_IN","GRAPH_ZOOM","id","ZOOM_OUT","SCALE_TO_ONE","SCALE_TO_FIT","FULLSCREEN","MAX_SCALE","MIN_SCALE","zoomOptions","maxScale","minScale","getToolbarConfig","zoomFactor","fullscreen","name","items","tooltip","iconName","onClick","commandService","executeCommand","factor","isEnabled","GRAPH_FULLSCREEN","TOOLBAR_TYPE","useConfig","config","setToolbarModelService","model","modelService","__awaiter","graphScale","GRAPH_SCALE","useValue","setValue","m","mainGroups","graphFullscreenModel","getModel","watch","graphScaleModel"],"sources":["../../src/canvas-scale-toolbar/config.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}