{"ast":null,"code":"import addEventListener from 'rc-util/lib/Dom/addEventListener';\nimport { requestAnimationFrame, cancelAnimationFrame } from './animationFrame';\nexport class MouseMoveTracker {\n  constructor(options) {\n    this.onMouseMove = e => {\n      const x = e.clientX;\n      const y = e.clientY;\n      this.deltaX += x - this.clientX;\n      this.deltaY += y - this.clientY;\n      if (this.animationFrameID == null) {\n        this.animationFrameID = requestAnimationFrame(this.triggerOnMouseMoveCallback);\n      }\n      this.clientX = x;\n      this.clientY = y;\n      e.preventDefault();\n    };\n    this.onMouseUp = () => {\n      if (this.animationFrameID) {\n        cancelAnimationFrame(this.animationFrameID);\n        this.triggerOnMouseMoveCallback();\n      }\n      this.triggerOnMouseMoveEndCallback(false);\n    };\n    this.triggerOnMouseMoveCallback = () => {\n      this.animationFrameID = null;\n      this.onMouseMoveCallback(this.deltaX, this.deltaY, {\n        clientX: this.clientX,\n        clientY: this.clientY\n      });\n      this.deltaX = 0;\n      this.deltaY = 0;\n    };\n    this.triggerOnMouseMoveEndCallback = cancel => {\n      this.onMouseMoveEndCallback(cancel);\n    };\n    this.elem = options.elem || document.documentElement;\n    this.onMouseMoveCallback = options.onMouseMove;\n    this.onMouseMoveEndCallback = options.onMouseMoveEnd;\n    this.animationFrameID = null;\n  }\n  capture(e) {\n    if (!this.captured) {\n      this.removeMouseMoveEvent = addEventListener(this.elem, 'mousemove', this.onMouseMove).remove;\n      this.removeMouseUpEvent = addEventListener(this.elem, 'mouseup', this.onMouseUp).remove;\n    }\n    this.captured = true;\n    if (!this.dragging) {\n      this.clientX = e.clientX;\n      this.clientY = e.clientY;\n      this.deltaX = 0;\n      this.deltaY = 0;\n      this.dragging = true;\n    }\n    e.preventDefault();\n  }\n  release() {\n    if (this.captured) {\n      if (this.removeMouseMoveEvent != null) {\n        this.removeMouseMoveEvent();\n        this.removeMouseMoveEvent = null;\n      }\n      if (this.removeMouseUpEvent != null) {\n        this.removeMouseUpEvent();\n        this.removeMouseUpEvent = null;\n      }\n    }\n    this.captured = false;\n    if (this.dragging) {\n      this.dragging = false;\n      this.clientX = 0;\n      this.clientY = 0;\n      this.deltaX = 0;\n      this.deltaY = 0;\n    }\n  }\n  isDragging() {\n    return this.dragging;\n  }\n}","map":{"version":3,"names":["addEventListener","requestAnimationFrame","cancelAnimationFrame","MouseMoveTracker","constructor","options","onMouseMove","e","x","clientX","y","clientY","deltaX","deltaY","animationFrameID","triggerOnMouseMoveCallback","preventDefault","onMouseUp","triggerOnMouseMoveEndCallback","onMouseMoveCallback","cancel","onMouseMoveEndCallback","elem","document","documentElement","onMouseMoveEnd","capture","captured","removeMouseMoveEvent","remove","removeMouseUpEvent","dragging","release","isDragging"],"sources":["../../../src/util/dom/MouseMoveTracker.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,gBAAgB,MAAM,kCAAkC;AAC/D,SAASC,qBAAqB,EAAEC,oBAAoB,QAAQ,kBAAkB;AAE9E,OAAM,MAAOC,gBAAgB;EA6B3BC,YAAYC,OAAiC;IA8D7C,KAAAC,WAAW,GAAIC,CAAa,IAAI;MAC9B,MAAMC,CAAC,GAAGD,CAAC,CAACE,OAAO;MACnB,MAAMC,CAAC,GAAGH,CAAC,CAACI,OAAO;MAEnB,IAAI,CAACC,MAAM,IAAIJ,CAAC,GAAG,IAAI,CAACC,OAAO;MAC/B,IAAI,CAACI,MAAM,IAAIH,CAAC,GAAG,IAAI,CAACC,OAAO;MAE/B,IAAI,IAAI,CAACG,gBAAgB,IAAI,IAAI,EAAE;QACjC,IAAI,CAACA,gBAAgB,GAAGb,qBAAqB,CAC3C,IAAI,CAACc,0BAA0B,CAChC;;MAGH,IAAI,CAACN,OAAO,GAAGD,CAAC;MAChB,IAAI,CAACG,OAAO,GAAGD,CAAC;MAEhBH,CAAC,CAACS,cAAc,EAAE;IACpB,CAAC;IAED,KAAAC,SAAS,GAAG,MAAK;MACf,IAAI,IAAI,CAACH,gBAAgB,EAAE;QACzBZ,oBAAoB,CAAC,IAAI,CAACY,gBAAgB,CAAC;QAC3C,IAAI,CAACC,0BAA0B,EAAE;;MAGnC,IAAI,CAACG,6BAA6B,CAAC,KAAK,CAAC;IAC3C,CAAC;IAED,KAAAH,0BAA0B,GAAG,MAAK;MAChC,IAAI,CAACD,gBAAgB,GAAG,IAAI;MAC5B,IAAI,CAACK,mBAAmB,CAAC,IAAI,CAACP,MAAM,EAAE,IAAI,CAACC,MAAM,EAAE;QACjDJ,OAAO,EAAE,IAAI,CAACA,OAAO;QACrBE,OAAO,EAAE,IAAI,CAACA;OACf,CAAC;MACF,IAAI,CAACC,MAAM,GAAG,CAAC;MACf,IAAI,CAACC,MAAM,GAAG,CAAC;IACjB,CAAC;IAED,KAAAK,6BAA6B,GAAIE,MAAe,IAAI;MAClD,IAAI,CAACC,sBAAsB,CAACD,MAAM,CAAC;IACrC,CAAC;IArGC,IAAI,CAACE,IAAI,GAAGjB,OAAO,CAACiB,IAAI,IAAIC,QAAQ,CAACC,eAAe;IACpD,IAAI,CAACL,mBAAmB,GAAGd,OAAO,CAACC,WAAW;IAC9C,IAAI,CAACe,sBAAsB,GAAGhB,OAAO,CAACoB,cAAc;IACpD,IAAI,CAACX,gBAAgB,GAAG,IAAI;EAC9B;EAEAY,OAAOA,CAACnB,CAAmB;IACzB,IAAI,CAAC,IAAI,CAACoB,QAAQ,EAAE;MAClB,IAAI,CAACC,oBAAoB,GAAG5B,gBAAgB,CAC1C,IAAI,CAACsB,IAAI,EACT,WAAW,EACX,IAAI,CAAChB,WAAW,CACjB,CAACuB,MAAM;MACR,IAAI,CAACC,kBAAkB,GAAG9B,gBAAgB,CACxC,IAAI,CAACsB,IAAI,EACT,SAAS,EACT,IAAI,CAACL,SAAS,CACf,CAACY,MAAM;;IAGV,IAAI,CAACF,QAAQ,GAAG,IAAI;IAEpB,IAAI,CAAC,IAAI,CAACI,QAAQ,EAAE;MAClB,IAAI,CAACtB,OAAO,GAAGF,CAAC,CAACE,OAAO;MACxB,IAAI,CAACE,OAAO,GAAGJ,CAAC,CAACI,OAAO;MACxB,IAAI,CAACC,MAAM,GAAG,CAAC;MACf,IAAI,CAACC,MAAM,GAAG,CAAC;MACf,IAAI,CAACkB,QAAQ,GAAG,IAAI;;IAGtBxB,CAAC,CAACS,cAAc,EAAE;EACpB;EAEAgB,OAAOA,CAAA;IACL,IAAI,IAAI,CAACL,QAAQ,EAAE;MACjB,IAAI,IAAI,CAACC,oBAAoB,IAAI,IAAI,EAAE;QACrC,IAAI,CAACA,oBAAoB,EAAE;QAC3B,IAAI,CAACA,oBAAoB,GAAG,IAAI;;MAGlC,IAAI,IAAI,CAACE,kBAAkB,IAAI,IAAI,EAAE;QACnC,IAAI,CAACA,kBAAkB,EAAE;QACzB,IAAI,CAACA,kBAAkB,GAAG,IAAI;;;IAIlC,IAAI,CAACH,QAAQ,GAAG,KAAK;IAErB,IAAI,IAAI,CAACI,QAAQ,EAAE;MACjB,IAAI,CAACA,QAAQ,GAAG,KAAK;MACrB,IAAI,CAACtB,OAAO,GAAG,CAAC;MAChB,IAAI,CAACE,OAAO,GAAG,CAAC;MAChB,IAAI,CAACC,MAAM,GAAG,CAAC;MACf,IAAI,CAACC,MAAM,GAAG,CAAC;;EAEnB;EAEAoB,UAAUA,CAAA;IACR,OAAO,IAAI,CAACF,QAAQ;EACtB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}