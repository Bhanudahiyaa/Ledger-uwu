{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Deferred } from '../common/deferred';\nimport { Disposable } from '../common/disposable';\nexport var NsModelServiceConfig;\n(function (NsModelServiceConfig) {\n  NsModelServiceConfig.CONFIG_TYPE = 'MODEL_SERVICE_CONFIG';\n})(NsModelServiceConfig || (NsModelServiceConfig = {}));\nconst disposableNoop = () => Disposable.create(() => {});\nexport class ModelServiceConfig {\n  constructor() {\n    /** CONFIG_TYPE */\n    this.CONFIG_TYPE = NsModelServiceConfig.CONFIG_TYPE;\n    /** 外部注册context的方法 */\n    this.registerModelFn = disposableNoop;\n    /** CONFIG_TYPE */\n    this.isMounted = new Deferred();\n    this.registerModel = registerModel => {\n      this.registerModelFn = registerModel;\n    };\n    this.setMountState = () => {\n      this.isMounted.resolve(true);\n    };\n    this.getConfig = () => __awaiter(this, void 0, void 0, function* () {\n      yield this.isMounted.promise;\n      return {\n        CONFIG_TYPE: this.CONFIG_TYPE,\n        modelRegisterFunc: this.registerModelFn || disposableNoop\n      };\n    });\n    this.dispose = () => {\n      this.registerModelFn = disposableNoop;\n      this.isMounted = new Deferred();\n    };\n  }\n}","map":{"version":3,"names":["Deferred","Disposable","NsModelServiceConfig","CONFIG_TYPE","disposableNoop","create","ModelServiceConfig","constructor","registerModelFn","isMounted","registerModel","setMountState","resolve","getConfig","__awaiter","promise","modelRegisterFunc","dispose"],"sources":["../../src/model-service/config.ts"],"sourcesContent":[null],"mappings":";AAAA,SAASA,QAAQ,QAAQ,oBAAoB;AAC7C,SAASC,UAAU,QAAQ,sBAAsB;AAIjD,OAAM,IAAWC,oBAAoB;AAArC,WAAiBA,oBAAoB;EACtBA,oBAAA,CAAAC,WAAW,GAAG,sBAAsB;AACnD,CAAC,EAFgBD,oBAAoB,KAApBA,oBAAoB;AAIrC,MAAME,cAAc,GAAGA,CAAA,KAAMH,UAAU,CAACI,MAAM,CAAC,MAAK,CAAE,CAAC,CAAC;AAExD,OAAM,MAAOC,kBAAkB;EAA/BC,YAAA;IACE;IACS,KAAAJ,WAAW,GAAGD,oBAAoB,CAACC,WAAW;IAEvD;IACQ,KAAAK,eAAe,GAA4BJ,cAAc;IAEjE;IACQ,KAAAK,SAAS,GAAG,IAAIT,QAAQ,EAAW;IAE3C,KAAAU,aAAa,GAAIA,aAAqC,IAAI;MACxD,IAAI,CAACF,eAAe,GAAGE,aAAa;IACtC,CAAC;IAED,KAAAC,aAAa,GAAG,MAAK;MACnB,IAAI,CAACF,SAAS,CAACG,OAAO,CAAC,IAAI,CAAC;IAC9B,CAAC;IAED,KAAAC,SAAS,GAAG,MAAWC,SAAA;MACrB,MAAM,IAAI,CAACL,SAAS,CAACM,OAAO;MAC5B,OAAO;QACLZ,WAAW,EAAE,IAAI,CAACA,WAAW;QAC7Ba,iBAAiB,EAAE,IAAI,CAACR,eAAe,IAAIJ;OAC5C;IACH,CAAC;IAED,KAAAa,OAAO,GAAG,MAAK;MACb,IAAI,CAACT,eAAe,GAAGJ,cAAc;MACrC,IAAI,CAACK,SAAS,GAAG,IAAIT,QAAQ,EAAE;IACjC,CAAC;EACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}