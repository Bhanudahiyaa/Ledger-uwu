{"ast":null,"code":"import React from 'react';\nimport { useExtensionRegistry } from '../../xflow-main/components/extension-context';\nimport { createModule } from '../module';\nimport { CommandConfig } from '../config';\nexport const CommandsRegistry = props => {\n  /** 生成配置中心 */\n  const extensionRegistry = useExtensionRegistry();\n  /** 获取ContextMenu的配置 */\n  const config = React.useMemo(() => props.config ? props.config : new CommandConfig(), /* eslint-disable-next-line  */\n  []);\n  React.useEffect(() => {\n    extensionRegistry.addCoreModule({\n      config: config,\n      createModule\n    });\n    /* eslint-disable-next-line  */\n  }, []);\n  return null;\n};\nexport const createCmdConfig = addOptions => value => {\n  /** bridge config and value */\n  const valueContainer = React.useMemo(() => ({\n    getValue: () => ({})\n  }), []);\n  valueContainer.getValue = () => value;\n  const hookConfig = React.useMemo(() => {\n    const config = new CommandConfig();\n    addOptions(config, valueContainer);\n    return config;\n  }, [valueContainer]);\n  return hookConfig;\n};","map":{"version":3,"names":["React","useExtensionRegistry","createModule","CommandConfig","CommandsRegistry","props","extensionRegistry","config","useMemo","useEffect","addCoreModule","createCmdConfig","addOptions","value","valueContainer","getValue","hookConfig"],"sources":["../../../src/command-contributions/components/index.tsx"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,oBAAoB,QAAQ,+CAA+C;AACpF,SAASC,YAAY,QAAQ,WAAW;AACxC,SAASC,aAAa,QAAQ,WAAW;AAMzC,OAAO,MAAMC,gBAAgB,GAAqBC,KAAK,IAAG;EACxD;EACA,MAAMC,iBAAiB,GAAGL,oBAAoB,EAAE;EAEhD;EACA,MAAMM,MAAM,GAAGP,KAAK,CAACQ,OAAO,CAC1B,MAAOH,KAAK,CAACE,MAAM,GAAGF,KAAK,CAACE,MAAM,GAAG,IAAIJ,aAAa,EAAG,EACzD;EACA,EAAE,CACH;EAEDH,KAAK,CAACS,SAAS,CAAC,MAAK;IACnBH,iBAAiB,CAACI,aAAa,CAAC;MAC9BH,MAAM,EAAEA,MAAM;MACdL;KACD,CAAC;IACF;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO,IAAI;AACb,CAAC;AAOD,OAAO,MAAMS,eAAe,GAExBC,UAAsE,IAEvEC,KAAS,IAAI;EACZ;EACA,MAAMC,cAAc,GAAGd,KAAK,CAACQ,OAAO,CAAC,OAAO;IAAEO,QAAQ,EAAEA,CAAA,MAAO,EAAQ;EAAA,CAAE,CAAC,EAAE,EAAE,CAAC;EAC/ED,cAAc,CAACC,QAAQ,GAAG,MAAMF,KAAK;EAErC,MAAMG,UAAU,GAAGhB,KAAK,CAACQ,OAAO,CAAC,MAAK;IACpC,MAAMD,MAAM,GAAG,IAAIJ,aAAa,EAAE;IAClCS,UAAU,CAACL,MAAM,EAAEO,cAAc,CAAC;IAClC,OAAOP,MAAM;EACf,CAAC,EAAE,CAACO,cAAc,CAAC,CAAC;EAEpB,OAAOE,UAAU;AACnB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}