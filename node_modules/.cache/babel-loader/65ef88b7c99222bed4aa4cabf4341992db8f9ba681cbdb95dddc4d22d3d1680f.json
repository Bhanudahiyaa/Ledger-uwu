{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Deferred } from '../common/deferred';\nimport { Disposable } from '../common/disposable';\nexport var NsContext;\n(function (NsContext) {\n  NsContext.CONFIG_TYPE = 'CONTEXT_CONFIG';\n})(NsContext || (NsContext = {}));\nconst noop = () => Disposable.create(() => {});\nexport class KeybindingConfig {\n  constructor() {\n    /** CONFIG_TYPE */\n    this.CONFIG_TYPE = NsContext.CONFIG_TYPE;\n    /** 外部注册context的方法 */\n    this.keybindingFunc = noop;\n    /** 是否已加载 */\n    this.isMounted = new Deferred();\n    this.setKeybindingFunc = fn => {\n      this.keybindingFunc = fn;\n    };\n    this.setMountState = () => {\n      this.isMounted.resolve(true);\n    };\n    this.getConfig = () => __awaiter(this, void 0, void 0, function* () {\n      yield this.isMounted.promise;\n      return {\n        CONFIG_TYPE: this.CONFIG_TYPE,\n        registerKeybindingFunc: this.keybindingFunc\n      };\n    });\n    this.dispose = () => {\n      this.keybindingFunc = noop;\n      this.isMounted = new Deferred();\n    };\n  }\n}","map":{"version":3,"names":["Deferred","Disposable","NsContext","CONFIG_TYPE","noop","create","KeybindingConfig","constructor","keybindingFunc","isMounted","setKeybindingFunc","fn","setMountState","resolve","getConfig","__awaiter","promise","registerKeybindingFunc","dispose"],"sources":["../../src/keybinding/config.ts"],"sourcesContent":[null],"mappings":";AAAA,SAASA,QAAQ,QAAQ,oBAAoB;AAG7C,SAASC,UAAU,QAAQ,sBAAsB;AACjD,OAAM,IAAWC,SAAS;AAA1B,WAAiBA,SAAS;EACXA,SAAA,CAAAC,WAAW,GAAG,gBAAgB;AAK7C,CAAC,EANgBD,SAAS,KAATA,SAAS;AAQ1B,MAAME,IAAI,GAAGA,CAAA,KAAMH,UAAU,CAACI,MAAM,CAAC,MAAK,CAAE,CAAC,CAAC;AAC9C,OAAM,MAAOC,gBAAgB;EAA7BC,YAAA;IACE;IACS,KAAAJ,WAAW,GAAGD,SAAS,CAACC,WAAW;IAC5C;IACQ,KAAAK,cAAc,GAAgCJ,IAAI;IAC1D;IACQ,KAAAK,SAAS,GAAG,IAAIT,QAAQ,EAAW;IAE3C,KAAAU,iBAAiB,GAAIC,EAA+B,IAAI;MACtD,IAAI,CAACH,cAAc,GAAGG,EAAE;IAC1B,CAAC;IAED,KAAAC,aAAa,GAAG,MAAK;MACnB,IAAI,CAACH,SAAS,CAACI,OAAO,CAAC,IAAI,CAAC;IAC9B,CAAC;IAED,KAAAC,SAAS,GAAG,MAAWC,SAAA;MACrB,MAAM,IAAI,CAACN,SAAS,CAACO,OAAO;MAC5B,OAAO;QACLb,WAAW,EAAE,IAAI,CAACA,WAAW;QAC7Bc,sBAAsB,EAAE,IAAI,CAACT;OAC9B;IACH,CAAC;IAED,KAAAU,OAAO,GAAG,MAAK;MACb,IAAI,CAACV,cAAc,GAAGJ,IAAI;MAC1B,IAAI,CAACK,SAAS,GAAG,IAAIT,QAAQ,EAAE;IACjC,CAAC;EACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}