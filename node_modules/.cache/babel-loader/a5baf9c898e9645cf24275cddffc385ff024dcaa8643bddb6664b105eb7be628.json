{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport { Dom, Vector } from '../../util';\nimport { View } from '../../view/view';\nimport { Point, Angle } from '../../geometry';\nexport class Handle {\n  get handleClassName() {\n    return ClassNames.handle;\n  }\n  get pie() {\n    return Object.assign(Object.assign({}, Handle.defaultPieOptions), this.handleOptions.pie);\n  }\n  initHandles() {\n    this.handles = [];\n    if (this.handleOptions.handles) {\n      this.handleOptions.handles.forEach(handle => this.addHandle(handle));\n    }\n    if (this.handleOptions.type === 'pie') {\n      if (this.pie.toggles) {\n        const className = ClassNames.pieToggle;\n        this.$pieToggles = {};\n        this.pie.toggles.forEach(item => {\n          const $elem = this.$('<div/>');\n          this.applyAttrs($elem, item.attrs);\n          $elem.addClass(className).addClass(`${className}-pos-${item.position || 'e'}`).attr('data-name', item.name).appendTo(this.container);\n          this.$pieToggles[item.name] = $elem;\n        });\n      }\n      this.setPieIcons();\n    }\n    if (this.$handleContainer) {\n      const type = this.handleOptions.type || 'surround';\n      this.$handleContainer.addClass(ClassNames.wrap).addClass(ClassNames.animate).addClass(`${ClassNames.handle}-${type}`);\n    }\n    this.delegateEvents({\n      [`mousedown .${ClassNames.handle}`]: 'onHandleMouseDown',\n      [`touchstart .${ClassNames.handle}`]: 'onHandleMouseDown',\n      [`mousedown .${ClassNames.pieToggle}`]: 'onPieToggleMouseDown',\n      [`touchstart .${ClassNames.pieToggle}`]: 'onPieToggleMouseDown'\n    });\n  }\n  onHandleMouseDown(evt) {\n    const action = this.$(evt.currentTarget).closest(`.${ClassNames.handle}`).attr('data-action');\n    if (action) {\n      evt.preventDefault();\n      evt.stopPropagation();\n      this.setEventData(evt, {\n        action,\n        clientX: evt.clientX,\n        clientY: evt.clientY,\n        startX: evt.clientX,\n        startY: evt.clientY\n      });\n      if (evt.type === 'mousedown' && evt.button === 2) {\n        this.triggerHandleAction(action, 'contextmenu', evt);\n      } else {\n        this.triggerHandleAction(action, 'mousedown', evt);\n        this.delegateDocumentEvents({\n          mousemove: 'onHandleMouseMove',\n          touchmove: 'onHandleMouseMove',\n          mouseup: 'onHandleMouseUp',\n          touchend: 'onHandleMouseUp',\n          touchcancel: 'onHandleMouseUp'\n        }, evt.data);\n      }\n    }\n  }\n  onHandleMouseMove(evt) {\n    const data = this.getEventData(evt);\n    const action = data.action;\n    if (action) {\n      this.triggerHandleAction(action, 'mousemove', evt);\n    }\n  }\n  onHandleMouseUp(evt) {\n    const data = this.getEventData(evt);\n    const action = data.action;\n    if (action) {\n      this.triggerHandleAction(action, 'mouseup', evt);\n      this.undelegateDocumentEvents();\n    }\n  }\n  triggerHandleAction(action, eventName, evt, args) {\n    evt.preventDefault();\n    evt.stopPropagation();\n    const e = this.normalizeEvent(evt);\n    const data = this.getEventData(e);\n    const local = this.graph.snapToGrid(e.clientX, e.clientY);\n    const origin = this.graph.snapToGrid(data.clientX, data.clientY);\n    const dx = local.x - origin.x;\n    const dy = local.y - origin.y;\n    this.trigger(`action:${action}:${eventName}`, Object.assign({\n      e,\n      dx,\n      dy,\n      x: local.x,\n      y: local.y,\n      offsetX: evt.clientX - data.startX,\n      offsetY: evt.clientY - data.startY\n    }, args));\n    data.clientX = evt.clientX;\n    data.clientY = evt.clientY;\n  }\n  onPieToggleMouseDown(evt) {\n    evt.stopPropagation();\n    const name = this.$(evt.target).closest(`.${ClassNames.pieToggle}`).attr('data-name');\n    if (!this.isOpen(name)) {\n      if (this.isOpen()) {\n        this.toggleState();\n      }\n    }\n    this.toggleState(name);\n  }\n  setPieIcons() {\n    if (this.handleOptions.type === 'pie') {\n      this.$handleContainer.find(`.${ClassNames.handle}`).each((_, elem) => {\n        const $elem = this.$(elem);\n        const action = $elem.attr('data-action');\n        const className = ClassNames.pieSlice;\n        const handle = this.getHandle(action);\n        if (!handle || !handle.icon) {\n          const contect = window.getComputedStyle(elem, ':before').getPropertyValue('content');\n          if (contect && contect !== 'none') {\n            const $icons = $elem.find(`.${className}-txt`);\n            if ($icons.length) {\n              Vector.create($icons[0]).text(contect.replace(/['\"]/g, ''));\n            }\n          }\n          const bgImg = $elem.css('background-image');\n          if (bgImg) {\n            const matches = bgImg.match(/url\\(['\"]?([^'\"]+)['\"]?\\)/);\n            if (matches) {\n              const href = matches[1];\n              const $imgs = $elem.find(`.${className}-img`);\n              if ($imgs.length > 0) {\n                Vector.create($imgs[0]).attr('xlink:href', href);\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n  getHandleIdx(name) {\n    return this.handles.findIndex(item => item.name === name);\n  }\n  hasHandle(name) {\n    return this.getHandleIdx(name) >= 0;\n  }\n  getHandle(name) {\n    return this.handles.find(item => item.name === name);\n  }\n  renderHandle(handle) {\n    const $handle = this.$('<div/>').addClass(`${ClassNames.handle} ${ClassNames.handle}-${handle.name}`).attr('data-action', handle.name).prop('draggable', false);\n    if (this.handleOptions.type === 'pie') {\n      const index = this.getHandleIdx(handle.name);\n      const pie = this.pie;\n      const outerRadius = pie.outerRadius;\n      const innerRadius = pie.innerRadius;\n      const offset = (outerRadius + innerRadius) / 2;\n      const ratio = new Point(outerRadius, outerRadius);\n      const delta = Angle.toRad(pie.sliceAngle);\n      const curRad = index * delta + Angle.toRad(pie.startAngle);\n      const nextRad = curRad + delta;\n      const pathData = Dom.createSlicePathData(innerRadius, outerRadius, curRad, nextRad);\n      const vSvg = Vector.create('svg').addClass(`${ClassNames.pieSlice}-svg`);\n      const vPath = Vector.create('path').addClass(ClassNames.pieSlice).attr('d', pathData).translate(outerRadius, outerRadius);\n      const pos = Point.fromPolar(offset, -curRad - delta / 2, ratio).toJSON();\n      const iconSize = pie.iconSize;\n      const vImg = Vector.create('image').attr(pos).addClass(`${ClassNames.pieSlice}-img`);\n      pos.y = pos.y + iconSize - 2;\n      const vText = Vector.create('text', {\n        'font-size': iconSize\n      }).attr(pos).addClass(`${ClassNames.pieSlice}-txt`);\n      vImg.attr({\n        width: iconSize,\n        height: iconSize\n      });\n      vImg.translate(-iconSize / 2, -iconSize / 2);\n      vText.translate(-iconSize / 2, -iconSize / 2);\n      vSvg.append([vPath, vImg, vText]);\n      $handle.append(vSvg.node);\n    } else {\n      $handle.addClass(`${ClassNames.handle}-pos-${handle.position}`);\n      if (handle.content) {\n        if (typeof handle.content === 'string') {\n          $handle.html(handle.content);\n        } else {\n          $handle.append(handle.content);\n        }\n      }\n    }\n    this.updateHandleIcon($handle, handle.icon);\n    this.applyAttrs($handle, handle.attrs);\n    return $handle;\n  }\n  addHandle(handle) {\n    if (!this.hasHandle(handle.name)) {\n      this.handles.push(handle);\n      const events = handle.events;\n      if (events) {\n        Object.keys(events).forEach(action => {\n          const callback = events[action];\n          const name = `action:${handle.name}:${action}`;\n          if (typeof callback === 'string') {\n            this.on(name, this[callback], this);\n          } else {\n            this.on(name, callback);\n          }\n        });\n      }\n      if (this.$handleContainer) {\n        this.$handleContainer.append(this.renderHandle(handle));\n      }\n    }\n    return this;\n  }\n  addHandles(handles) {\n    handles.forEach(handle => this.addHandle(handle));\n    return this;\n  }\n  removeHandles() {\n    while (this.handles.length) {\n      this.removeHandle(this.handles[0].name);\n    }\n    return this;\n  }\n  removeHandle(name) {\n    const index = this.getHandleIdx(name);\n    const handle = this.handles[index];\n    if (handle) {\n      if (handle.events) {\n        Object.keys(handle.events).forEach(event => {\n          this.off(`action:${name}:${event}`);\n        });\n      }\n      this.getHandleElem(name).remove();\n      this.handles.splice(index, 1);\n    }\n    return this;\n  }\n  changeHandle(name, newHandle) {\n    const handle = this.getHandle(name);\n    if (handle) {\n      this.removeHandle(name);\n      this.addHandle(Object.assign(Object.assign({}, handle), newHandle));\n    }\n    return this;\n  }\n  toggleHandle(name, selected) {\n    const handle = this.getHandle(name);\n    if (handle) {\n      const $handle = this.getHandleElem(name);\n      const className = `${ClassNames.handle}-selected`;\n      if (selected === undefined) {\n        selected = !$handle.hasClass(className); // eslint-disable-line\n      }\n      $handle.toggleClass(className, selected);\n      const icon = selected ? handle.iconSelected : handle.icon;\n      if (icon) {\n        this.updateHandleIcon($handle, icon);\n      }\n    }\n    return this;\n  }\n  selectHandle(name) {\n    return this.toggleHandle(name, true);\n  }\n  deselectHandle(name) {\n    return this.toggleHandle(name, false);\n  }\n  deselectAllHandles() {\n    this.handles.forEach(handle => this.deselectHandle(handle.name));\n    return this;\n  }\n  getHandleElem(name) {\n    return this.$handleContainer.find(`.${ClassNames.handle}-${name}`);\n  }\n  updateHandleIcon($handle, icon) {\n    if (this.handleOptions.type === 'pie') {\n      const $icons = $handle.find(`.${ClassNames.pieSliceImg}`);\n      this.$($icons[0]).attr('xlink:href', icon || '');\n    } else {\n      $handle.css('background-image', icon ? `url(${icon})` : '');\n    }\n  }\n  isRendered() {\n    return this.$handleContainer != null;\n  }\n  isOpen(name) {\n    if (this.isRendered()) {\n      return name ? this.$pieToggles[name].hasClass(ClassNames.pieToggleOpened) : this.$handleContainer.hasClass(`${ClassNames.pieOpended}`);\n    }\n    return false;\n  }\n  toggleState(name) {\n    if (this.isRendered()) {\n      const $handleContainer = this.$handleContainer;\n      Object.keys(this.$pieToggles).forEach(key => {\n        const $toggle = this.$pieToggles[key];\n        $toggle.removeClass(ClassNames.pieToggleOpened);\n      });\n      if (this.isOpen()) {\n        this.trigger('pie:close', {\n          name\n        });\n        $handleContainer.removeClass(ClassNames.pieOpended);\n      } else {\n        this.trigger('pie:open', {\n          name\n        });\n        if (name) {\n          const toggles = this.pie.toggles;\n          const toggle = toggles && toggles.find(i => i.name === name);\n          if (toggle) {\n            $handleContainer.attr({\n              'data-pie-toggle-name': toggle.name,\n              'data-pie-toggle-position': toggle.position\n            });\n          }\n          this.$pieToggles[name].addClass(ClassNames.pieToggleOpened);\n        }\n        $handleContainer.addClass(ClassNames.pieOpended);\n      }\n    }\n  }\n  applyAttrs(elem, attrs) {\n    if (attrs) {\n      const $elem = View.$(elem);\n      Object.keys(attrs).forEach(selector => {\n        const $element = $elem.find(selector).addBack().filter(selector);\n        const _a = attrs[selector],\n          {\n            class: cls\n          } = _a,\n          attr = __rest(_a, [\"class\"]);\n        if (cls) {\n          $element.addClass(cls);\n        }\n        $element.attr(attr);\n      });\n    }\n  }\n}\n(function (Handle) {\n  Handle.defaultPieOptions = {\n    innerRadius: 20,\n    outerRadius: 50,\n    sliceAngle: 45,\n    startAngle: 0,\n    iconSize: 14,\n    toggles: [{\n      name: 'default',\n      position: 'e'\n    }]\n  };\n})(Handle || (Handle = {}));\nvar ClassNames;\n(function (ClassNames) {\n  ClassNames.handle = View.prototype.prefixClassName('widget-handle');\n  ClassNames.wrap = `${ClassNames.handle}-wrap`;\n  ClassNames.animate = `${ClassNames.handle}-animate`;\n  ClassNames.pieOpended = `${ClassNames.handle}-pie-opened`;\n  ClassNames.pieToggle = `${ClassNames.handle}-pie-toggle`;\n  ClassNames.pieToggleOpened = `${ClassNames.handle}-pie-toggle-opened`;\n  ClassNames.pieSlice = `${ClassNames.handle}-pie-slice`;\n  ClassNames.pieSliceImg = `${ClassNames.handle}-pie-slice-img`;\n})(ClassNames || (ClassNames = {}));","map":{"version":3,"names":["Dom","Vector","View","Point","Angle","Handle","handleClassName","ClassNames","handle","pie","Object","assign","defaultPieOptions","handleOptions","initHandles","handles","forEach","addHandle","type","toggles","className","pieToggle","$pieToggles","item","$elem","$","applyAttrs","attrs","addClass","position","attr","name","appendTo","container","setPieIcons","$handleContainer","wrap","animate","delegateEvents","onHandleMouseDown","evt","action","currentTarget","closest","preventDefault","stopPropagation","setEventData","clientX","clientY","startX","startY","button","triggerHandleAction","delegateDocumentEvents","mousemove","touchmove","mouseup","touchend","touchcancel","data","onHandleMouseMove","getEventData","onHandleMouseUp","undelegateDocumentEvents","eventName","args","e","normalizeEvent","local","graph","snapToGrid","origin","dx","x","dy","y","trigger","offsetX","offsetY","onPieToggleMouseDown","target","isOpen","toggleState","find","each","_","elem","pieSlice","getHandle","icon","contect","window","getComputedStyle","getPropertyValue","$icons","length","create","text","replace","bgImg","css","matches","match","href","$imgs","getHandleIdx","findIndex","hasHandle","renderHandle","$handle","prop","index","outerRadius","innerRadius","offset","ratio","delta","toRad","sliceAngle","curRad","startAngle","nextRad","pathData","createSlicePathData","vSvg","vPath","translate","pos","fromPolar","toJSON","iconSize","vImg","vText","width","height","append","node","content","html","updateHandleIcon","push","events","keys","callback","on","addHandles","removeHandles","removeHandle","event","off","getHandleElem","remove","splice","changeHandle","newHandle","toggleHandle","selected","undefined","hasClass","toggleClass","iconSelected","selectHandle","deselectHandle","deselectAllHandles","pieSliceImg","isRendered","pieToggleOpened","pieOpended","key","$toggle","removeClass","toggle","i","selector","$element","addBack","filter","_a","class","cls","__rest","prototype","prefixClassName"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/x6/src/addon/common/handle.ts"],"sourcesContent":["import { Dom, Vector } from '../../util'\nimport { View } from '../../view/view'\nimport { Graph } from '../../graph/graph'\nimport { Point, Angle } from '../../geometry'\n\nexport class Handle {\n  public readonly graph: Graph\n  protected readonly handleOptions: Handle.Options\n  protected handles: Handle.Metadata[]\n  protected $handleContainer: JQuery<HTMLElement>\n  protected $pieToggles: { [name: string]: JQuery<HTMLElement> }\n\n  protected get handleClassName() {\n    return ClassNames.handle\n  }\n\n  protected get pie() {\n    return {\n      ...Handle.defaultPieOptions,\n      ...this.handleOptions.pie,\n    }\n  }\n\n  protected initHandles(this: Handle & View) {\n    this.handles = []\n\n    if (this.handleOptions.handles) {\n      this.handleOptions.handles.forEach((handle) => this.addHandle(handle))\n    }\n\n    if (this.handleOptions.type === 'pie') {\n      if (this.pie.toggles) {\n        const className = ClassNames.pieToggle\n        this.$pieToggles = {}\n        this.pie.toggles.forEach((item) => {\n          const $elem = this.$('<div/>')\n          this.applyAttrs($elem, item.attrs)\n          $elem\n            .addClass(className)\n            .addClass(`${className}-pos-${item.position || 'e'}`)\n            .attr('data-name', item.name)\n            .appendTo(this.container)\n          this.$pieToggles[item.name] = $elem\n        })\n      }\n\n      this.setPieIcons()\n    }\n\n    if (this.$handleContainer) {\n      const type = this.handleOptions.type || 'surround'\n      this.$handleContainer\n        .addClass(ClassNames.wrap)\n        .addClass(ClassNames.animate)\n        .addClass(`${ClassNames.handle}-${type}`)\n    }\n\n    this.delegateEvents({\n      [`mousedown .${ClassNames.handle}`]: 'onHandleMouseDown',\n      [`touchstart .${ClassNames.handle}`]: 'onHandleMouseDown',\n      [`mousedown .${ClassNames.pieToggle}`]: 'onPieToggleMouseDown',\n      [`touchstart .${ClassNames.pieToggle}`]: 'onPieToggleMouseDown',\n    })\n  }\n\n  protected onHandleMouseDown(this: Handle & View, evt: JQuery.MouseDownEvent) {\n    const action = this.$(evt.currentTarget)\n      .closest(`.${ClassNames.handle}`)\n      .attr('data-action')\n\n    if (action) {\n      evt.preventDefault()\n      evt.stopPropagation()\n      this.setEventData<Handle.EventData>(evt, {\n        action,\n        clientX: evt.clientX,\n        clientY: evt.clientY,\n        startX: evt.clientX,\n        startY: evt.clientY,\n      })\n\n      if (evt.type === 'mousedown' && evt.button === 2) {\n        this.triggerHandleAction(action, 'contextmenu', evt)\n      } else {\n        this.triggerHandleAction(action, 'mousedown', evt)\n        this.delegateDocumentEvents(\n          {\n            mousemove: 'onHandleMouseMove',\n            touchmove: 'onHandleMouseMove',\n            mouseup: 'onHandleMouseUp',\n            touchend: 'onHandleMouseUp',\n            touchcancel: 'onHandleMouseUp',\n          },\n          evt.data,\n        )\n      }\n    }\n  }\n\n  protected onHandleMouseMove(this: Handle & View, evt: JQuery.MouseMoveEvent) {\n    const data = this.getEventData<Handle.EventData>(evt)\n    const action = data.action\n    if (action) {\n      this.triggerHandleAction(action, 'mousemove', evt)\n    }\n  }\n\n  protected onHandleMouseUp(this: Handle & View, evt: JQuery.MouseUpEvent) {\n    const data = this.getEventData<Handle.EventData>(evt)\n    const action = data.action\n    if (action) {\n      this.triggerHandleAction(action, 'mouseup', evt)\n      this.undelegateDocumentEvents()\n    }\n  }\n\n  protected triggerHandleAction(\n    this: Handle & View,\n    action: string,\n    eventName: string,\n    evt: JQuery.TriggeredEvent,\n    args?: any,\n  ) {\n    evt.preventDefault()\n    evt.stopPropagation()\n\n    const e = this.normalizeEvent(evt)\n    const data = this.getEventData<Handle.EventData>(e)\n    const local = this.graph.snapToGrid(e.clientX!, e.clientY!)\n    const origin = this.graph.snapToGrid(data.clientX, data.clientY)\n    const dx = local.x - origin.x\n    const dy = local.y - origin.y\n\n    this.trigger(`action:${action}:${eventName}`, {\n      e,\n      dx,\n      dy,\n      x: local.x,\n      y: local.y,\n      offsetX: evt.clientX! - data.startX,\n      offsetY: evt.clientY! - data.startY,\n      ...args,\n    })\n\n    data.clientX = evt.clientX!\n    data.clientY = evt.clientY!\n  }\n\n  protected onPieToggleMouseDown(\n    this: Handle & View,\n    evt: JQuery.MouseDownEvent,\n  ) {\n    evt.stopPropagation()\n    const name = this.$(evt.target)\n      .closest(`.${ClassNames.pieToggle}`)\n      .attr('data-name')\n    if (!this.isOpen(name)) {\n      if (this.isOpen()) {\n        this.toggleState()\n      }\n    }\n    this.toggleState(name)\n  }\n\n  protected setPieIcons(this: Handle & View) {\n    if (this.handleOptions.type === 'pie') {\n      this.$handleContainer.find(`.${ClassNames.handle}`).each((_, elem) => {\n        const $elem = this.$(elem)\n        const action = $elem.attr('data-action')!\n        const className = ClassNames.pieSlice\n        const handle = this.getHandle(action)\n\n        if (!handle || !handle.icon) {\n          const contect = window\n            .getComputedStyle(elem, ':before')\n            .getPropertyValue('content')\n          if (contect && contect !== 'none') {\n            const $icons = $elem.find<any>(`.${className}-txt`)\n            if ($icons.length) {\n              Vector.create($icons[0]).text(contect.replace(/['\"]/g, ''))\n            }\n          }\n\n          const bgImg = $elem.css('background-image')\n          if (bgImg) {\n            const matches = bgImg.match(/url\\(['\"]?([^'\"]+)['\"]?\\)/)\n            if (matches) {\n              const href = matches[1]\n              const $imgs = $elem.find<any>(`.${className}-img`)\n              if ($imgs.length > 0) {\n                Vector.create($imgs[0]).attr('xlink:href', href)\n              }\n            }\n          }\n        }\n      })\n    }\n  }\n\n  getHandleIdx(name: string) {\n    return this.handles.findIndex((item) => item.name === name)\n  }\n\n  hasHandle(name: string) {\n    return this.getHandleIdx(name) >= 0\n  }\n\n  getHandle(name: string) {\n    return this.handles.find((item) => item.name === name)\n  }\n\n  renderHandle(this: Handle & View, handle: Handle.Metadata) {\n    const $handle = this.$('<div/>')\n      .addClass(`${ClassNames.handle} ${ClassNames.handle}-${handle.name}`)\n      .attr('data-action', handle.name)\n      .prop('draggable', false)\n\n    if (this.handleOptions.type === 'pie') {\n      const index = this.getHandleIdx(handle.name)\n      const pie = this.pie\n      const outerRadius = pie.outerRadius\n      const innerRadius = pie.innerRadius\n      const offset = (outerRadius + innerRadius) / 2\n      const ratio = new Point(outerRadius, outerRadius)\n      const delta = Angle.toRad(pie.sliceAngle)\n      const curRad = index * delta + Angle.toRad(pie.startAngle)\n      const nextRad = curRad + delta\n      const pathData = Dom.createSlicePathData(\n        innerRadius,\n        outerRadius,\n        curRad,\n        nextRad,\n      )\n\n      const vSvg = Vector.create('svg').addClass(`${ClassNames.pieSlice}-svg`)\n      const vPath = Vector.create('path')\n        .addClass(ClassNames.pieSlice)\n        .attr('d', pathData)\n        .translate(outerRadius, outerRadius)\n      const pos = Point.fromPolar(offset, -curRad - delta / 2, ratio).toJSON()\n      const iconSize = pie.iconSize\n      const vImg = Vector.create('image')\n        .attr(pos)\n        .addClass(`${ClassNames.pieSlice}-img`)\n      pos.y = pos.y + iconSize - 2\n      const vText = Vector.create('text', { 'font-size': iconSize })\n        .attr(pos)\n        .addClass(`${ClassNames.pieSlice}-txt`)\n\n      vImg.attr({\n        width: iconSize,\n        height: iconSize,\n      })\n      vImg.translate(-iconSize / 2, -iconSize / 2)\n      vText.translate(-iconSize / 2, -iconSize / 2)\n      vSvg.append([vPath, vImg, vText])\n      $handle.append(vSvg.node)\n    } else {\n      $handle.addClass(`${ClassNames.handle}-pos-${handle.position}`)\n      if (handle.content) {\n        if (typeof handle.content === 'string') {\n          $handle.html(handle.content)\n        } else {\n          $handle.append(handle.content)\n        }\n      }\n    }\n\n    this.updateHandleIcon($handle, handle.icon)\n    this.applyAttrs($handle, handle.attrs)\n\n    return $handle\n  }\n\n  addHandle(this: Handle & View, handle: Handle.Metadata) {\n    if (!this.hasHandle(handle.name)) {\n      this.handles.push(handle)\n\n      const events = handle.events\n      if (events) {\n        Object.keys(events).forEach((action) => {\n          const callback = events[action]\n          const name = `action:${handle.name}:${action}` as any\n          if (typeof callback === 'string') {\n            this.on(name, (this as any)[callback], this)\n          } else {\n            this.on(name, callback)\n          }\n        })\n      }\n\n      if (this.$handleContainer) {\n        this.$handleContainer.append(this.renderHandle(handle))\n      }\n    }\n\n    return this\n  }\n\n  addHandles(this: Handle & View, handles: Handle.Metadata[]) {\n    handles.forEach((handle) => this.addHandle(handle))\n    return this\n  }\n\n  removeHandles(this: Handle & View) {\n    while (this.handles.length) {\n      this.removeHandle(this.handles[0].name)\n    }\n    return this\n  }\n\n  removeHandle(this: Handle & View, name: string) {\n    const index = this.getHandleIdx(name)\n    const handle = this.handles[index]\n    if (handle) {\n      if (handle.events) {\n        Object.keys(handle.events).forEach((event) => {\n          this.off(`action:${name}:${event}` as any)\n        })\n      }\n      this.getHandleElem(name).remove()\n      this.handles.splice(index, 1)\n    }\n    return this\n  }\n\n  changeHandle(\n    this: Handle & View,\n    name: string,\n    newHandle: Partial<Handle.Metadata>,\n  ) {\n    const handle = this.getHandle(name)\n    if (handle) {\n      this.removeHandle(name)\n      this.addHandle({\n        ...handle,\n        ...newHandle,\n      })\n    }\n    return this\n  }\n\n  toggleHandle(this: Handle & View, name: string, selected?: boolean) {\n    const handle = this.getHandle(name)\n    if (handle) {\n      const $handle = this.getHandleElem(name)\n      const className = `${ClassNames.handle}-selected`\n      if (selected === undefined) {\n        selected = !$handle.hasClass(className) // eslint-disable-line\n      }\n\n      $handle.toggleClass(className, selected)\n      const icon = selected ? handle.iconSelected : handle.icon\n      if (icon) {\n        this.updateHandleIcon($handle, icon)\n      }\n    }\n    return this\n  }\n\n  selectHandle(this: Handle & View, name: string) {\n    return this.toggleHandle(name, true)\n  }\n\n  deselectHandle(this: Handle & View, name: string) {\n    return this.toggleHandle(name, false)\n  }\n\n  deselectAllHandles(this: Handle & View) {\n    this.handles.forEach((handle) => this.deselectHandle(handle.name))\n    return this\n  }\n\n  protected getHandleElem(name: string) {\n    return this.$handleContainer.find<HTMLElement>(\n      `.${ClassNames.handle}-${name}`,\n    )\n  }\n\n  protected updateHandleIcon(\n    this: Handle & View,\n    $handle: JQuery<HTMLElement>,\n    icon?: string | null,\n  ) {\n    if (this.handleOptions.type === 'pie') {\n      const $icons = $handle.find(`.${ClassNames.pieSliceImg}`)\n      this.$($icons[0]).attr('xlink:href', icon || '')\n    } else {\n      $handle.css('background-image', icon ? `url(${icon})` : '')\n    }\n  }\n\n  protected isRendered() {\n    return this.$handleContainer != null\n  }\n\n  protected isOpen(name?: string) {\n    if (this.isRendered()) {\n      return name\n        ? this.$pieToggles[name].hasClass(ClassNames.pieToggleOpened)\n        : this.$handleContainer.hasClass(`${ClassNames.pieOpended}`)\n    }\n    return false\n  }\n\n  protected toggleState(this: Handle & View, name?: string) {\n    if (this.isRendered()) {\n      const $handleContainer = this.$handleContainer\n\n      Object.keys(this.$pieToggles).forEach((key) => {\n        const $toggle = this.$pieToggles[key]\n        $toggle.removeClass(ClassNames.pieToggleOpened)\n      })\n\n      if (this.isOpen()) {\n        this.trigger('pie:close', { name })\n        $handleContainer.removeClass(ClassNames.pieOpended)\n      } else {\n        this.trigger('pie:open', { name })\n        if (name) {\n          const toggles = this.pie.toggles\n          const toggle = toggles && toggles.find((i) => i.name === name)\n          if (toggle) {\n            $handleContainer.attr({\n              'data-pie-toggle-name': toggle.name,\n              'data-pie-toggle-position': toggle.position,\n            })\n          }\n          this.$pieToggles[name].addClass(ClassNames.pieToggleOpened)\n        }\n        $handleContainer.addClass(ClassNames.pieOpended)\n      }\n    }\n  }\n\n  protected applyAttrs(\n    elem: HTMLElement | JQuery,\n    attrs?: { [selector: string]: JQuery.PlainObject },\n  ) {\n    if (attrs) {\n      const $elem = View.$(elem)\n      Object.keys(attrs).forEach((selector) => {\n        const $element = $elem.find(selector).addBack().filter(selector)\n        const { class: cls, ...attr } = attrs[selector]\n        if (cls) {\n          $element.addClass(cls)\n        }\n        $element.attr(attr)\n      })\n    }\n  }\n}\n\nexport namespace Handle {\n  export type Type = 'surround' | 'pie' | 'toolbar'\n  export type OrthPosition = 'e' | 'w' | 's' | 'n'\n  export type Position = OrthPosition | 'se' | 'sw' | 'ne' | 'nw'\n\n  export interface Metadata {\n    /**\n     * The name of the custom tool. This name will be also set as a\n     * CSS class to the handle DOM element making it easy to select\n     * it your CSS stylesheet.\n     */\n    name: string\n    position: Position\n    /**\n     * The icon url used to render the tool. This icons is set as a\n     * background image on the tool handle DOM element.\n     */\n    icon?: string | null\n    iconSelected?: string | null\n    content?: string | Element\n    events?: { [event: string]: string | ((args: EventArgs) => void) }\n    attrs?: { [selector: string]: JQuery.PlainObject }\n  }\n\n  export interface Pie {\n    innerRadius: number\n    outerRadius: number\n    sliceAngle: number\n    startAngle: number\n    iconSize: number\n    toggles: {\n      name: string\n      position: OrthPosition\n      attrs?: { [selector: string]: JQuery.PlainObject }\n    }[]\n  }\n\n  export interface Options {\n    type?: Type\n    pie?: Partial<Pie>\n    handles?: Metadata[] | null\n    tinyThreshold?: number\n    smallThreshold?: number\n  }\n\n  export const defaultPieOptions: Pie = {\n    innerRadius: 20,\n    outerRadius: 50,\n    sliceAngle: 45,\n    startAngle: 0,\n    iconSize: 14,\n    toggles: [\n      {\n        name: 'default',\n        position: 'e',\n      },\n    ],\n  }\n\n  export interface EventArgs {\n    e: JQuery.TriggeredEvent\n    x: number\n    y: number\n    dx: number\n    dy: number\n    offsetX: number\n    offsetY: number\n  }\n\n  export interface EventData {\n    action: string\n    clientX: number\n    clientY: number\n    startX: number\n    startY: number\n  }\n}\n\nnamespace ClassNames {\n  export const handle = View.prototype.prefixClassName('widget-handle')\n  export const wrap = `${handle}-wrap`\n  export const animate = `${handle}-animate`\n  export const pieOpended = `${handle}-pie-opened`\n  export const pieToggle = `${handle}-pie-toggle`\n  export const pieToggleOpened = `${handle}-pie-toggle-opened`\n  export const pieSlice = `${handle}-pie-slice`\n  export const pieSliceImg = `${handle}-pie-slice-img`\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}