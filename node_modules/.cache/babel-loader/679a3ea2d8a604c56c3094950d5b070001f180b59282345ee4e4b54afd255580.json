{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { guid } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nexport default class DebugService extends EventEmitter {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"renderMap\", new Map());\n    _defineProperty(this, \"enable\", false);\n    _defineProperty(this, \"renderEnable\", false);\n    _defineProperty(this, \"cacheLogs\", {});\n  }\n  setEnable(flag) {\n    this.enable = !!flag;\n  }\n  log(key, values) {\n    if (!this.enable) {\n      return;\n    }\n    const keys = key.split('.'); // [12, init, layerInitStart]\n    let parent = null;\n    keys.forEach((k, i) => {\n      if (parent !== null) {\n        if (!parent[k]) {\n          parent[k] = {};\n        }\n        if (i !== keys.length - 1) {\n          parent = parent[k];\n        }\n      } else {\n        if (!this.cacheLogs[k]) {\n          this.cacheLogs[k] = {};\n        }\n        if (i !== keys.length - 1) {\n          parent = this.cacheLogs[k];\n        }\n      }\n      if (i === keys.length - 1) {\n        parent[k] = _objectSpread(_objectSpread({\n          time: Date.now()\n        }, parent[k]), values);\n      }\n    });\n  }\n  getLog(key) {\n    switch (typeof key) {\n      case 'string':\n        return this.cacheLogs[key];\n      case 'object':\n        return key.map(k => this.cacheLogs[k]).filter(o => o !== undefined);\n      case 'undefined':\n        return this.cacheLogs;\n    }\n  }\n\n  /**\n   * 删除日志\n   * @param key\n   */\n  removeLog(key) {\n    delete this.cacheLogs[key];\n  }\n  generateRenderUid() {\n    if (this.renderEnable) {\n      return guid();\n    } else {\n      return '';\n    }\n  }\n  renderDebug(enable) {\n    this.renderEnable = enable;\n  }\n  renderStart(id) {\n    if (!this.renderEnable || !this.enable) {\n      return;\n    }\n    const cacheRenderInfo = this.renderMap.get(id) || {};\n    this.renderMap.set(id, _objectSpread(_objectSpread({}, cacheRenderInfo), {}, {\n      renderUid: id,\n      renderStart: Date.now()\n    }));\n  }\n  renderEnd(id) {\n    if (!this.renderEnable || !this.enable) {\n      return;\n    }\n    const cacheRenderInfo = this.renderMap.get(id);\n    if (cacheRenderInfo) {\n      const renderStart = cacheRenderInfo.renderStart;\n      const renderEnd = Date.now();\n      this.emit('renderEnd', _objectSpread(_objectSpread({}, cacheRenderInfo), {}, {\n        renderEnd,\n        renderDuration: renderEnd - renderStart\n      }));\n      this.renderMap.delete(id);\n    }\n  }\n  destroy() {\n    this.cacheLogs = null;\n    this.renderMap.clear();\n  }\n}","map":{"version":3,"names":["_objectSpread","_defineProperty","guid","EventEmitter","DebugService","constructor","args","Map","setEnable","flag","enable","log","key","values","keys","split","parent","forEach","k","i","length","cacheLogs","time","Date","now","getLog","map","filter","o","undefined","removeLog","generateRenderUid","renderEnable","renderDebug","renderStart","id","cacheRenderInfo","renderMap","get","set","renderUid","renderEnd","emit","renderDuration","delete","destroy","clear"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-core/es/services/debug/DebugService.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { guid } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nexport default class DebugService extends EventEmitter {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"renderMap\", new Map());\n    _defineProperty(this, \"enable\", false);\n    _defineProperty(this, \"renderEnable\", false);\n    _defineProperty(this, \"cacheLogs\", {});\n  }\n  setEnable(flag) {\n    this.enable = !!flag;\n  }\n  log(key, values) {\n    if (!this.enable) {\n      return;\n    }\n    const keys = key.split('.'); // [12, init, layerInitStart]\n    let parent = null;\n    keys.forEach((k, i) => {\n      if (parent !== null) {\n        if (!parent[k]) {\n          parent[k] = {};\n        }\n        if (i !== keys.length - 1) {\n          parent = parent[k];\n        }\n      } else {\n        if (!this.cacheLogs[k]) {\n          this.cacheLogs[k] = {};\n        }\n        if (i !== keys.length - 1) {\n          parent = this.cacheLogs[k];\n        }\n      }\n      if (i === keys.length - 1) {\n        parent[k] = _objectSpread(_objectSpread({\n          time: Date.now()\n        }, parent[k]), values);\n      }\n    });\n  }\n  getLog(key) {\n    switch (typeof key) {\n      case 'string':\n        return this.cacheLogs[key];\n      case 'object':\n        return key.map(k => this.cacheLogs[k]).filter(o => o !== undefined);\n      case 'undefined':\n        return this.cacheLogs;\n    }\n  }\n\n  /**\n   * 删除日志\n   * @param key\n   */\n  removeLog(key) {\n    delete this.cacheLogs[key];\n  }\n  generateRenderUid() {\n    if (this.renderEnable) {\n      return guid();\n    } else {\n      return '';\n    }\n  }\n  renderDebug(enable) {\n    this.renderEnable = enable;\n  }\n  renderStart(id) {\n    if (!this.renderEnable || !this.enable) {\n      return;\n    }\n    const cacheRenderInfo = this.renderMap.get(id) || {};\n    this.renderMap.set(id, _objectSpread(_objectSpread({}, cacheRenderInfo), {}, {\n      renderUid: id,\n      renderStart: Date.now()\n    }));\n  }\n  renderEnd(id) {\n    if (!this.renderEnable || !this.enable) {\n      return;\n    }\n    const cacheRenderInfo = this.renderMap.get(id);\n    if (cacheRenderInfo) {\n      const renderStart = cacheRenderInfo.renderStart;\n      const renderEnd = Date.now();\n      this.emit('renderEnd', _objectSpread(_objectSpread({}, cacheRenderInfo), {}, {\n        renderEnd,\n        renderDuration: renderEnd - renderStart\n      }));\n      this.renderMap.delete(id);\n    }\n  }\n  destroy() {\n    this.cacheLogs = null;\n    this.renderMap.clear();\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}