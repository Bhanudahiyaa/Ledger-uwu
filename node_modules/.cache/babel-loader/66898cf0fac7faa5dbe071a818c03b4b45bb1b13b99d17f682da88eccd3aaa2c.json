{"ast":null,"code":"import React from 'react';\nimport { useXFlowApp, XFlowAppExtensionModule } from '@antv/xflow-core';\nimport { ContextMenuConfig } from './config';\nimport { createModule } from './module';\nimport { ContextMenuRender } from './components';\nexport const CONFIG_TYPE = 'CanvasContextMenu';\nexport const CanvasContextMenu = props => {\n  const xflow = useXFlowApp();\n  const canRender = !!xflow;\n  /** 获取ContextMenu的配置 */\n  const contextMenuConfig = React.useMemo(() => props.config ? props.config : new ContextMenuConfig(), [props.config]);\n  return React.createElement(XFlowAppExtensionModule, {\n    createModule: createModule,\n    config: contextMenuConfig\n  }, canRender && React.createElement(ContextMenuRender, {\n    config: contextMenuConfig\n  }));\n};\nexport const createCtxMenuConfig = addOptions => props => {\n  /** bridge config and props */\n  const proxy = React.useMemo(() => ({\n    getValue: () => ({})\n  }), []);\n  proxy.getValue = () => props;\n  const toolbarConfig = React.useMemo(() => {\n    const config = new ContextMenuConfig();\n    addOptions(config, proxy);\n    return config;\n  }, [proxy]);\n  return toolbarConfig;\n};","map":{"version":3,"names":["React","useXFlowApp","XFlowAppExtensionModule","ContextMenuConfig","createModule","ContextMenuRender","CONFIG_TYPE","CanvasContextMenu","props","xflow","canRender","contextMenuConfig","useMemo","config","createElement","createCtxMenuConfig","addOptions","proxy","getValue","toolbarConfig"],"sources":["../../src/canvas-context-menu/index.tsx"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,uBAAuB,QAAQ,kBAAkB;AACvE,SAASC,iBAAiB,QAAQ,UAAU;AAC5C,SAASC,YAAY,QAAQ,UAAU;AACvC,SAASC,iBAAiB,QAAQ,cAAc;AAEhD,OAAO,MAAMC,WAAW,GAAG,mBAAmB;AAQ9C,OAAO,MAAMC,iBAAiB,GAAqBC,KAAK,IAAG;EACzD,MAAMC,KAAK,GAAGR,WAAW,EAAE;EAC3B,MAAMS,SAAS,GAAG,CAAC,CAACD,KAAK;EACzB;EACA,MAAME,iBAAiB,GAAGX,KAAK,CAACY,OAAO,CACrC,MAAOJ,KAAK,CAACK,MAAM,GAAGL,KAAK,CAACK,MAAM,GAAG,IAAIV,iBAAiB,EAAG,EAC7D,CAACK,KAAK,CAACK,MAAM,CAAC,CACf;EAED,OACEb,KAAA,CAAAc,aAAA,CAACZ,uBAAuB;IACtBE,YAAY,EAAEA,YAAY;IAC1BS,MAAM,EAAEF;EAAiB,GAExBD,SAAS,IAAIV,KAAA,CAAAc,aAAA,CAACT,iBAAiB;IAACQ,MAAM,EAAEF;EAAiB,EAAI,CACtC;AAE9B,CAAC;AAED,OAAO,MAAMI,mBAAmB,GAC9BC,UAA6E,IACzER,KAAS,IAAI;EACjB;EACA,MAAMS,KAAK,GAAGjB,KAAK,CAACY,OAAO,CAAC,OAAO;IAAEM,QAAQ,EAAEA,CAAA,MAAO,EAAQ;EAAA,CAAE,CAAC,EAAE,EAAE,CAAC;EACtED,KAAK,CAACC,QAAQ,GAAG,MAAMV,KAAK;EAE5B,MAAMW,aAAa,GAAGnB,KAAK,CAACY,OAAO,CAAC,MAAK;IACvC,MAAMC,MAAM,GAAG,IAAIV,iBAAiB,EAAE;IACtCa,UAAU,CAACH,MAAM,EAAEI,KAAK,CAAC;IACzB,OAAOJ,MAAM;EACf,CAAC,EAAE,CAACI,KAAK,CAAC,CAAC;EAEX,OAAOE,aAAa;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}