{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { lodashUtil } from '@antv/l7-utils';\nconst {\n  isNil\n} = lodashUtil;\nexport default class StyleAttribute {\n  constructor(options) {\n    _defineProperty(this, \"name\", void 0);\n    _defineProperty(this, \"type\", void 0);\n    _defineProperty(this, \"scale\", void 0);\n    _defineProperty(this, \"descriptor\", void 0);\n    _defineProperty(this, \"featureBufferLayout\", []);\n    _defineProperty(this, \"needRescale\", false);\n    _defineProperty(this, \"needRemapping\", false);\n    _defineProperty(this, \"needRegenerateVertices\", false);\n    _defineProperty(this, \"featureRange\", {\n      startIndex: 0,\n      endIndex: Infinity\n    });\n    _defineProperty(this, \"vertexAttribute\", void 0);\n    _defineProperty(this, \"defaultCallback\", params => {\n      // 没有 params 的情况，是指没有指定 fields，直接返回配置的 values 常量\n      if (params.length === 0) {\n        var _this$scale;\n        return ((_this$scale = this.scale) === null || _this$scale === void 0 ? void 0 : _this$scale.defaultValues) || [];\n      }\n      return params.map((param, idx) => {\n        var _this$scale2;\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const scaleFunc = (_this$scale2 = this.scale) === null || _this$scale2 === void 0 ? void 0 : _this$scale2.scalers[idx].func;\n        // @ts-ignore // TODO 支持双变量映射\n        const value = scaleFunc(param);\n        return value;\n      });\n    });\n    this.setProps(options);\n  }\n  setProps(options) {\n    Object.assign(this, options);\n  }\n  mapping(params) {\n    var _this$scale3;\n    /**\n     * 当用户设置的 callback 返回 null 时, 应该返回默认 callback 中的值\n     */\n    if ((_this$scale3 = this.scale) !== null && _this$scale3 !== void 0 && _this$scale3.callback) {\n      var _this$scale4;\n      // 使用用户返回的值处理\n      const ret = (_this$scale4 = this.scale) === null || _this$scale4 === void 0 ? void 0 : _this$scale4.callback(...params);\n      if (!isNil(ret)) {\n        return [ret];\n      }\n    }\n\n    // 没有 callback 或者用户 callback 返回值为空，则使用默认的逻辑处理\n    return this.defaultCallback(params);\n  }\n  resetDescriptor() {\n    if (this.descriptor) {\n      this.descriptor.buffer.data = [];\n    }\n  }\n}","map":{"version":3,"names":["_defineProperty","lodashUtil","isNil","StyleAttribute","constructor","options","startIndex","endIndex","Infinity","params","length","_this$scale","scale","defaultValues","map","param","idx","_this$scale2","scaleFunc","scalers","func","value","setProps","Object","assign","mapping","_this$scale3","callback","_this$scale4","ret","defaultCallback","resetDescriptor","descriptor","buffer","data"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-core/es/services/layer/StyleAttribute.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { lodashUtil } from '@antv/l7-utils';\nconst {\n  isNil\n} = lodashUtil;\nexport default class StyleAttribute {\n  constructor(options) {\n    _defineProperty(this, \"name\", void 0);\n    _defineProperty(this, \"type\", void 0);\n    _defineProperty(this, \"scale\", void 0);\n    _defineProperty(this, \"descriptor\", void 0);\n    _defineProperty(this, \"featureBufferLayout\", []);\n    _defineProperty(this, \"needRescale\", false);\n    _defineProperty(this, \"needRemapping\", false);\n    _defineProperty(this, \"needRegenerateVertices\", false);\n    _defineProperty(this, \"featureRange\", {\n      startIndex: 0,\n      endIndex: Infinity\n    });\n    _defineProperty(this, \"vertexAttribute\", void 0);\n    _defineProperty(this, \"defaultCallback\", params => {\n      // 没有 params 的情况，是指没有指定 fields，直接返回配置的 values 常量\n      if (params.length === 0) {\n        var _this$scale;\n        return ((_this$scale = this.scale) === null || _this$scale === void 0 ? void 0 : _this$scale.defaultValues) || [];\n      }\n      return params.map((param, idx) => {\n        var _this$scale2;\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const scaleFunc = (_this$scale2 = this.scale) === null || _this$scale2 === void 0 ? void 0 : _this$scale2.scalers[idx].func;\n        // @ts-ignore // TODO 支持双变量映射\n        const value = scaleFunc(param);\n        return value;\n      });\n    });\n    this.setProps(options);\n  }\n  setProps(options) {\n    Object.assign(this, options);\n  }\n  mapping(params) {\n    var _this$scale3;\n    /**\n     * 当用户设置的 callback 返回 null 时, 应该返回默认 callback 中的值\n     */\n    if ((_this$scale3 = this.scale) !== null && _this$scale3 !== void 0 && _this$scale3.callback) {\n      var _this$scale4;\n      // 使用用户返回的值处理\n      const ret = (_this$scale4 = this.scale) === null || _this$scale4 === void 0 ? void 0 : _this$scale4.callback(...params);\n      if (!isNil(ret)) {\n        return [ret];\n      }\n    }\n\n    // 没有 callback 或者用户 callback 返回值为空，则使用默认的逻辑处理\n    return this.defaultCallback(params);\n  }\n  resetDescriptor() {\n    if (this.descriptor) {\n      this.descriptor.buffer.data = [];\n    }\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}