{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = value => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = value => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = x => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/utils/tile/getRasterTile.ts\nimport { getImage, getURLFromTemplate, getWMTSURLFromTemplate } from \"@antv/l7-utils\";\nimport { getRasterFile } from \"./getRasterData\";\nimport { getTileUrl } from \"./request\";\nvar getTileBuffer = (url, tileParams, tile, cfg) => __async(void 0, null, function* () {\n  const {\n    format = defaultFormat,\n    operation,\n    requestParameters = {}\n  } = cfg;\n  const reqParams = __spreadProps(__spreadValues({}, requestParameters), {\n    url: getTileUrl(url, tileParams)\n    // getTileUrl 将原始的 url 路径进行转化（多服务器）\n  });\n  return new Promise((resolve, reject) => {\n    getRasterFile(tile, reqParams, (err, img) => {\n      if (err) {\n        reject(err);\n      } else if (img) {\n        resolve(img);\n      }\n    }, format, operation);\n  });\n});\nvar getTileImage = (url, tileParams, tile, cfg) => __async(void 0, null, function* () {\n  let imageUrl;\n  const templateUrl = Array.isArray(url) ? url[0] : url;\n  if (cfg.wmtsOptions) {\n    const getWMTSURLFromTemplateNew = (cfg == null ? void 0 : cfg.getURLFromTemplate) || getWMTSURLFromTemplate;\n    imageUrl = getWMTSURLFromTemplateNew(templateUrl, __spreadValues(__spreadValues({}, tileParams), cfg.wmtsOptions));\n  } else {\n    const getURLFromTemplateNew = (cfg == null ? void 0 : cfg.getURLFromTemplate) || getURLFromTemplate;\n    imageUrl = getURLFromTemplateNew(templateUrl, tileParams);\n  }\n  return new Promise((resolve, reject) => {\n    var _a;\n    const xhr = getImage(__spreadProps(__spreadValues({}, cfg == null ? void 0 : cfg.requestParameters), {\n      url: imageUrl,\n      type: ((_a = cfg == null ? void 0 : cfg.requestParameters) == null ? void 0 : _a.type) || \"arrayBuffer\"\n    }), (err, img) => {\n      if (err) {\n        reject(err);\n      } else if (img) {\n        resolve(img);\n      }\n    }, cfg.transformResponse);\n    tile.xhrCancel = () => xhr.cancel();\n  });\n});\nvar defaultFormat = () => {\n  return {\n    rasterData: new Uint8Array([0]),\n    width: 1,\n    height: 1\n  };\n};\nexport { defaultFormat, getTileBuffer, getTileImage };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","__async","__this","__arguments","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","throw","x","done","then","apply","getImage","getURLFromTemplate","getWMTSURLFromTemplate","getRasterFile","getTileUrl","getTileBuffer","url","tileParams","tile","cfg","format","defaultFormat","operation","requestParameters","reqParams","err","img","getTileImage","imageUrl","templateUrl","Array","isArray","wmtsOptions","getWMTSURLFromTemplateNew","getURLFromTemplateNew","_a","xhr","type","transformResponse","xhrCancel","cancel","rasterData","Uint8Array","width","height"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-source/es/utils/tile/getRasterTile.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// src/utils/tile/getRasterTile.ts\nimport { getImage, getURLFromTemplate, getWMTSURLFromTemplate } from \"@antv/l7-utils\";\nimport { getRasterFile } from \"./getRasterData\";\nimport { getTileUrl } from \"./request\";\nvar getTileBuffer = (url, tileParams, tile, cfg) => __async(void 0, null, function* () {\n  const { format = defaultFormat, operation, requestParameters = {} } = cfg;\n  const reqParams = __spreadProps(__spreadValues({}, requestParameters), {\n    url: getTileUrl(url, tileParams)\n    // getTileUrl 将原始的 url 路径进行转化（多服务器）\n  });\n  return new Promise((resolve, reject) => {\n    getRasterFile(\n      tile,\n      reqParams,\n      (err, img) => {\n        if (err) {\n          reject(err);\n        } else if (img) {\n          resolve(img);\n        }\n      },\n      format,\n      operation\n    );\n  });\n});\nvar getTileImage = (url, tileParams, tile, cfg) => __async(void 0, null, function* () {\n  let imageUrl;\n  const templateUrl = Array.isArray(url) ? url[0] : url;\n  if (cfg.wmtsOptions) {\n    const getWMTSURLFromTemplateNew = (cfg == null ? void 0 : cfg.getURLFromTemplate) || getWMTSURLFromTemplate;\n    imageUrl = getWMTSURLFromTemplateNew(templateUrl, __spreadValues(__spreadValues({}, tileParams), cfg.wmtsOptions));\n  } else {\n    const getURLFromTemplateNew = (cfg == null ? void 0 : cfg.getURLFromTemplate) || getURLFromTemplate;\n    imageUrl = getURLFromTemplateNew(templateUrl, tileParams);\n  }\n  return new Promise((resolve, reject) => {\n    var _a;\n    const xhr = getImage(\n      __spreadProps(__spreadValues({}, cfg == null ? void 0 : cfg.requestParameters), {\n        url: imageUrl,\n        type: ((_a = cfg == null ? void 0 : cfg.requestParameters) == null ? void 0 : _a.type) || \"arrayBuffer\"\n      }),\n      (err, img) => {\n        if (err) {\n          reject(err);\n        } else if (img) {\n          resolve(img);\n        }\n      },\n      cfg.transformResponse\n    );\n    tile.xhrCancel = () => xhr.cancel();\n  });\n});\nvar defaultFormat = () => {\n  return {\n    rasterData: new Uint8Array([0]),\n    width: 1,\n    height: 1\n  };\n};\nexport {\n  defaultFormat,\n  getTileBuffer,\n  getTileImage\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}