{"ast":null,"code":"import React from 'react';\nimport clamp from 'clamp';\nimport classNames from 'classnames';\nimport keys from 'rc-util/lib/KeyCode';\nimport { WheelHandler } from '../util/dom/WheelHandler';\nimport { MouseMoveTracker } from '../util/dom/MouseMoveTracker';\nexport class Scrollbar extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.triggerCallback = nextPosition => {\n      const max = this.props.contentSize - this.props.containerSize;\n      const position = clamp(nextPosition, 0, max);\n      if (position !== this.props.scrollPosition) {\n        this.props.onScroll(position);\n      }\n    };\n    this.onWheel = delta => {\n      this.triggerCallback(this.props.scrollPosition + delta);\n    };\n    this.onWheelX = (deltaX, deltaY) => {\n      if (Math.abs(deltaX) >= Math.abs(deltaY)) {\n        this.onWheel(deltaX);\n      }\n    };\n    this.onWheelY = (deltaX, deltaY) => {\n      if (Math.abs(deltaX) <= Math.abs(deltaY)) {\n        this.onWheel(deltaY);\n      }\n    };\n    this.onKeyDown = e => {\n      const keyCode = e.keyCode;\n      // let focus move off the scrollbar\n      if (keyCode === keys.TAB) {\n        return;\n      }\n      const {\n        contentSize,\n        containerSize\n      } = this.props;\n      let distance = this.props.keyboardScrollAmount;\n      let direction = 0;\n      if (this.isHorizontal()) {\n        switch (keyCode) {\n          case keys.HOME:\n            direction = -1;\n            distance = contentSize;\n            break;\n          case keys.LEFT:\n            direction = -1;\n            break;\n          case keys.RIGHT:\n            direction = 1;\n            break;\n          default:\n            return;\n        }\n      } else {\n        switch (keyCode) {\n          case keys.SPACE:\n            if (e.shiftKey) {\n              direction = -1;\n            } else {\n              direction = 1;\n            }\n            break;\n          case keys.HOME:\n            direction = -1;\n            distance = contentSize;\n            break;\n          case keys.UP:\n            direction = -1;\n            break;\n          case keys.DOWN:\n            direction = 1;\n            break;\n          case keys.PAGE_UP:\n            direction = -1;\n            distance = containerSize;\n            break;\n          case keys.PAGE_DOWN:\n            direction = 1;\n            distance = containerSize;\n            break;\n          default:\n            return;\n        }\n      }\n      e.preventDefault();\n      this.triggerCallback(this.props.scrollPosition + distance * direction);\n    };\n    this.onMouseDown = e => {\n      if (e.target !== this.thumbElem) {\n        const nativeEvent = e.nativeEvent;\n        const position = this.isHorizontal() ? nativeEvent.offsetX || nativeEvent.layerX : nativeEvent.offsetY || nativeEvent.layerY;\n        // mousedown on the scroll-track directly, move the\n        // center of the scroll-face to the mouse position.\n        this.triggerCallback((position - this.thumbSize * 0.5) / this.scale);\n      } else {\n        this.mouseMoveTracker.capture(e);\n      }\n      if (this.props.stopPropagation) {\n        e.stopPropagation();\n      }\n      // focus the container so it may receive keyboard events\n      this.containerElem.focus();\n    };\n    this.onMouseMove = (deltaX, deltaY) => {\n      let delta = this.isHorizontal() ? deltaX : deltaY;\n      if (delta !== 0) {\n        delta /= this.scale;\n        this.triggerCallback(this.props.scrollPosition + delta);\n      }\n    };\n    this.onMouseMoveEnd = () => {\n      this.mouseMoveTracker.release();\n    };\n    this.refContainer = container => {\n      this.containerElem = container;\n    };\n    this.refThumb = thumb => {\n      this.thumbElem = thumb;\n    };\n  }\n  UNSAFE_componentWillMount() {\n    this.wheelHandler = new WheelHandler({\n      onWheel: this.isHorizontal() ? this.onWheelX : this.onWheelY,\n      shouldHandleScrollX: true,\n      shouldHandleScrollY: true,\n      stopPropagation: this.props.stopPropagation\n    });\n    this.mouseMoveTracker = new MouseMoveTracker({\n      elem: document.documentElement,\n      onMouseMove: this.onMouseMove,\n      onMouseMoveEnd: this.onMouseMoveEnd\n    });\n  }\n  componentWillUnmount() {\n    this.mouseMoveTracker.release();\n  }\n  isHorizontal() {\n    return this.props.orientation === 'horizontal';\n  }\n  fixPosition(position) {\n    const max = this.props.contentSize - this.props.containerSize;\n    return clamp(position, 0, max);\n  }\n  render() {\n    const {\n      prefixCls,\n      className,\n      scrollPosition,\n      containerSize,\n      contentSize,\n      miniThumbSize,\n      zIndex,\n      scrollbarSize\n    } = this.props;\n    // unscrollable\n    if (containerSize < 1 || contentSize <= containerSize) {\n      return null;\n    }\n    let scale = containerSize / contentSize;\n    let thumbSize = containerSize * scale;\n    if (thumbSize < miniThumbSize) {\n      scale = (containerSize - miniThumbSize) / (contentSize - containerSize);\n      thumbSize = miniThumbSize;\n    }\n    // cache\n    this.scale = scale;\n    this.thumbSize = thumbSize;\n    let trackStyle;\n    let thumbStyle;\n    const horizontal = this.isHorizontal();\n    if (horizontal) {\n      trackStyle = {\n        width: containerSize,\n        height: scrollbarSize\n      };\n      thumbStyle = {\n        width: thumbSize,\n        transform: `translate(${scrollPosition * scale}px, 0)`\n      };\n    } else {\n      trackStyle = {\n        width: scrollbarSize,\n        height: containerSize\n      };\n      thumbStyle = {\n        height: thumbSize,\n        transform: `translate(0, ${scrollPosition * scale}px)`\n      };\n    }\n    if (zIndex) {\n      trackStyle.zIndex = zIndex;\n    }\n    const baseCls = `${prefixCls}-scrollbar`;\n    return React.createElement(\"div\", {\n      role: \"button\",\n      className: classNames(baseCls, {\n        [`${baseCls}-vertical`]: !horizontal,\n        [`${baseCls}-horizontal`]: horizontal\n      }, className),\n      style: trackStyle,\n      tabIndex: 0,\n      ref: this.refContainer,\n      onKeyDown: this.onKeyDown,\n      onMouseDown: this.onMouseDown,\n      onWheel: this.wheelHandler.onWheel\n    }, React.createElement(\"div\", {\n      ref: this.refThumb,\n      style: thumbStyle,\n      className: `${baseCls}-thumb`\n    }));\n  }\n}\n(function (Scrollbar) {\n  Scrollbar.defaultProps = {\n    prefixCls: 'x6',\n    orientation: 'vertical',\n    contentSize: 0,\n    containerSize: 0,\n    defaultPosition: 0,\n    scrollbarSize: 4,\n    miniThumbSize: 16,\n    keyboardScrollAmount: 40\n  };\n})(Scrollbar || (Scrollbar = {}));","map":{"version":3,"names":["React","clamp","classNames","keys","WheelHandler","MouseMoveTracker","Scrollbar","PureComponent","constructor","triggerCallback","nextPosition","max","props","contentSize","containerSize","position","scrollPosition","onScroll","onWheel","delta","onWheelX","deltaX","deltaY","Math","abs","onWheelY","onKeyDown","e","keyCode","TAB","distance","keyboardScrollAmount","direction","isHorizontal","HOME","LEFT","RIGHT","SPACE","shiftKey","UP","DOWN","PAGE_UP","PAGE_DOWN","preventDefault","onMouseDown","target","thumbElem","nativeEvent","offsetX","layerX","offsetY","layerY","thumbSize","scale","mouseMoveTracker","capture","stopPropagation","containerElem","focus","onMouseMove","onMouseMoveEnd","release","refContainer","container","refThumb","thumb","UNSAFE_componentWillMount","wheelHandler","shouldHandleScrollX","shouldHandleScrollY","elem","document","documentElement","componentWillUnmount","orientation","fixPosition","render","prefixCls","className","miniThumbSize","zIndex","scrollbarSize","trackStyle","thumbStyle","horizontal","width","height","transform","baseCls","createElement","role","style","tabIndex","ref","defaultProps","defaultPosition"],"sources":["../../src/scrollbar/index.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}