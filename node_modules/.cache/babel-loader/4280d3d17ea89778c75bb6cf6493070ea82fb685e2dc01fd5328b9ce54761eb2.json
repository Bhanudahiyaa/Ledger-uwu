{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { Syringe } from 'mana-syringe';\nimport { IHookContribution } from '../hooks/interface';\nimport { disposableNoop } from '../common/utils';\nexport const CONFIG_TYPE = 'CommandConfig';\nexport const getDefaultContributions = () => {\n  return [];\n};\nexport class CommandConfig {\n  constructor() {\n    this.setCommandContributions = fn => {\n      this.getContributions = fn;\n    };\n    this.getCommandContributions = () => {\n      return this.getContributions();\n    };\n    this.registerHook = hooks => __awaiter(this, void 0, void 0, function* () {\n      if (this.registerHookFn) {\n        return this.registerHookFn(hooks);\n      }\n      return disposableNoop;\n    });\n    this.registerHookHub = registry => __awaiter(this, void 0, void 0, function* () {\n      if (this.registerHookHubFn) {\n        return this.registerHookHubFn(registry);\n      }\n      return disposableNoop;\n    });\n    /** 设置CONFIG类型 */\n    this.CONFIG_TYPE = CONFIG_TYPE;\n    /** set command hook fn */\n    this.setRegisterHookFn = fn => {\n      this.registerHookFn = fn;\n    };\n    /** 注册 command hook hub */\n    this.setRegisterHookHubFn = fn => {\n      this.registerHookHubFn = fn;\n    };\n    /** 获取config的所有配置*/\n    this.getConfig = () => __awaiter(this, void 0, void 0, function* () {\n      return {\n        registerHookFn: this.registerHookFn,\n        getContributions: this.getContributions,\n        CONFIG_TYPE: this.CONFIG_TYPE\n      };\n    });\n    this.getContributions = getDefaultContributions;\n  }\n}\n/** 提供一个工厂方法 */\nexport const createCommandConfig = () => {\n  return new CommandConfig();\n};\nexport const registerCommandConfig = (register, commandConfig) => {\n  register({\n    token: CommandConfig,\n    contrib: [IHookContribution],\n    lifecycle: Syringe.Lifecycle.singleton,\n    useDynamic: () => {\n      return commandConfig;\n    }\n  });\n};","map":{"version":3,"names":["Syringe","IHookContribution","disposableNoop","CONFIG_TYPE","getDefaultContributions","CommandConfig","constructor","setCommandContributions","fn","getContributions","getCommandContributions","registerHook","hooks","__awaiter","registerHookFn","registerHookHub","registry","registerHookHubFn","setRegisterHookFn","setRegisterHookHubFn","getConfig","createCommandConfig","registerCommandConfig","register","commandConfig","token","contrib","lifecycle","Lifecycle","singleton","useDynamic"],"sources":["../../src/command-contributions/config.tsx"],"sourcesContent":[null],"mappings":";AAAA,SAASA,OAAO,QAAQ,cAAc;AAEtC,SAASC,iBAAiB,QAAQ,oBAAoB;AAEtD,SAASC,cAAc,QAAQ,iBAAiB;AAKhD,OAAO,MAAMC,WAAW,GAAG,eAAe;AAE1C,OAAO,MAAMC,uBAAuB,GAAGA,CAAA,KAAK;EAC1C,OAAO,EAAkC;AAC3C,CAAC;AAMD,OAAM,MAAOC,aAAa;EAGxBC,YAAA;IAIA,KAAAC,uBAAuB,GAAIC,EAAgC,IAAI;MAC7D,IAAI,CAACC,gBAAgB,GAAGD,EAAE;IAC5B,CAAC;IAED,KAAAE,uBAAuB,GAAG,MAAK;MAC7B,OAAO,IAAI,CAACD,gBAAgB,EAAE;IAChC,CAAC;IAED,KAAAE,YAAY,GAAUC,KAAgB,IAAIC,SAAA;MACxC,IAAI,IAAI,CAACC,cAAc,EAAE;QACvB,OAAO,IAAI,CAACA,cAAc,CAACF,KAAK,CAAC;;MAEnC,OAAOV,cAAc;IACvB,CAAC;IAED,KAAAa,eAAe,GAAUC,QAAiC,IAAIH,SAAA;MAC5D,IAAI,IAAI,CAACI,iBAAiB,EAAE;QAC1B,OAAO,IAAI,CAACA,iBAAiB,CAACD,QAAQ,CAAC;;MAEzC,OAAOd,cAAc;IACvB,CAAC;IACD;IACS,KAAAC,WAAW,GAAGA,WAAW;IAIlC;IACA,KAAAe,iBAAiB,GAAIV,EAA8B,IAAI;MACrD,IAAI,CAACM,cAAc,GAAGN,EAAE;IAC1B,CAAC;IAGD;IACA,KAAAW,oBAAoB,GAAIX,EAAiC,IAAI;MAC3D,IAAI,CAACS,iBAAiB,GAAGT,EAAE;IAC7B,CAAC;IACD;IACA,KAAAY,SAAS,GAAG,MAAWP,SAAA;MACrB,OAAO;QACLC,cAAc,EAAE,IAAI,CAACA,cAAc;QACnCL,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;QACvCN,WAAW,EAAE,IAAI,CAACA;OACnB;IACH,CAAC;IA9CC,IAAI,CAACM,gBAAgB,GAAGL,uBAAuB;EACjD;;AAgDF;AACA,OAAO,MAAMiB,mBAAmB,GAAGA,CAAA,KAAK;EACtC,OAAO,IAAIhB,aAAa,EAAE;AAC5B,CAAC;AAED,OAAO,MAAMiB,qBAAqB,GAAGA,CAACC,QAA0B,EAAEC,aAA4B,KAAI;EAChGD,QAAQ,CAAgB;IACtBE,KAAK,EAAEpB,aAAa;IACpBqB,OAAO,EAAE,CAACzB,iBAAiB,CAAC;IAC5B0B,SAAS,EAAE3B,OAAO,CAAC4B,SAAS,CAACC,SAAS;IACtCC,UAAU,EAAEA,CAAA,KAAK;MACf,OAAON,aAAa;IACtB;GACD,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}