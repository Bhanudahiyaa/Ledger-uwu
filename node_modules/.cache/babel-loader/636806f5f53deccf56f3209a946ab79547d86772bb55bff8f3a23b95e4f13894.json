{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport React from 'react';\nimport { Tooltip } from 'antd';\nimport { useXFlowApp, createComponentModel, XFlowAppExtensionModule } from '@antv/xflow-core';\nimport { ACTIVE_NODE_PORT } from '../interface';\nimport { createModule } from '../module';\nexport const CONFIG_TYPE = 'CanvasNodePortTooltip';\nconst RenderTooltip = props => {\n  const xflow = useXFlowApp();\n  const [state,, renderModel] = createComponentModel(null);\n  React.useEffect(() => {\n    if (!xflow) {\n      return;\n    }\n    const subscribe = () => __awaiter(void 0, void 0, void 0, function* () {\n      const {\n        model\n      } = yield ACTIVE_NODE_PORT.useModel(xflow.modelService);\n      return model.watch(value => {\n        renderModel.setValue(value);\n      });\n    });\n    const subscription = subscribe();\n    return () => {\n      subscription.then(disposable => {\n        disposable.dispose();\n      });\n    };\n  }, [renderModel, xflow]);\n  const visible = !!(state && state.position && state.position.x);\n  if (!visible) {\n    return null;\n  }\n  const title = props.getTooltip ? props.getTooltip(state) : state.tooltip;\n  return React.createElement(Tooltip, {\n    visible: visible,\n    title: title,\n    placement: state.placement || 'top'\n  }, React.createElement(\"span\", {\n    className: \"canvas-node-port-tooltip\",\n    style: {\n      position: 'absolute',\n      left: state.position.x,\n      top: state.position.y\n    }\n  }));\n};\nexport const CanvasNodePortTooltip = props => {\n  const getConfig = React.useCallback(() => __awaiter(void 0, void 0, void 0, function* () {\n    return null;\n  }), []);\n  return React.createElement(XFlowAppExtensionModule, {\n    createModule: createModule,\n    config: {\n      CONFIG_TYPE: CONFIG_TYPE,\n      getConfig\n    }\n  }, React.createElement(RenderTooltip, Object.assign({}, props)));\n};","map":{"version":3,"names":["React","Tooltip","useXFlowApp","createComponentModel","XFlowAppExtensionModule","ACTIVE_NODE_PORT","createModule","CONFIG_TYPE","RenderTooltip","props","xflow","state","renderModel","useEffect","subscribe","__awaiter","model","useModel","modelService","watch","value","setValue","subscription","then","disposable","dispose","visible","position","x","title","getTooltip","tooltip","createElement","placement","className","style","left","top","y","CanvasNodePortTooltip","getConfig","useCallback","config","Object","assign"],"sources":["../../../src/canvas-node-port-tooltip/components/index.tsx"],"sourcesContent":[null],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,MAAM;AAC9B,SAASC,WAAW,EAAEC,oBAAoB,EAAEC,uBAAuB,QAAQ,kBAAkB;AAE7F,SAASC,gBAAgB,QAAQ,cAAc;AAC/C,SAASC,YAAY,QAAQ,WAAW;AAExC,OAAO,MAAMC,WAAW,GAAG,uBAAuB;AAElD,MAAMC,aAAa,GAA2BC,KAAK,IAAG;EACpD,MAAMC,KAAK,GAAGR,WAAW,EAAE;EAC3B,MAAM,CAACS,KAAK,GAAIC,WAAW,CAAC,GAAGT,oBAAoB,CAAiC,IAAI,CAAC;EAEzFH,KAAK,CAACa,SAAS,CAAC,MAAK;IACnB,IAAI,CAACH,KAAK,EAAE;MACV;;IAEF,MAAMI,SAAS,GAAGA,CAAA,KAAWC,SAAA;MAC3B,MAAM;QAAEC;MAAK,CAAE,GAAG,MAAMX,gBAAgB,CAACY,QAAQ,CAACP,KAAK,CAACQ,YAAY,CAAC;MACrE,OAAOF,KAAK,CAACG,KAAK,CAACC,KAAK,IAAG;QACzBR,WAAW,CAACS,QAAQ,CAACD,KAAK,CAAC;MAC7B,CAAC,CAAC;IACJ,CAAC;IACD,MAAME,YAAY,GAAGR,SAAS,EAAE;IAChC,OAAO,MAAK;MACVQ,YAAY,CAACC,IAAI,CAACC,UAAU,IAAG;QAC7BA,UAAU,CAACC,OAAO,EAAE;MACtB,CAAC,CAAC;IACJ,CAAC;EACH,CAAC,EAAE,CAACb,WAAW,EAAEF,KAAK,CAAC,CAAC;EAExB,MAAMgB,OAAO,GAAG,CAAC,EAAEf,KAAK,IAAIA,KAAK,CAACgB,QAAQ,IAAIhB,KAAK,CAACgB,QAAQ,CAACC,CAAC,CAAC;EAE/D,IAAI,CAACF,OAAO,EAAE;IACZ,OAAO,IAAI;;EAGb,MAAMG,KAAK,GAAGpB,KAAK,CAACqB,UAAU,GAAGrB,KAAK,CAACqB,UAAU,CAACnB,KAAK,CAAC,GAAGA,KAAK,CAACoB,OAAO;EAExE,OACE/B,KAAA,CAAAgC,aAAA,CAAC/B,OAAO;IAACyB,OAAO,EAAEA,OAAO;IAAEG,KAAK,EAAEA,KAAK;IAAEI,SAAS,EAAEtB,KAAK,CAACsB,SAAS,IAAI;EAAK,GAC1EjC,KAAA,CAAAgC,aAAA;IACEE,SAAS,EAAC,0BAA0B;IACpCC,KAAK,EAAE;MAAER,QAAQ,EAAE,UAAU;MAAES,IAAI,EAAEzB,KAAK,CAACgB,QAAQ,CAACC,CAAC;MAAES,GAAG,EAAE1B,KAAK,CAACgB,QAAQ,CAACW;IAAC;EAAE,EAC9E,CACM;AAEd,CAAC;AAED,OAAO,MAAMC,qBAAqB,GAA2B9B,KAAK,IAAG;EACnE,MAAM+B,SAAS,GAAGxC,KAAK,CAACyC,WAAW,CAAC,MAAW1B,SAAA;IAAC,WAAI;EAAA,IAAE,EAAE,CAAC;EAEzD,OACEf,KAAA,CAAAgC,aAAA,CAAC5B,uBAAuB;IACtBE,YAAY,EAAEA,YAAY;IAC1BoC,MAAM,EAAE;MAAEnC,WAAW,EAAEA,WAAW;MAAEiC;IAAS;EAAE,GAE/CxC,KAAA,CAAAgC,aAAA,CAACxB,aAAa,EAAAmC,MAAA,CAAAC,MAAA,KAAKnC,KAAK,EAAI,CACJ;AAE9B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}