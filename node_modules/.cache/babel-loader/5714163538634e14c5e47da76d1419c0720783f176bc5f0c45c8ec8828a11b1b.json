{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n      result;\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n    return _possibleConstructorReturn(this, result);\n  };\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nimport { gl } from '../..';\nimport { Component } from '../../ComponentManager';\nexport var MaterialComponent = /*#__PURE__*/function (_Component) {\n  _inherits(MaterialComponent, _Component);\n  var _super = _createSuper(MaterialComponent);\n\n  // control flow in shaders, eg. USE_UV, USE_MAP...\n  function MaterialComponent(data) {\n    var _this;\n    _classCallCheck(this, MaterialComponent);\n    _this = _super.call(this, data);\n    _this.vertexShaderGLSL = void 0;\n    _this.fragmentShaderGLSL = void 0;\n    _this.defines = {};\n    _this.dirty = true;\n    _this.uniforms = [];\n    _this.cull = {\n      enable: true,\n      face: gl.BACK\n    };\n    _this.depth = {\n      enable: true\n    };\n    _this.blend = void 0;\n    _this.entity = void 0;\n    _this.type = void 0;\n    Object.assign(_assertThisInitialized(_this), data);\n    return _this;\n  }\n  _createClass(MaterialComponent, [{\n    key: \"setDefines\",\n    value: function setDefines(defines) {\n      this.defines = _objectSpread(_objectSpread({}, this.defines), defines);\n      return this;\n    }\n  }, {\n    key: \"setCull\",\n    value: function setCull(cull) {\n      this.cull = cull;\n      return this;\n    }\n  }, {\n    key: \"setDepth\",\n    value: function setDepth(depth) {\n      this.depth = depth;\n      return this;\n    }\n  }, {\n    key: \"setBlend\",\n    value: function setBlend(blend) {\n      this.blend = blend;\n      return this;\n    }\n  }, {\n    key: \"setUniform\",\n    value: function setUniform(name, data) {\n      var _this2 = this;\n      if (typeof name !== 'string') {\n        Object.keys(name).forEach(function (key) {\n          return _this2.setUniform(key, name[key]);\n        });\n        return this;\n      }\n      var existedUniform = this.uniforms.find(function (u) {\n        return u.name === name;\n      });\n      if (!existedUniform) {\n        this.uniforms.push({\n          name: name,\n          dirty: true,\n          data: data\n        });\n      } else {\n        existedUniform.dirty = true;\n        existedUniform.data = data;\n      }\n      this.dirty = true;\n      return this;\n    }\n  }]);\n  return MaterialComponent;\n}(Component);","map":{"version":3,"names":["gl","Component","MaterialComponent","_Component","_inherits","_super","_createSuper","data","_this","_classCallCheck","call","vertexShaderGLSL","fragmentShaderGLSL","defines","dirty","uniforms","cull","enable","face","BACK","depth","blend","entity","type","Object","assign","_assertThisInitialized","_createClass","key","value","setDefines","_objectSpread","setCull","setDepth","setBlend","setUniform","name","_this2","keys","forEach","existedUniform","find","u","push"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/g-webgpu-core/src/components/material/MaterialComponent.ts"],"sourcesContent":["import { Entity, gl } from '../..';\nimport { Component } from '../../ComponentManager';\nimport { NonFunctionProperties } from '../../ComponentManager';\nimport { IModelInitializationOptions } from '../renderer/IModel';\nimport { BufferData } from '../renderer/IRendererService';\nimport { IUniformBinding } from './interface';\n\nexport class MaterialComponent extends Component<MaterialComponent> {\n  public vertexShaderGLSL: string;\n\n  public fragmentShaderGLSL: string;\n\n  // control flow in shaders, eg. USE_UV, USE_MAP...\n  public defines: Record<string, boolean | number> = {};\n\n  public dirty = true;\n\n  public uniforms: IUniformBinding[] = [];\n\n  public cull: IModelInitializationOptions['cull'] = {\n    enable: true,\n    face: gl.BACK,\n  };\n\n  public depth: IModelInitializationOptions['depth'] = {\n    enable: true,\n  };\n\n  public blend: IModelInitializationOptions['blend'];\n\n  public entity: Entity;\n\n  public type: string;\n\n  constructor(data: Partial<NonFunctionProperties<MaterialComponent>>) {\n    super(data);\n\n    Object.assign(this, data);\n  }\n\n  public setDefines(defines: Record<string, boolean | number>) {\n    this.defines = { ...this.defines, ...defines };\n    return this;\n  }\n\n  public setCull(cull: IModelInitializationOptions['cull']) {\n    this.cull = cull;\n    return this;\n  }\n\n  public setDepth(depth: IModelInitializationOptions['depth']) {\n    this.depth = depth;\n    return this;\n  }\n\n  public setBlend(blend: IModelInitializationOptions['blend']) {\n    this.blend = blend;\n    return this;\n  }\n\n  public setUniform(\n    name: string | Record<string, BufferData>,\n    data?: BufferData,\n  ) {\n    if (typeof name !== 'string') {\n      Object.keys(name).forEach((key) => this.setUniform(key, name[key]));\n      return this;\n    }\n\n    const existedUniform = this.uniforms.find((u) => u.name === name);\n    if (!existedUniform) {\n      this.uniforms.push({\n        name,\n        dirty: true,\n        data: data!,\n      });\n    } else {\n      existedUniform.dirty = true;\n      existedUniform.data = data!;\n    }\n\n    this.dirty = true;\n    return this;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}