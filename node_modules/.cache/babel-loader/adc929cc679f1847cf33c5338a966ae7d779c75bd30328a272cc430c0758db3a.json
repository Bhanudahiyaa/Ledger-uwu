{"ast":null,"code":"import { __awaiter } from \"tslib\";\n/* eslint-disable @typescript-eslint/no-redeclare */\nimport 'reflect-metadata';\nimport { Contribution, Module, Syringe } from 'mana-syringe';\nimport { ModelRegistry } from './model-registry';\n/**  model service 扩展  */\nimport { IModelContribution, IModelOptionProvider } from './interface';\nimport { CommandModelContribution } from './contributions/command-model';\nimport { GraphModelContribution } from './contributions/graph-model';\n/** 模块 */\nexport const modelServiceModule = Module(register => {\n  /** 注册 IModelService Contribution */\n  Contribution.register(register, IModelContribution);\n  /** 注册 ModelRegistry 到 IFrontendApplicationContribution  */\n  /** 注册 ModelRegistry alias IModelService Service */\n  register(ModelRegistry);\n  /** 注册 Graph 相关的ModelService  */\n  register(GraphModelContribution);\n  /** 注册 Command 相关的ModelService  */\n  register(CommandModelContribution);\n});\nexport const registerModelServiceConfig = (register, config) => {\n  register({\n    token: IModelOptionProvider,\n    useDynamic: () => {\n      return {\n        getOption: () => __awaiter(void 0, void 0, void 0, function* () {\n          return config.getConfig();\n        })\n      };\n    },\n    lifecycle: Syringe.Lifecycle.singleton\n  });\n};\n/** 组件的 config 模块，必须要加载 */\nexport const createModule = config => {\n  return Module(register => {\n    /** 绑定 ModelService  配置 */\n    registerModelServiceConfig(register, config);\n  });\n};","map":{"version":3,"names":["Contribution","Module","Syringe","ModelRegistry","IModelContribution","IModelOptionProvider","CommandModelContribution","GraphModelContribution","modelServiceModule","register","registerModelServiceConfig","config","token","useDynamic","getOption","__awaiter","getConfig","lifecycle","Lifecycle","singleton","createModule"],"sources":["../../src/model-service/module.ts"],"sourcesContent":[null],"mappings":";AAAA;AACA,OAAO,kBAAkB;AACzB,SAASA,YAAY,EAAEC,MAAM,EAAEC,OAAO,QAAQ,cAAc;AAG5D,SAASC,aAAa,QAAQ,kBAAkB;AAChD;AACA,SAASC,kBAAkB,EAAEC,oBAAoB,QAAQ,aAAa;AACtE,SAASC,wBAAwB,QAAQ,+BAA+B;AACxE,SAASC,sBAAsB,QAAQ,6BAA6B;AAEpE;AACA,OAAO,MAAMC,kBAAkB,GAAGP,MAAM,CAACQ,QAAQ,IAAG;EAClD;EACAT,YAAY,CAACS,QAAQ,CAACA,QAAQ,EAAEL,kBAAkB,CAAC;EAEnD;EACA;EACAK,QAAQ,CAACN,aAAa,CAAC;EAEvB;EACAM,QAAQ,CAACF,sBAAsB,CAAC;EAEhC;EACAE,QAAQ,CAACH,wBAAwB,CAAC;AACpC,CAAC,CAAC;AAEF,OAAO,MAAMI,0BAA0B,GAAGA,CACxCD,QAA0B,EAC1BE,MAA0B,KACxB;EACFF,QAAQ,CAAC;IACPG,KAAK,EAAEP,oBAAoB;IAC3BQ,UAAU,EAAEA,CAAA,KAAK;MACf,OAAO;QACLC,SAAS,EAAEA,CAAA,KAAWC,SAAA;UACpB,OAAOJ,MAAM,CAACK,SAAS,EAAE;QAC3B,CAAC;OACsB;IAC3B,CAAC;IACDC,SAAS,EAAEf,OAAO,CAACgB,SAAS,CAACC;GAC9B,CAAC;AACJ,CAAC;AAED;AACA,OAAO,MAAMC,YAAY,GAAIT,MAA0B,IAAI;EACzD,OAAOV,MAAM,CAACQ,QAAQ,IAAG;IACvB;IACAC,0BAA0B,CAACD,QAAQ,EAAEE,MAAM,CAAC;EAC9C,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}