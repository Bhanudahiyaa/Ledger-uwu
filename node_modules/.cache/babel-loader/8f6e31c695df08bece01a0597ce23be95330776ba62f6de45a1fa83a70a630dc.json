{"ast":null,"code":"// src/device/DeviceBuffer.ts\nimport { BufferUsage } from \"@antv/g-device-api\";\nimport { gl } from \"@antv/l7-core\";\nimport { hintMap, typedArrayCtorMap } from \"./constants\";\nimport { isTypedArray } from \"./utils/typedarray\";\nvar DeviceBuffer = class {\n  constructor(device, options) {\n    this.isDestroyed = false;\n    const {\n      data,\n      usage,\n      type,\n      isUBO,\n      label\n    } = options;\n    let typed;\n    if (isTypedArray(data)) {\n      typed = data;\n    } else {\n      typed = new typedArrayCtorMap[this.type || gl.FLOAT](data);\n    }\n    this.type = type;\n    this.size = typed.byteLength;\n    this.buffer = device.createBuffer({\n      viewOrSize: typed,\n      usage: isUBO ? BufferUsage.UNIFORM : BufferUsage.VERTEX,\n      hint: hintMap[usage || gl.STATIC_DRAW]\n    });\n    if (label) {\n      device.setResourceName(this.buffer, label);\n    }\n  }\n  get() {\n    return this.buffer;\n  }\n  destroy() {\n    if (!this.isDestroyed) {\n      this.buffer.destroy();\n    }\n    this.isDestroyed = true;\n  }\n  subData({\n    data,\n    offset\n  }) {\n    let typed;\n    if (isTypedArray(data)) {\n      typed = data;\n    } else {\n      typed = new typedArrayCtorMap[this.type || gl.FLOAT](data);\n    }\n    this.buffer.setSubData(offset, new Uint8Array(typed.buffer));\n  }\n};\nexport { DeviceBuffer as default };","map":{"version":3,"names":["BufferUsage","gl","hintMap","typedArrayCtorMap","isTypedArray","DeviceBuffer","constructor","device","options","isDestroyed","data","usage","type","isUBO","label","typed","FLOAT","size","byteLength","buffer","createBuffer","viewOrSize","UNIFORM","VERTEX","hint","STATIC_DRAW","setResourceName","get","destroy","subData","offset","setSubData","Uint8Array","default"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-renderer/es/device/DeviceBuffer.js"],"sourcesContent":["// src/device/DeviceBuffer.ts\nimport { BufferUsage } from \"@antv/g-device-api\";\nimport { gl } from \"@antv/l7-core\";\nimport { hintMap, typedArrayCtorMap } from \"./constants\";\nimport { isTypedArray } from \"./utils/typedarray\";\nvar DeviceBuffer = class {\n  constructor(device, options) {\n    this.isDestroyed = false;\n    const { data, usage, type, isUBO, label } = options;\n    let typed;\n    if (isTypedArray(data)) {\n      typed = data;\n    } else {\n      typed = new typedArrayCtorMap[this.type || gl.FLOAT](data);\n    }\n    this.type = type;\n    this.size = typed.byteLength;\n    this.buffer = device.createBuffer({\n      viewOrSize: typed,\n      usage: isUBO ? BufferUsage.UNIFORM : BufferUsage.VERTEX,\n      hint: hintMap[usage || gl.STATIC_DRAW]\n    });\n    if (label) {\n      device.setResourceName(this.buffer, label);\n    }\n  }\n  get() {\n    return this.buffer;\n  }\n  destroy() {\n    if (!this.isDestroyed) {\n      this.buffer.destroy();\n    }\n    this.isDestroyed = true;\n  }\n  subData({\n    data,\n    offset\n  }) {\n    let typed;\n    if (isTypedArray(data)) {\n      typed = data;\n    } else {\n      typed = new typedArrayCtorMap[this.type || gl.FLOAT](data);\n    }\n    this.buffer.setSubData(offset, new Uint8Array(typed.buffer));\n  }\n};\nexport {\n  DeviceBuffer as default\n};\n"],"mappings":"AAAA;AACA,SAASA,WAAW,QAAQ,oBAAoB;AAChD,SAASC,EAAE,QAAQ,eAAe;AAClC,SAASC,OAAO,EAAEC,iBAAiB,QAAQ,aAAa;AACxD,SAASC,YAAY,QAAQ,oBAAoB;AACjD,IAAIC,YAAY,GAAG,MAAM;EACvBC,WAAWA,CAACC,MAAM,EAAEC,OAAO,EAAE;IAC3B,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,MAAM;MAAEC,IAAI;MAAEC,KAAK;MAAEC,IAAI;MAAEC,KAAK;MAAEC;IAAM,CAAC,GAAGN,OAAO;IACnD,IAAIO,KAAK;IACT,IAAIX,YAAY,CAACM,IAAI,CAAC,EAAE;MACtBK,KAAK,GAAGL,IAAI;IACd,CAAC,MAAM;MACLK,KAAK,GAAG,IAAIZ,iBAAiB,CAAC,IAAI,CAACS,IAAI,IAAIX,EAAE,CAACe,KAAK,CAAC,CAACN,IAAI,CAAC;IAC5D;IACA,IAAI,CAACE,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACK,IAAI,GAAGF,KAAK,CAACG,UAAU;IAC5B,IAAI,CAACC,MAAM,GAAGZ,MAAM,CAACa,YAAY,CAAC;MAChCC,UAAU,EAAEN,KAAK;MACjBJ,KAAK,EAAEE,KAAK,GAAGb,WAAW,CAACsB,OAAO,GAAGtB,WAAW,CAACuB,MAAM;MACvDC,IAAI,EAAEtB,OAAO,CAACS,KAAK,IAAIV,EAAE,CAACwB,WAAW;IACvC,CAAC,CAAC;IACF,IAAIX,KAAK,EAAE;MACTP,MAAM,CAACmB,eAAe,CAAC,IAAI,CAACP,MAAM,EAAEL,KAAK,CAAC;IAC5C;EACF;EACAa,GAAGA,CAAA,EAAG;IACJ,OAAO,IAAI,CAACR,MAAM;EACpB;EACAS,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC,IAAI,CAACnB,WAAW,EAAE;MACrB,IAAI,CAACU,MAAM,CAACS,OAAO,CAAC,CAAC;IACvB;IACA,IAAI,CAACnB,WAAW,GAAG,IAAI;EACzB;EACAoB,OAAOA,CAAC;IACNnB,IAAI;IACJoB;EACF,CAAC,EAAE;IACD,IAAIf,KAAK;IACT,IAAIX,YAAY,CAACM,IAAI,CAAC,EAAE;MACtBK,KAAK,GAAGL,IAAI;IACd,CAAC,MAAM;MACLK,KAAK,GAAG,IAAIZ,iBAAiB,CAAC,IAAI,CAACS,IAAI,IAAIX,EAAE,CAACe,KAAK,CAAC,CAACN,IAAI,CAAC;IAC5D;IACA,IAAI,CAACS,MAAM,CAACY,UAAU,CAACD,MAAM,EAAE,IAAIE,UAAU,CAACjB,KAAK,CAACI,MAAM,CAAC,CAAC;EAC9D;AACF,CAAC;AACD,SACEd,YAAY,IAAI4B,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}