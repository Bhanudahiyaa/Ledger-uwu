{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { IDebugLog, ILayerStage } from '@antv/l7-core';\n// import TileLayer from '../tile/core/BaseLayer';\n/**\n * Layer Model 初始化，更新，销毁\n */\nexport default class LayerModelPlugin {\n  build(layer) {\n    return _asyncToGenerator(function* () {\n      // 更新Model 配置项 style options\n      layer.prepareBuildModel();\n      // 初始化 Model\n      yield layer.buildModels();\n    })();\n  }\n  initLayerModel(layer) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.build(layer);\n      layer.styleNeedUpdate = false;\n    })();\n  }\n  prepareLayerModel(layer) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.build(layer);\n      layer.styleNeedUpdate = false;\n    })();\n  }\n  apply(layer) {\n    var _this3 = this;\n    layer.hooks.init.tapPromise('LayerModelPlugin', /*#__PURE__*/_asyncToGenerator(function* () {\n      if (layer.getSource().isTile) {\n        layer.prepareBuildModel();\n        return;\n      }\n      layer.log(IDebugLog.BuildModelStart, ILayerStage.INIT);\n      yield _this3.initLayerModel(layer);\n      layer.log(IDebugLog.BuildModelEnd, ILayerStage.INIT);\n    }));\n    layer.hooks.beforeRenderData.tapPromise('LayerModelPlugin', /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (flag) {\n        if (!flag) {\n          // TileLayer  不需要rebuilder\n          return false;\n        }\n        if (layer.getSource().isTile) {\n          return false;\n        }\n        layer.log(IDebugLog.BuildModelStart, ILayerStage.UPDATE);\n        yield _this3.prepareLayerModel(layer);\n        layer.log(IDebugLog.BuildModelEnd, ILayerStage.UPDATE);\n        return true;\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }\n}","map":{"version":3,"names":["_asyncToGenerator","IDebugLog","ILayerStage","LayerModelPlugin","build","layer","prepareBuildModel","buildModels","initLayerModel","_this","styleNeedUpdate","prepareLayerModel","_this2","apply","_this3","hooks","init","tapPromise","getSource","isTile","log","BuildModelStart","INIT","BuildModelEnd","beforeRenderData","_ref2","flag","UPDATE","_x","arguments"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-layers/es/plugins/LayerModelPlugin.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { IDebugLog, ILayerStage } from '@antv/l7-core';\n// import TileLayer from '../tile/core/BaseLayer';\n/**\n * Layer Model 初始化，更新，销毁\n */\nexport default class LayerModelPlugin {\n  build(layer) {\n    return _asyncToGenerator(function* () {\n      // 更新Model 配置项 style options\n      layer.prepareBuildModel();\n      // 初始化 Model\n      yield layer.buildModels();\n    })();\n  }\n  initLayerModel(layer) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.build(layer);\n      layer.styleNeedUpdate = false;\n    })();\n  }\n  prepareLayerModel(layer) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.build(layer);\n      layer.styleNeedUpdate = false;\n    })();\n  }\n  apply(layer) {\n    var _this3 = this;\n    layer.hooks.init.tapPromise('LayerModelPlugin', /*#__PURE__*/_asyncToGenerator(function* () {\n      if (layer.getSource().isTile) {\n        layer.prepareBuildModel();\n        return;\n      }\n      layer.log(IDebugLog.BuildModelStart, ILayerStage.INIT);\n      yield _this3.initLayerModel(layer);\n      layer.log(IDebugLog.BuildModelEnd, ILayerStage.INIT);\n    }));\n    layer.hooks.beforeRenderData.tapPromise('LayerModelPlugin', /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* (flag) {\n        if (!flag) {\n          // TileLayer  不需要rebuilder\n          return false;\n        }\n        if (layer.getSource().isTile) {\n          return false;\n        }\n        layer.log(IDebugLog.BuildModelStart, ILayerStage.UPDATE);\n        yield _this3.prepareLayerModel(layer);\n        layer.log(IDebugLog.BuildModelEnd, ILayerStage.UPDATE);\n        return true;\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  }\n}"],"mappings":"AAAA,OAAOA,iBAAiB,MAAM,6CAA6C;AAC3E,SAASC,SAAS,EAAEC,WAAW,QAAQ,eAAe;AACtD;AACA;AACA;AACA;AACA,eAAe,MAAMC,gBAAgB,CAAC;EACpCC,KAAKA,CAACC,KAAK,EAAE;IACX,OAAOL,iBAAiB,CAAC,aAAa;MACpC;MACAK,KAAK,CAACC,iBAAiB,CAAC,CAAC;MACzB;MACA,MAAMD,KAAK,CAACE,WAAW,CAAC,CAAC;IAC3B,CAAC,CAAC,CAAC,CAAC;EACN;EACAC,cAAcA,CAACH,KAAK,EAAE;IACpB,IAAII,KAAK,GAAG,IAAI;IAChB,OAAOT,iBAAiB,CAAC,aAAa;MACpC,MAAMS,KAAK,CAACL,KAAK,CAACC,KAAK,CAAC;MACxBA,KAAK,CAACK,eAAe,GAAG,KAAK;IAC/B,CAAC,CAAC,CAAC,CAAC;EACN;EACAC,iBAAiBA,CAACN,KAAK,EAAE;IACvB,IAAIO,MAAM,GAAG,IAAI;IACjB,OAAOZ,iBAAiB,CAAC,aAAa;MACpC,MAAMY,MAAM,CAACR,KAAK,CAACC,KAAK,CAAC;MACzBA,KAAK,CAACK,eAAe,GAAG,KAAK;IAC/B,CAAC,CAAC,CAAC,CAAC;EACN;EACAG,KAAKA,CAACR,KAAK,EAAE;IACX,IAAIS,MAAM,GAAG,IAAI;IACjBT,KAAK,CAACU,KAAK,CAACC,IAAI,CAACC,UAAU,CAAC,kBAAkB,EAAE,aAAajB,iBAAiB,CAAC,aAAa;MAC1F,IAAIK,KAAK,CAACa,SAAS,CAAC,CAAC,CAACC,MAAM,EAAE;QAC5Bd,KAAK,CAACC,iBAAiB,CAAC,CAAC;QACzB;MACF;MACAD,KAAK,CAACe,GAAG,CAACnB,SAAS,CAACoB,eAAe,EAAEnB,WAAW,CAACoB,IAAI,CAAC;MACtD,MAAMR,MAAM,CAACN,cAAc,CAACH,KAAK,CAAC;MAClCA,KAAK,CAACe,GAAG,CAACnB,SAAS,CAACsB,aAAa,EAAErB,WAAW,CAACoB,IAAI,CAAC;IACtD,CAAC,CAAC,CAAC;IACHjB,KAAK,CAACU,KAAK,CAACS,gBAAgB,CAACP,UAAU,CAAC,kBAAkB,EAAE,aAAa,YAAY;MACnF,IAAIQ,KAAK,GAAGzB,iBAAiB,CAAC,WAAW0B,IAAI,EAAE;QAC7C,IAAI,CAACA,IAAI,EAAE;UACT;UACA,OAAO,KAAK;QACd;QACA,IAAIrB,KAAK,CAACa,SAAS,CAAC,CAAC,CAACC,MAAM,EAAE;UAC5B,OAAO,KAAK;QACd;QACAd,KAAK,CAACe,GAAG,CAACnB,SAAS,CAACoB,eAAe,EAAEnB,WAAW,CAACyB,MAAM,CAAC;QACxD,MAAMb,MAAM,CAACH,iBAAiB,CAACN,KAAK,CAAC;QACrCA,KAAK,CAACe,GAAG,CAACnB,SAAS,CAACsB,aAAa,EAAErB,WAAW,CAACyB,MAAM,CAAC;QACtD,OAAO,IAAI;MACb,CAAC,CAAC;MACF,OAAO,UAAUC,EAAE,EAAE;QACnB,OAAOH,KAAK,CAACZ,KAAK,CAAC,IAAI,EAAEgB,SAAS,CAAC;MACrC,CAAC;IACH,CAAC,CAAC,CAAC,CAAC;EACN;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}