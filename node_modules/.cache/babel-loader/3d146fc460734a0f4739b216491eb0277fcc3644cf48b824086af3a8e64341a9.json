{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ModifierKey } from '../types';\nimport { Dom, NumberExt } from '../util';\nimport { Disposable } from '../common';\nexport class MouseWheel extends Disposable {\n  constructor(options) {\n    super();\n    this.options = options;\n    this.cumulatedFactor = 1;\n    const scroller = this.graph.scroller.widget;\n    this.container = scroller ? scroller.container : this.graph.container;\n    this.target = this.options.global ? document : this.container;\n    this.mousewheelHandle = new Dom.MouseWheelHandle(this.target, this.onMouseWheel.bind(this), this.allowMouseWheel.bind(this));\n    if (this.options.enabled) {\n      this.enable(true);\n    }\n  }\n  get graph() {\n    return this.options.graph;\n  }\n  get disabled() {\n    return this.options.enabled !== true;\n  }\n  enable(force) {\n    if (this.disabled || force) {\n      this.options.enabled = true;\n      this.graph.options.mousewheel.enabled = true;\n      this.mousewheelHandle.enable();\n    }\n  }\n  disable() {\n    if (!this.disabled) {\n      this.options.enabled = false;\n      this.graph.options.mousewheel.enabled = false;\n      this.mousewheelHandle.disable();\n    }\n  }\n  allowMouseWheel(evt) {\n    const e = evt.originalEvent || evt;\n    const guard = this.options.guard;\n    return (guard == null || guard.call(this.graph, e)) && ModifierKey.isMatch(e, this.options.modifiers);\n  }\n  onMouseWheel(evt) {\n    const e = evt.originalEvent || evt;\n    const guard = this.options.guard;\n    if ((guard == null || guard.call(this.graph, e)) && ModifierKey.isMatch(e, this.options.modifiers)) {\n      const factor = this.options.factor || 1.2;\n      if (this.currentScale == null) {\n        this.startPos = {\n          x: evt.clientX,\n          y: evt.clientY\n        };\n        this.currentScale = this.graph.scroller.widget ? this.graph.scroller.widget.zoom() : this.graph.transform.getScale().sx;\n      }\n      const delta = evt.deltaY;\n      if (delta < 0) {\n        // zoomin\n        // ------\n        // Switches to 1% zoom steps below 15%\n        if (this.currentScale < 0.15) {\n          this.cumulatedFactor = (this.currentScale + 0.01) / this.currentScale;\n        } else {\n          // Uses to 5% zoom steps for better grid rendering in\n          // webkit and to avoid rounding errors for zoom steps\n          this.cumulatedFactor = Math.round(this.currentScale * factor * 20) / 20 / this.currentScale;\n        }\n      } else {\n        // zoomout\n        // -------\n        // Switches to 1% zoom steps below 15%\n        if (this.currentScale <= 0.15) {\n          this.cumulatedFactor = (this.currentScale - 0.01) / this.currentScale;\n        } else {\n          // Uses to 5% zoom steps for better grid rendering in\n          // webkit and to avoid rounding errors for zoom steps\n          this.cumulatedFactor = Math.round(this.currentScale * (1 / factor) * 20) / 20 / this.currentScale;\n        }\n      }\n      this.cumulatedFactor = Math.max(0.01, Math.min(this.currentScale * this.cumulatedFactor, 160) / this.currentScale);\n      const scroller = this.graph.scroller.widget;\n      const currentScale = this.currentScale;\n      let targetScale = this.graph.transform.clampScale(currentScale * this.cumulatedFactor);\n      const minScale = this.options.minScale || Number.MIN_SAFE_INTEGER;\n      const maxScale = this.options.maxScale || Number.MAX_SAFE_INTEGER;\n      targetScale = NumberExt.clamp(targetScale, minScale, maxScale);\n      if (targetScale !== currentScale) {\n        if (scroller) {\n          if (this.options.zoomAtMousePosition) {\n            const origin = this.graph.coord.clientToLocalPoint(this.startPos);\n            scroller.zoom(targetScale, {\n              absolute: true,\n              center: origin.clone()\n            });\n          } else {\n            scroller.zoom(targetScale, {\n              absolute: true\n            });\n          }\n        } else {\n          if (this.options.zoomAtMousePosition) {\n            const origin = this.graph.coord.clientToGraphPoint(this.startPos);\n            this.graph.transform.zoom(targetScale, {\n              absolute: true,\n              center: origin.clone(),\n              ui: true\n            });\n          } else {\n            this.graph.transform.zoom(targetScale, {\n              absolute: true,\n              ui: true\n            });\n          }\n        }\n      }\n      this.currentScale = null;\n      this.cumulatedFactor = 1;\n    }\n  }\n  dispose() {\n    this.disable();\n  }\n}\n__decorate([Disposable.dispose()], MouseWheel.prototype, \"dispose\", null);","map":{"version":3,"names":["ModifierKey","Dom","NumberExt","Disposable","MouseWheel","constructor","options","cumulatedFactor","scroller","graph","widget","container","target","global","document","mousewheelHandle","MouseWheelHandle","onMouseWheel","bind","allowMouseWheel","enabled","enable","disabled","force","mousewheel","disable","evt","e","originalEvent","guard","call","isMatch","modifiers","factor","currentScale","startPos","x","clientX","y","clientY","zoom","transform","getScale","sx","delta","deltaY","Math","round","max","min","targetScale","clampScale","minScale","Number","MIN_SAFE_INTEGER","maxScale","MAX_SAFE_INTEGER","clamp","zoomAtMousePosition","origin","coord","clientToLocalPoint","absolute","center","clone","clientToGraphPoint","ui","dispose","__decorate"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/x6/src/graph/mousewheel.ts"],"sourcesContent":["import { Graph } from './graph'\nimport { ModifierKey } from '../types'\nimport { Dom, NumberExt } from '../util'\nimport { Disposable, IDisablable } from '../common'\n\nexport class MouseWheel extends Disposable implements IDisablable {\n  public readonly target: HTMLElement | Document\n  public readonly container: HTMLElement\n\n  protected cumulatedFactor = 1\n  protected currentScale: number | null\n  protected startPos: { x: number; y: number }\n\n  private mousewheelHandle: Dom.MouseWheelHandle\n\n  protected get graph() {\n    return this.options.graph\n  }\n\n  constructor(public readonly options: MouseWheel.Options) {\n    super()\n\n    const scroller = this.graph.scroller.widget\n    this.container = scroller ? scroller.container : this.graph.container\n    this.target = this.options.global ? document : this.container\n    this.mousewheelHandle = new Dom.MouseWheelHandle(\n      this.target,\n      this.onMouseWheel.bind(this),\n      this.allowMouseWheel.bind(this),\n    )\n    if (this.options.enabled) {\n      this.enable(true)\n    }\n  }\n\n  get disabled() {\n    return this.options.enabled !== true\n  }\n\n  enable(force?: boolean) {\n    if (this.disabled || force) {\n      this.options.enabled = true\n      this.graph.options.mousewheel.enabled = true\n      this.mousewheelHandle.enable()\n    }\n  }\n\n  disable() {\n    if (!this.disabled) {\n      this.options.enabled = false\n      this.graph.options.mousewheel.enabled = false\n      this.mousewheelHandle.disable()\n    }\n  }\n\n  protected allowMouseWheel(evt: JQueryMousewheel.JQueryMousewheelEventObject) {\n    const e = (evt.originalEvent || evt) as WheelEvent\n    const guard = this.options.guard\n\n    return (\n      (guard == null || guard.call(this.graph, e)) &&\n      ModifierKey.isMatch(e, this.options.modifiers)\n    )\n  }\n\n  protected onMouseWheel(evt: JQueryMousewheel.JQueryMousewheelEventObject) {\n    const e = (evt.originalEvent || evt) as WheelEvent\n    const guard = this.options.guard\n\n    if (\n      (guard == null || guard.call(this.graph, e)) &&\n      ModifierKey.isMatch(e, this.options.modifiers)\n    ) {\n      const factor = this.options.factor || 1.2\n\n      if (this.currentScale == null) {\n        this.startPos = { x: evt.clientX, y: evt.clientY }\n        this.currentScale = this.graph.scroller.widget\n          ? this.graph.scroller.widget.zoom()\n          : this.graph.transform.getScale().sx\n      }\n\n      const delta = evt.deltaY\n      if (delta < 0) {\n        // zoomin\n        // ------\n        // Switches to 1% zoom steps below 15%\n        if (this.currentScale < 0.15) {\n          this.cumulatedFactor = (this.currentScale + 0.01) / this.currentScale\n        } else {\n          // Uses to 5% zoom steps for better grid rendering in\n          // webkit and to avoid rounding errors for zoom steps\n          this.cumulatedFactor =\n            Math.round(this.currentScale * factor * 20) / 20 / this.currentScale\n        }\n      } else {\n        // zoomout\n        // -------\n        // Switches to 1% zoom steps below 15%\n        if (this.currentScale <= 0.15) {\n          this.cumulatedFactor = (this.currentScale - 0.01) / this.currentScale\n        } else {\n          // Uses to 5% zoom steps for better grid rendering in\n          // webkit and to avoid rounding errors for zoom steps\n          this.cumulatedFactor =\n            Math.round(this.currentScale * (1 / factor) * 20) /\n            20 /\n            this.currentScale\n        }\n      }\n\n      this.cumulatedFactor = Math.max(\n        0.01,\n        Math.min(this.currentScale * this.cumulatedFactor, 160) /\n          this.currentScale,\n      )\n\n      const scroller = this.graph.scroller.widget\n      const currentScale = this.currentScale!\n      let targetScale = this.graph.transform.clampScale(\n        currentScale * this.cumulatedFactor,\n      )\n      const minScale = this.options.minScale || Number.MIN_SAFE_INTEGER\n      const maxScale = this.options.maxScale || Number.MAX_SAFE_INTEGER\n      targetScale = NumberExt.clamp(targetScale, minScale, maxScale)\n\n      if (targetScale !== currentScale) {\n        if (scroller) {\n          if (this.options.zoomAtMousePosition) {\n            const origin = this.graph.coord.clientToLocalPoint(this.startPos)\n            scroller.zoom(targetScale, {\n              absolute: true,\n              center: origin.clone(),\n            })\n          } else {\n            scroller.zoom(targetScale, { absolute: true })\n          }\n        } else {\n          if (this.options.zoomAtMousePosition) {\n            const origin = this.graph.coord.clientToGraphPoint(this.startPos)\n            this.graph.transform.zoom(targetScale, {\n              absolute: true,\n              center: origin.clone(),\n              ui: true,\n            })\n          } else {\n            this.graph.transform.zoom(targetScale, { absolute: true, ui: true })\n          }\n        }\n      }\n      this.currentScale = null\n      this.cumulatedFactor = 1\n    }\n  }\n\n  @Disposable.dispose()\n  dispose() {\n    this.disable()\n  }\n}\n\nexport namespace MouseWheel {\n  export interface Options {\n    graph: Graph\n    enabled?: boolean\n    global?: boolean\n    factor?: number\n    minScale?: number\n    maxScale?: number\n    modifiers?: string | ModifierKey[] | null\n    guard?: (this: Graph, e: WheelEvent) => boolean\n    zoomAtMousePosition?: boolean\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}