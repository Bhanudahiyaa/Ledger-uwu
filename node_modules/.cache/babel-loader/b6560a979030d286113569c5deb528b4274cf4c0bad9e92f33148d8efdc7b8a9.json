{"ast":null,"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\nimport { DisposableCollection, Disposable } from '../../common/disposable';\nimport { HookConfig } from '../config';\nimport { singleton, inject } from 'mana-syringe';\nimport { IHookContribution } from '../interface';\nexport var NsGraphEventPlugin;\n(function (NsGraphEventPlugin) {\n  NsGraphEventPlugin.pluginId = 'GraphEventPlugin';\n})(NsGraphEventPlugin || (NsGraphEventPlugin = {}));\n/**\n * 内置的hook contribution\n * 处理 config上的runtime的注册项\n */\nlet RuntimeContribution = class RuntimeContribution {\n  constructor() {\n    this.toDispose = new DisposableCollection();\n    this.registerHook = hooks => __awaiter(this, void 0, void 0, function* () {\n      const {\n        hookRegisterFn\n      } = yield this.hookConfig.getConfig();\n      const d = hookRegisterFn(hooks);\n      return Disposable.create(() => {\n        d.dispose();\n      });\n    });\n    this.registerHookHub = registry => __awaiter(this, void 0, void 0, function* () {\n      const {\n        hookhubRegisterFn\n      } = yield this.hookConfig.getConfig();\n      const d = hookhubRegisterFn(registry);\n      return Disposable.create(() => {\n        d.dispose();\n      });\n    });\n  }\n};\n__decorate([inject(HookConfig), __metadata(\"design:type\", HookConfig)], RuntimeContribution.prototype, \"hookConfig\", void 0);\nRuntimeContribution = __decorate([singleton({\n  contrib: IHookContribution\n})], RuntimeContribution);\nexport { RuntimeContribution };","map":{"version":3,"names":["DisposableCollection","Disposable","HookConfig","singleton","inject","IHookContribution","NsGraphEventPlugin","pluginId","RuntimeContribution","constructor","toDispose","registerHook","hooks","__awaiter","hookRegisterFn","hookConfig","getConfig","d","create","dispose","registerHookHub","registry","hookhubRegisterFn","__decorate","contrib"],"sources":["../../../src/hooks/contributions/default.ts"],"sourcesContent":[null],"mappings":";AAAA,SAASA,oBAAoB,EAAEC,UAAU,QAAQ,yBAAyB;AAC1E,SAASC,UAAU,QAAQ,WAAW;AAEtC,SAASC,SAAS,EAAEC,MAAM,QAAQ,cAAc;AAEhD,SAASC,iBAAiB,QAAQ,cAAc;AAChD,OAAM,IAAWC,kBAAkB;AAAnC,WAAiBA,kBAAkB;EACpBA,kBAAA,CAAAC,QAAQ,GAAG,kBAAkB;AAC5C,CAAC,EAFgBD,kBAAkB,KAAlBA,kBAAkB;AAInC;;;;AAKO,IAAME,mBAAmB,GAAzB,MAAMA,mBAAmB;EAAzBC,YAAA;IACL,KAAAC,SAAS,GAAG,IAAIV,oBAAoB,EAAE;IAKtC,KAAAW,YAAY,GAASC,KAAK,IAAGC,SAAA;MAC3B,MAAM;QAAEC;MAAc,CAAE,GAAG,MAAM,IAAI,CAACC,UAAU,CAACC,SAAS,EAAE;MAC5D,MAAMC,CAAC,GAAGH,cAAc,CAACF,KAAK,CAAC;MAC/B,OAAOX,UAAU,CAACiB,MAAM,CAAC,MAAK;QAC5BD,CAAC,CAACE,OAAO,EAAE;MACb,CAAC,CAAC;IACJ,CAAC;IAED,KAAAC,eAAe,GAAUC,QAA8B,IAAIR,SAAA;MACzD,MAAM;QAAES;MAAiB,CAAE,GAAG,MAAM,IAAI,CAACP,UAAU,CAACC,SAAS,EAAE;MAC/D,MAAMC,CAAC,GAAGK,iBAAiB,CAACD,QAAQ,CAAC;MACrC,OAAOpB,UAAU,CAACiB,MAAM,CAAC,MAAK;QAC5BD,CAAC,CAACE,OAAO,EAAE;MACb,CAAC,CAAC;IACJ,CAAC;EACH;CAAC;AAjBCI,UAAA,EAACnB,MAAM,CAACF,UAAU,CAAC,E,0BAAaA,UAAU,E,sDAAA;AAJ/BM,mBAAmB,GAAAe,UAAA,EAD/BpB,SAAS,CAAC;EAAEqB,OAAO,EAAEnB;AAAiB,CAAE,CAAC,C,EAC7BG,mBAAmB,CAqB/B;SArBYA,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}