{"ast":null,"code":"import { uniqueId } from '@antv/util';\nimport { HeatmapLayer as Heatmap } from '@antv/l7';\nimport { PlotLayer } from '../../core/layer/plot-layer';\nimport { mappingLayer } from './adaptor';\nconst DEFAULT_OPTIONS = {\n  source: {\n    data: [],\n    parser: {\n      type: 'json',\n      x: 'x',\n      y: 'y'\n    },\n    aggregation: {\n      type: 'hexagon',\n      field: '',\n      radius: 15000,\n      method: 'sum'\n    }\n  },\n  shape: 'hexagon',\n  color: '#5FD3A6',\n  style: {\n    coverage: 0.9,\n    angle: 0,\n    opacity: 1.0\n  }\n};\nconst LAYER_OPTIONS_KEYS = ['shape', 'color', 'size', 'style', 'state'];\nexport class HexbinLayer extends PlotLayer {\n  constructor(options) {\n    super(options);\n    /**\n     * 图层类型\n     */\n    this.type = PlotLayer.LayerType.HexbinLayer;\n    /**\n     * 图层是否具有交互属性\n     */\n    this.interaction = false;\n    const {\n      name,\n      source\n    } = this.options;\n    const config = this.pickLayerConfig(this.options);\n    this.name = name ? name : uniqueId(this.type);\n    this.layer = new Heatmap(Object.assign(Object.assign({}, config), {\n      name: this.name\n    }));\n    this.mappingLayer(this.layer, this.options);\n    this.setSource(source);\n  }\n  /**\n   * 获取默认配置\n   */\n  getDefaultOptions() {\n    return DEFAULT_OPTIONS;\n  }\n  mappingLayer(layer, options) {\n    mappingLayer(layer, options);\n  }\n  update(options) {\n    super.update(options);\n    this.mappingLayer(this.layer, this.options);\n  }\n}\n/**\n * 默认配置项\n */\nHexbinLayer.DefaultOptions = DEFAULT_OPTIONS;\n/**\n * 图层配置项 Keys\n */\nHexbinLayer.LayerOptionsKeys = PlotLayer.LayerConfigkeys.concat(LAYER_OPTIONS_KEYS);","map":{"version":3,"names":["uniqueId","HeatmapLayer","Heatmap","PlotLayer","mappingLayer","DEFAULT_OPTIONS","source","data","parser","type","x","y","aggregation","field","radius","method","shape","color","style","coverage","angle","opacity","LAYER_OPTIONS_KEYS","HexbinLayer","constructor","options","LayerType","interaction","name","config","pickLayerConfig","layer","Object","assign","setSource","getDefaultOptions","update","DefaultOptions","LayerOptionsKeys","LayerConfigkeys","concat"],"sources":["../../../../src/layers/hexbin-layer/index.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,QAAQ,QAAQ,YAAY;AACrC,SAASC,YAAY,IAAIC,OAAO,QAAQ,UAAU;AAClD,SAASC,SAAS,QAAQ,6BAA6B;AACvD,SAASC,YAAY,QAAQ,WAAW;AAMxC,MAAMC,eAAe,GAAuB;EAC1CC,MAAM,EAAE;IACNC,IAAI,EAAE,EAAE;IACRC,MAAM,EAAE;MACNC,IAAI,EAAE,MAAM;MACZC,CAAC,EAAE,GAAG;MACNC,CAAC,EAAE;KACJ;IACDC,WAAW,EAAE;MACXH,IAAI,EAAE,SAAS;MACfI,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE;;GAEX;EACDC,KAAK,EAAE,SAAS;EAChBC,KAAK,EAAE,SAAS;EAChBC,KAAK,EAAE;IACLC,QAAQ,EAAE,GAAG;IACbC,KAAK,EAAE,CAAC;IACRC,OAAO,EAAE;;CAEZ;AACD,MAAMC,kBAAkB,GAAG,CAAC,OAAO,EAAE,OAAO,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC;AAEvE,OAAM,MAAOC,WAAY,SAAQpB,SAA6B;EA0B5DqB,YAAYC,OAA2B;IACrC,KAAK,CAACA,OAAO,CAAC;IAVhB;;;IAGO,KAAAhB,IAAI,GAAGN,SAAS,CAACuB,SAAS,CAACH,WAAW;IAC7C;;;IAGO,KAAAI,WAAW,GAAG,KAAK;IAIxB,MAAM;MAAEC,IAAI;MAAEtB;IAAM,CAAE,GAAG,IAAI,CAACmB,OAAO;IACrC,MAAMI,MAAM,GAAG,IAAI,CAACC,eAAe,CAAC,IAAI,CAACL,OAAO,CAAC;IAEjD,IAAI,CAACG,IAAI,GAAGA,IAAI,GAAGA,IAAI,GAAG5B,QAAQ,CAAC,IAAI,CAACS,IAAI,CAAC;IAC7C,IAAI,CAACsB,KAAK,GAAG,IAAI7B,OAAO,CAAA8B,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAMJ,MAAM;MAAED,IAAI,EAAE,IAAI,CAACA;IAAI,GAAG;IAExD,IAAI,CAACxB,YAAY,CAAC,IAAI,CAAC2B,KAAK,EAAE,IAAI,CAACN,OAAO,CAAC;IAC3C,IAAI,CAACS,SAAS,CAAC5B,MAAM,CAAC;EACxB;EAEA;;;EAGO6B,iBAAiBA,CAAA;IACtB,OAAO9B,eAAe;EACxB;EAEUD,YAAYA,CAAC2B,KAAa,EAAEN,OAA2B;IAC/DrB,YAAY,CAAC2B,KAAK,EAAEN,OAAO,CAAC;EAC9B;EAEOW,MAAMA,CAACX,OAAoC;IAChD,KAAK,CAACW,MAAM,CAACX,OAAO,CAAC;IAErB,IAAI,CAACrB,YAAY,CAAC,IAAI,CAAC2B,KAAK,EAAE,IAAI,CAACN,OAAO,CAAC;EAC7C;;AApDA;;;AAGOF,WAAA,CAAAc,cAAc,GAAGhC,eAAe;AACvC;;;AAGOkB,WAAA,CAAAe,gBAAgB,GAAGnC,SAAS,CAACoC,eAAe,CAACC,MAAM,CAAClB,kBAAkB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}