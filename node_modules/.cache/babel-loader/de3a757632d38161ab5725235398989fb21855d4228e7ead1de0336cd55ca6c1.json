{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { rgb2arr } from '@antv/l7-utils';\nimport BaseModel from \"../../core/BaseModel\";\nimport { polygonTriangulation } from \"../../core/triangulation\";\n/* babel-plugin-inline-import '../../shader/minify_frag.glsl' */\nconst mask_frag = \"layout(std140) uniform commonUniorm {\\n  vec4 u_color;\\n  float u_opacity;\\n};\\n\\nout vec4 outputColor;\\n\\nvoid main() {\\n  outputColor = u_color;\\n  outputColor.a *= u_opacity;\\n}\\n\";\n/* babel-plugin-inline-import '../shaders/mask_vert.glsl' */\nconst mask_vert = \"layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\\n\\nlayout(std140) uniform commonUniorm {\\n  vec4 u_color;\\n  float u_opacity;\\n};\\n\\n#pragma include \\\"projection\\\"\\n\\nvoid main() {\\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\\n}\\n\\n\";\nexport default class MaskModel extends BaseModel {\n  getUninforms() {\n    const commoninfo = this.getCommonUniformsInfo();\n    const attributeInfo = this.getUniformsBufferInfo(this.getStyleAttribute());\n    this.updateStyleUnifoms();\n    return _objectSpread(_objectSpread({}, commoninfo.uniformsOption), attributeInfo.uniformsOption);\n  }\n  getCommonUniformsInfo() {\n    const {\n      opacity = 1,\n      color = '#000'\n    } = this.layer.getLayerConfig();\n    const commonOptions = {\n      u_color: rgb2arr(color),\n      u_opacity: opacity || 1\n    };\n    const commonBufferInfo = this.getUniformsBufferInfo(commonOptions);\n    return commonBufferInfo;\n  }\n  initModels() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      return _this.buildModels();\n    })();\n  }\n  buildModels() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.initUniformsBuffer();\n      const model = yield _this2.layer.buildLayerModel({\n        moduleName: 'mask',\n        vertexShader: mask_vert,\n        fragmentShader: mask_frag,\n        defines: _this2.getDefines(),\n        triangulation: polygonTriangulation,\n        depth: {\n          enable: false\n        },\n        pick: false\n      });\n      return [model];\n    })();\n  }\n  clearModels(refresh = true) {\n    if (refresh) {\n      this.layerService.clear();\n    }\n  }\n  registerBuiltinAttributes() {\n    return '';\n  }\n}","map":{"version":3,"names":["_asyncToGenerator","_objectSpread","rgb2arr","BaseModel","polygonTriangulation","mask_frag","mask_vert","MaskModel","getUninforms","commoninfo","getCommonUniformsInfo","attributeInfo","getUniformsBufferInfo","getStyleAttribute","updateStyleUnifoms","uniformsOption","opacity","color","layer","getLayerConfig","commonOptions","u_color","u_opacity","commonBufferInfo","initModels","_this","buildModels","_this2","initUniformsBuffer","model","buildLayerModel","moduleName","vertexShader","fragmentShader","defines","getDefines","triangulation","depth","enable","pick","clearModels","refresh","layerService","clear","registerBuiltinAttributes"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-layers/es/mask/models/fill.js"],"sourcesContent":["import _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { rgb2arr } from '@antv/l7-utils';\nimport BaseModel from \"../../core/BaseModel\";\nimport { polygonTriangulation } from \"../../core/triangulation\";\n/* babel-plugin-inline-import '../../shader/minify_frag.glsl' */\nconst mask_frag = \"layout(std140) uniform commonUniorm {\\n  vec4 u_color;\\n  float u_opacity;\\n};\\n\\nout vec4 outputColor;\\n\\nvoid main() {\\n  outputColor = u_color;\\n  outputColor.a *= u_opacity;\\n}\\n\";\n/* babel-plugin-inline-import '../shaders/mask_vert.glsl' */\nconst mask_vert = \"layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;\\n\\nlayout(std140) uniform commonUniorm {\\n  vec4 u_color;\\n  float u_opacity;\\n};\\n\\n#pragma include \\\"projection\\\"\\n\\nvoid main() {\\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\\n}\\n\\n\";\nexport default class MaskModel extends BaseModel {\n  getUninforms() {\n    const commoninfo = this.getCommonUniformsInfo();\n    const attributeInfo = this.getUniformsBufferInfo(this.getStyleAttribute());\n    this.updateStyleUnifoms();\n    return _objectSpread(_objectSpread({}, commoninfo.uniformsOption), attributeInfo.uniformsOption);\n  }\n  getCommonUniformsInfo() {\n    const {\n      opacity = 1,\n      color = '#000'\n    } = this.layer.getLayerConfig();\n    const commonOptions = {\n      u_color: rgb2arr(color),\n      u_opacity: opacity || 1\n    };\n    const commonBufferInfo = this.getUniformsBufferInfo(commonOptions);\n    return commonBufferInfo;\n  }\n  initModels() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      return _this.buildModels();\n    })();\n  }\n  buildModels() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.initUniformsBuffer();\n      const model = yield _this2.layer.buildLayerModel({\n        moduleName: 'mask',\n        vertexShader: mask_vert,\n        fragmentShader: mask_frag,\n        defines: _this2.getDefines(),\n        triangulation: polygonTriangulation,\n        depth: {\n          enable: false\n        },\n        pick: false\n      });\n      return [model];\n    })();\n  }\n  clearModels(refresh = true) {\n    if (refresh) {\n      this.layerService.clear();\n    }\n  }\n  registerBuiltinAttributes() {\n    return '';\n  }\n}"],"mappings":"AAAA,OAAOA,iBAAiB,MAAM,6CAA6C;AAC3E,OAAOC,aAAa,MAAM,0CAA0C;AACpE,SAASC,OAAO,QAAQ,gBAAgB;AACxC,OAAOC,SAAS,MAAM,sBAAsB;AAC5C,SAASC,oBAAoB,QAAQ,0BAA0B;AAC/D;AACA,MAAMC,SAAS,GAAG,wLAAwL;AAC1M;AACA,MAAMC,SAAS,GAAG,kWAAkW;AACpX,eAAe,MAAMC,SAAS,SAASJ,SAAS,CAAC;EAC/CK,YAAYA,CAAA,EAAG;IACb,MAAMC,UAAU,GAAG,IAAI,CAACC,qBAAqB,CAAC,CAAC;IAC/C,MAAMC,aAAa,GAAG,IAAI,CAACC,qBAAqB,CAAC,IAAI,CAACC,iBAAiB,CAAC,CAAC,CAAC;IAC1E,IAAI,CAACC,kBAAkB,CAAC,CAAC;IACzB,OAAOb,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAEQ,UAAU,CAACM,cAAc,CAAC,EAAEJ,aAAa,CAACI,cAAc,CAAC;EAClG;EACAL,qBAAqBA,CAAA,EAAG;IACtB,MAAM;MACJM,OAAO,GAAG,CAAC;MACXC,KAAK,GAAG;IACV,CAAC,GAAG,IAAI,CAACC,KAAK,CAACC,cAAc,CAAC,CAAC;IAC/B,MAAMC,aAAa,GAAG;MACpBC,OAAO,EAAEnB,OAAO,CAACe,KAAK,CAAC;MACvBK,SAAS,EAAEN,OAAO,IAAI;IACxB,CAAC;IACD,MAAMO,gBAAgB,GAAG,IAAI,CAACX,qBAAqB,CAACQ,aAAa,CAAC;IAClE,OAAOG,gBAAgB;EACzB;EACAC,UAAUA,CAAA,EAAG;IACX,IAAIC,KAAK,GAAG,IAAI;IAChB,OAAOzB,iBAAiB,CAAC,aAAa;MACpC,OAAOyB,KAAK,CAACC,WAAW,CAAC,CAAC;IAC5B,CAAC,CAAC,CAAC,CAAC;EACN;EACAA,WAAWA,CAAA,EAAG;IACZ,IAAIC,MAAM,GAAG,IAAI;IACjB,OAAO3B,iBAAiB,CAAC,aAAa;MACpC2B,MAAM,CAACC,kBAAkB,CAAC,CAAC;MAC3B,MAAMC,KAAK,GAAG,MAAMF,MAAM,CAACT,KAAK,CAACY,eAAe,CAAC;QAC/CC,UAAU,EAAE,MAAM;QAClBC,YAAY,EAAE1B,SAAS;QACvB2B,cAAc,EAAE5B,SAAS;QACzB6B,OAAO,EAAEP,MAAM,CAACQ,UAAU,CAAC,CAAC;QAC5BC,aAAa,EAAEhC,oBAAoB;QACnCiC,KAAK,EAAE;UACLC,MAAM,EAAE;QACV,CAAC;QACDC,IAAI,EAAE;MACR,CAAC,CAAC;MACF,OAAO,CAACV,KAAK,CAAC;IAChB,CAAC,CAAC,CAAC,CAAC;EACN;EACAW,WAAWA,CAACC,OAAO,GAAG,IAAI,EAAE;IAC1B,IAAIA,OAAO,EAAE;MACX,IAAI,CAACC,YAAY,CAACC,KAAK,CAAC,CAAC;IAC3B;EACF;EACAC,yBAAyBA,CAAA,EAAG;IAC1B,OAAO,EAAE;EACX;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}