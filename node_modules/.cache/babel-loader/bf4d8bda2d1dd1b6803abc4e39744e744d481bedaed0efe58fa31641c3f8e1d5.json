{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { CancellationToken, cancelled } from './cancellation';\nimport { Deferred } from './deferred';\n/**\n * @returns resolves after a specified number of milliseconds\n * @throws cancelled if a given token is cancelled before a specified number of milliseconds\n */\n\nexport function timeout(ms, token = CancellationToken.None) {\n  const deferred = new Deferred();\n  const handle = setTimeout(() => deferred.resolve(), ms);\n  token.onCancellationRequested(() => {\n    clearTimeout(handle);\n    deferred.reject(cancelled());\n  });\n  return deferred.promise;\n}\nexport async function retry(task, delay, retries) {\n  let lastError;\n  for (let i = 0; i < retries; i += 1) {\n    try {\n      // eslint-disable-next-line no-await-in-loop\n      return await task();\n    } catch (error) {\n      lastError = error; // eslint-disable-next-line no-await-in-loop\n\n      await timeout(delay);\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-throw-literal\n\n  throw lastError;\n}","map":{"version":3,"names":["CancellationToken","cancelled","Deferred","timeout","ms","token","None","deferred","handle","setTimeout","resolve","onCancellationRequested","clearTimeout","reject","promise","retry","task","delay","retries","lastError","i","error"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/mana-common/es/promise-util.js"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { CancellationToken, cancelled } from './cancellation';\nimport { Deferred } from './deferred';\n/**\n * @returns resolves after a specified number of milliseconds\n * @throws cancelled if a given token is cancelled before a specified number of milliseconds\n */\n\nexport function timeout(ms, token = CancellationToken.None) {\n  const deferred = new Deferred();\n  const handle = setTimeout(() => deferred.resolve(), ms);\n  token.onCancellationRequested(() => {\n    clearTimeout(handle);\n    deferred.reject(cancelled());\n  });\n  return deferred.promise;\n}\nexport async function retry(task, delay, retries) {\n  let lastError;\n\n  for (let i = 0; i < retries; i += 1) {\n    try {\n      // eslint-disable-next-line no-await-in-loop\n      return await task();\n    } catch (error) {\n      lastError = error; // eslint-disable-next-line no-await-in-loop\n\n      await timeout(delay);\n    }\n  } // eslint-disable-next-line @typescript-eslint/no-throw-literal\n\n\n  throw lastError;\n}"],"mappings":"AAAA;AACA,SAASA,iBAAiB,EAAEC,SAAS,QAAQ,gBAAgB;AAC7D,SAASC,QAAQ,QAAQ,YAAY;AACrC;AACA;AACA;AACA;;AAEA,OAAO,SAASC,OAAOA,CAACC,EAAE,EAAEC,KAAK,GAAGL,iBAAiB,CAACM,IAAI,EAAE;EAC1D,MAAMC,QAAQ,GAAG,IAAIL,QAAQ,CAAC,CAAC;EAC/B,MAAMM,MAAM,GAAGC,UAAU,CAAC,MAAMF,QAAQ,CAACG,OAAO,CAAC,CAAC,EAAEN,EAAE,CAAC;EACvDC,KAAK,CAACM,uBAAuB,CAAC,MAAM;IAClCC,YAAY,CAACJ,MAAM,CAAC;IACpBD,QAAQ,CAACM,MAAM,CAACZ,SAAS,CAAC,CAAC,CAAC;EAC9B,CAAC,CAAC;EACF,OAAOM,QAAQ,CAACO,OAAO;AACzB;AACA,OAAO,eAAeC,KAAKA,CAACC,IAAI,EAAEC,KAAK,EAAEC,OAAO,EAAE;EAChD,IAAIC,SAAS;EAEb,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,OAAO,EAAEE,CAAC,IAAI,CAAC,EAAE;IACnC,IAAI;MACF;MACA,OAAO,MAAMJ,IAAI,CAAC,CAAC;IACrB,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdF,SAAS,GAAGE,KAAK,CAAC,CAAC;;MAEnB,MAAMlB,OAAO,CAACc,KAAK,CAAC;IACtB;EACF,CAAC,CAAC;;EAGF,MAAME,SAAS;AACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}