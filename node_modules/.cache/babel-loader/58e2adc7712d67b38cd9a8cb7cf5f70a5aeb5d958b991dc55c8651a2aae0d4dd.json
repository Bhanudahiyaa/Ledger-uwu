{"ast":null,"code":"import { getJudgeFunction } from '../fn';\nimport { normalizeWheel } from './normalizeWheel';\nimport { requestAnimationFrame } from './animationFrame';\nexport class WheelHandler {\n  constructor(options) {\n    this.onWheel = e => {\n      const normalizedEvent = normalizeWheel(e);\n      const {\n        pixelX,\n        pixelY\n      } = normalizedEvent;\n      const deltaX = this.deltaX + pixelX;\n      const deltaY = this.deltaY + pixelY;\n      const handleScrollX = this.shouldHandleScrollX(deltaX, deltaY);\n      const handleScrollY = this.shouldHandleScrollY(deltaY, deltaX);\n      if (!handleScrollX && !handleScrollY) {\n        return;\n      }\n      this.deltaX += handleScrollX ? pixelX : 0;\n      this.deltaY += handleScrollY ? pixelY : 0;\n      let changed;\n      if (this.deltaX !== 0 || this.deltaY !== 0) {\n        if (this.stopPropagation()) {\n          e.stopPropagation();\n        }\n        changed = true;\n      }\n      if (changed === true && this.animationFrameID == null) {\n        this.animationFrameID = requestAnimationFrame(this.didWheel);\n      }\n    };\n    this.didWheel = () => {\n      this.animationFrameID = null;\n      if (this.callback) {\n        this.callback(this.deltaX, this.deltaY);\n      }\n      this.deltaX = 0;\n      this.deltaY = 0;\n    };\n    this.callback = options.onWheel;\n    this.stopPropagation = getJudgeFunction(options.stopPropagation);\n    this.shouldHandleScrollX = getJudgeFunction(options.shouldHandleScrollX);\n    this.shouldHandleScrollY = getJudgeFunction(options.shouldHandleScrollY);\n    this.deltaX = 0;\n    this.deltaY = 0;\n  }\n}","map":{"version":3,"names":["getJudgeFunction","normalizeWheel","requestAnimationFrame","WheelHandler","constructor","options","onWheel","e","normalizedEvent","pixelX","pixelY","deltaX","deltaY","handleScrollX","shouldHandleScrollX","handleScrollY","shouldHandleScrollY","changed","stopPropagation","animationFrameID","didWheel","callback"],"sources":["../../../src/util/dom/WheelHandler.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,OAAO;AACxC,SAASC,cAAc,QAAQ,kBAAkB;AACjD,SAASC,qBAAqB,QAAQ,kBAAkB;AAExD,OAAM,MAAOC,YAAY;EAevBC,YAAYC,OAA6B;IASzC,KAAAC,OAAO,GAAIC,CAAmB,IAAI;MAChC,MAAMC,eAAe,GAAGP,cAAc,CAACM,CAAC,CAAC;MACzC,MAAM;QAAEE,MAAM;QAAEC;MAAM,CAAE,GAAGF,eAAe;MAC1C,MAAMG,MAAM,GAAG,IAAI,CAACA,MAAM,GAAGF,MAAM;MACnC,MAAMG,MAAM,GAAG,IAAI,CAACA,MAAM,GAAGF,MAAM;MACnC,MAAMG,aAAa,GAAG,IAAI,CAACC,mBAAmB,CAACH,MAAM,EAAEC,MAAM,CAAC;MAC9D,MAAMG,aAAa,GAAG,IAAI,CAACC,mBAAmB,CAACJ,MAAM,EAAED,MAAM,CAAC;MAE9D,IAAI,CAACE,aAAa,IAAI,CAACE,aAAa,EAAE;QACpC;;MAGF,IAAI,CAACJ,MAAM,IAAIE,aAAa,GAAGJ,MAAM,GAAG,CAAC;MACzC,IAAI,CAACG,MAAM,IAAIG,aAAa,GAAGL,MAAM,GAAG,CAAC;MAEzC,IAAIO,OAAO;MACX,IAAI,IAAI,CAACN,MAAM,KAAK,CAAC,IAAI,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;QAC1C,IAAI,IAAI,CAACM,eAAe,EAAE,EAAE;UAC1BX,CAAC,CAACW,eAAe,EAAE;;QAErBD,OAAO,GAAG,IAAI;;MAGhB,IAAIA,OAAO,KAAK,IAAI,IAAI,IAAI,CAACE,gBAAgB,IAAI,IAAI,EAAE;QACrD,IAAI,CAACA,gBAAgB,GAAGjB,qBAAqB,CAAC,IAAI,CAACkB,QAAQ,CAAC;;IAEhE,CAAC;IAEO,KAAAA,QAAQ,GAAG,MAAK;MACtB,IAAI,CAACD,gBAAgB,GAAG,IAAI;MAC5B,IAAI,IAAI,CAACE,QAAQ,EAAE;QACjB,IAAI,CAACA,QAAQ,CAAC,IAAI,CAACV,MAAM,EAAE,IAAI,CAACC,MAAM,CAAC;;MAEzC,IAAI,CAACD,MAAM,GAAG,CAAC;MACf,IAAI,CAACC,MAAM,GAAG,CAAC;IACjB,CAAC;IA3CC,IAAI,CAACS,QAAQ,GAAGhB,OAAO,CAACC,OAAO;IAC/B,IAAI,CAACY,eAAe,GAAGlB,gBAAgB,CAACK,OAAO,CAACa,eAAe,CAAC;IAChE,IAAI,CAACJ,mBAAmB,GAAGd,gBAAgB,CAACK,OAAO,CAACS,mBAAmB,CAAC;IACxE,IAAI,CAACE,mBAAmB,GAAGhB,gBAAgB,CAACK,OAAO,CAACW,mBAAmB,CAAC;IACxE,IAAI,CAACL,MAAM,GAAG,CAAC;IACf,IAAI,CAACC,MAAM,GAAG,CAAC;EACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}