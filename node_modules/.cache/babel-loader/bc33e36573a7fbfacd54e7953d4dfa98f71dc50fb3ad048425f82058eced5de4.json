{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { DOM, anchorTranslate, anchorType, applyAnchorClass } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nimport { createL7Icon } from \"../utils/icon\";\nexport { Popup };\nexport default class Popup extends EventEmitter {\n  get lngLat() {\n    var _this$popupOption$lng;\n    return (_this$popupOption$lng = this.popupOption.lngLat) !== null && _this$popupOption$lng !== void 0 ? _this$popupOption$lng : {\n      lng: 0,\n      lat: 0\n    };\n  }\n  set lngLat(newLngLat) {\n    this.popupOption.lngLat = newLngLat;\n  }\n  constructor(cfg) {\n    super();\n    /**\n     * 配置\n     * @protected\n     */\n    _defineProperty(this, \"popupOption\", void 0);\n    _defineProperty(this, \"mapsService\", void 0);\n    _defineProperty(this, \"sceneService\", void 0);\n    _defineProperty(this, \"layerService\", void 0);\n    _defineProperty(this, \"scene\", void 0);\n    /**\n     * 关闭按钮对应的 DOM\n     * @protected\n     */\n    _defineProperty(this, \"closeButton\", void 0);\n    /**\n     * Popup 的总容器 DOM，包含 content 和 tip\n     * @protected\n     */\n    _defineProperty(this, \"container\", void 0);\n    /**\n     * popup 气泡容器\n     * @protected\n     */\n    _defineProperty(this, \"content\", void 0);\n    /**\n     * popup 气泡标题\n     * @protected\n     */\n    _defineProperty(this, \"contentTitle\", void 0);\n    /**\n     * popup 内容容器\n     * @protected\n     */\n    _defineProperty(this, \"contentPanel\", void 0);\n    /**\n     * 气泡箭头对应的 DOM\n     * @protected\n     */\n    _defineProperty(this, \"tip\", void 0);\n    /**\n     * 当前是否展示\n     * @protected\n     */\n    _defineProperty(this, \"isShow\", true);\n    _defineProperty(this, \"onMouseMove\", e => {\n      var _container$getBoundin;\n      const container = this.mapsService.getMapContainer();\n      const {\n        left = 0,\n        top = 0\n      } = (_container$getBoundin = container === null || container === void 0 ? void 0 : container.getBoundingClientRect()) !== null && _container$getBoundin !== void 0 ? _container$getBoundin : {};\n      this.setPopupPosition(e.clientX - left, e.clientY - top);\n    });\n    /**\n     * 将经纬度转换成对应的像素偏移位置\n     * @protected\n     */\n    _defineProperty(this, \"updateLngLatPosition\", () => {\n      if (!this.mapsService || this.popupOption.followCursor) {\n        return;\n      }\n      const {\n        lng,\n        lat\n      } = this.lngLat;\n      const {\n        x,\n        y\n      } = this.mapsService.lngLatToContainer([lng, lat]);\n      this.setPopupPosition(x, y);\n    });\n    //zoom时计算PopUp的位置并更新\n    _defineProperty(this, \"updateLngLatPositionWhenZoom\", ev => {\n      if (!this.mapsService || this.popupOption.followCursor) {\n        return;\n      }\n      const map = ev.map;\n      const viewHalf = map.getSize();\n      viewHalf.x = viewHalf.x / 2;\n      viewHalf.y = viewHalf.y / 2;\n      const center = ev.center;\n      const zoom = ev.zoom;\n      const projectedCenter = map.DE(this.lngLat, zoom, center);\n      projectedCenter.x = Math.round(projectedCenter.x);\n      projectedCenter.y = Math.round(projectedCenter.y);\n      this.setPopupPosition(projectedCenter.x, projectedCenter.y, true);\n    });\n    _defineProperty(this, \"onKeyDown\", e => {\n      if (e.keyCode === 27) {\n        this.remove();\n      }\n    });\n    _defineProperty(this, \"onCloseButtonClick\", e => {\n      if (e.stopPropagation) {\n        e.stopPropagation();\n      }\n      this.hide();\n    });\n    //更新位置 支持zoom时更新\n    _defineProperty(this, \"updatePosition\", (ev, zoom = true) => {\n      const hasPosition = !!this.lngLat;\n      const {\n        className,\n        style,\n        maxWidth,\n        anchor,\n        stopPropagation\n      } = this.popupOption;\n      if (!this.mapsService || !hasPosition || !this.content) {\n        return;\n      }\n      const popupContainer = this.mapsService.getMarkerContainer();\n      // 如果当前没有创建 Popup 容器则创建\n      if (!this.container && popupContainer) {\n        this.container = DOM.create('div', `l7-popup ${className !== null && className !== void 0 ? className : ''} ${!this.isShow ? 'l7-popup-hide' : ''}`, popupContainer);\n        if (style) {\n          this.container.setAttribute('style', style);\n        }\n        this.tip = DOM.create('div', 'l7-popup-tip', this.container);\n        this.container.appendChild(this.content);\n\n        // 高德地图需要阻止事件冒泡 // 测试mapbox 地图不需要添加\n        if (stopPropagation) {\n          ['mousemove', 'mousedown', 'mouseup', 'click', 'dblclick'].forEach(type => {\n            this.container.addEventListener(type, e => {\n              e.stopPropagation();\n            });\n          });\n        }\n        this.container.style.whiteSpace = 'nowrap';\n      }\n      if (zoom) {\n        this.updateLngLatPositionWhenZoom(ev);\n      } else {\n        this.updateLngLatPosition();\n      }\n      DOM.setTransform(this.container, `${anchorTranslate[anchor]}`);\n      applyAnchorClass(this.container, anchor, 'popup');\n      if (maxWidth) {\n        const {\n          width\n        } = this.container.getBoundingClientRect();\n        if (width > parseFloat(maxWidth)) {\n          this.container.style.width = maxWidth;\n        }\n      } else {\n        this.container.style.removeProperty('width');\n      }\n    });\n    _defineProperty(this, \"updateWhenZoom\", ev => {\n      this.updatePosition(ev, true);\n    });\n    _defineProperty(this, \"update\", () => {\n      this.updatePosition(null, false);\n    });\n    this.popupOption = _objectSpread(_objectSpread({}, this.getDefault(cfg !== null && cfg !== void 0 ? cfg : {})), cfg);\n    const {\n      lngLat\n    } = this.popupOption;\n    if (lngLat) {\n      this.lngLat = lngLat;\n    }\n  }\n  getIsShow() {\n    return this.isShow;\n  }\n  addTo(scene) {\n    this.mapsService = scene.mapService;\n    this.sceneService = scene.sceneService;\n    this.layerService = scene.layerService;\n    //天地图仅监听zoomchange 不注册camerachane,对于平移,在mapsService中实现\n    // this.mapsService.on('zoomchange', this.updateWhenZoom);\n    this.mapsService.on('camerachange', this.update);\n    this.mapsService.on('viewchange', this.update);\n    this.scene = scene;\n    this.update();\n    // 临时关闭\n    this.updateCloseOnClick();\n    this.updateCloseOnEsc();\n    this.updateFollowCursor();\n    const {\n      html,\n      text,\n      title\n    } = this.popupOption;\n    if (html) {\n      this.setHTML(html);\n    } else if (text) {\n      this.setText(text);\n    }\n    if (title) {\n      this.setTitle(title);\n    }\n    this.emit('open');\n    return this;\n  }\n\n  // 移除popup\n  remove() {\n    if (!(this !== null && this !== void 0 && this.isOpen())) {\n      return;\n    }\n    if (this.content) {\n      DOM.remove(this.content);\n    }\n    if (this.container) {\n      DOM.remove(this.container);\n      // @ts-ignore\n      delete this.container;\n    }\n    if (this.mapsService) {\n      // TODO: mapbox AMap 事件同步\n      this.mapsService.off('camerachange', this.update);\n      this.mapsService.off('viewchange', this.update);\n      //天地图的缩放事件\n      // this.mapsService.off('zoomchange', this.updateWhenZoom);\n      this.updateCloseOnClick(true);\n      this.updateCloseOnEsc(true);\n      this.updateFollowCursor(true);\n      // @ts-ignore\n      delete this.mapsService;\n    }\n    this.emit('close');\n    return this;\n  }\n\n  /**\n   * 获取 option 配置\n   */\n  getOptions() {\n    return this.popupOption;\n  }\n  setOptions(option) {\n    this.show();\n    const {\n      className: oldClassName\n    } = this.popupOption;\n    this.popupOption = _objectSpread(_objectSpread({}, this.popupOption), option);\n    if (this.checkUpdateOption(option, ['html', 'text', 'title', 'closeButton', 'closeButtonOffsets', 'maxWidth', 'anchor', 'stopPropagation', 'lngLat', 'offsets'])) {\n      if (this.container) {\n        DOM.remove(this.container);\n        // @ts-ignore\n        this.container = undefined;\n      }\n      if (this.popupOption.html) {\n        this.setHTML(this.popupOption.html);\n      } else if (this.popupOption.text) {\n        this.setText(this.popupOption.text);\n      }\n      if (this.popupOption.title) {\n        this.setTitle(this.popupOption.title);\n      }\n    }\n    if (this.checkUpdateOption(option, ['closeOnEsc'])) {\n      this.updateCloseOnEsc();\n    }\n    if (this.checkUpdateOption(option, ['closeOnClick'])) {\n      this.updateCloseOnClick();\n    }\n    if (this.checkUpdateOption(option, ['followCursor'])) {\n      this.updateFollowCursor();\n    }\n    if (this.checkUpdateOption(option, ['html']) && option.html) {\n      this.setHTML(option.html);\n    } else if (this.checkUpdateOption(option, ['text']) && option.text) {\n      this.setText(option.text);\n    }\n    if (this.checkUpdateOption(option, ['className'])) {\n      var _option$className;\n      if (oldClassName) {\n        this.container.classList.remove(oldClassName !== null && oldClassName !== void 0 ? oldClassName : '');\n      }\n      this.container.classList.add((_option$className = option.className) !== null && _option$className !== void 0 ? _option$className : '');\n    }\n    if (this.checkUpdateOption(option, ['style'])) {\n      var _option$style;\n      DOM.addStyle(this.container, (_option$style = option.style) !== null && _option$style !== void 0 ? _option$style : '');\n    }\n    if (this.checkUpdateOption(option, ['lngLat']) && option.lngLat) {\n      this.setLnglat(option.lngLat);\n    }\n    return this;\n  }\n  open() {\n    this.addTo(this.scene);\n    return this;\n  }\n  close() {\n    this.remove();\n    return this;\n  }\n  show() {\n    if (this.isShow) {\n      return;\n    }\n    if (this.container) {\n      DOM.removeClass(this.container, 'l7-popup-hide');\n    }\n    this.isShow = true;\n    this.emit('show');\n    return this;\n  }\n  hide() {\n    if (!this.isShow) {\n      return;\n    }\n    if (this.container) {\n      DOM.addClass(this.container, 'l7-popup-hide');\n    }\n    this.isShow = false;\n    this.emit('hide');\n    return this;\n  }\n\n  /**\n   * 设置 HTML 内容\n   * @param html\n   */\n  setHTML(html) {\n    this.popupOption.html = html;\n    return this.setDOMContent(html);\n  }\n\n  /**\n   * 设置 Popup 展示文本\n   * @param text\n   */\n  setText(text) {\n    this.popupOption.text = text;\n    return this.setDOMContent(window.document.createTextNode(text));\n  }\n  setTitle(title) {\n    this.show();\n    this.popupOption.title = title;\n    if (title) {\n      if (!this.contentTitle) {\n        this.contentTitle = DOM.create('div', 'l7-popup-content__title');\n        if (this.content.firstChild) {\n          this.content.insertBefore(this.contentTitle, this.content.firstChild);\n        } else {\n          this.content.append(this.contentTitle);\n        }\n      }\n      DOM.clearChildren(this.contentTitle);\n      DOM.appendElementType(this.contentTitle, title);\n    } else if (this.contentTitle) {\n      DOM.remove(this.contentTitle);\n      this.contentTitle = undefined;\n    }\n  }\n\n  /**\n   * 将地图自动平移到气泡位置\n   */\n  panToPopup() {\n    const {\n      lng,\n      lat\n    } = this.lngLat;\n    if (this.popupOption.autoPan) {\n      this.mapsService.panTo([lng, lat]);\n    }\n    return this;\n  }\n  setLngLat(lngLat) {\n    return this.setLnglat(lngLat);\n  }\n\n  /**\n   * 设置 Popup 所在经纬度\n   * @param lngLat\n   */\n  setLnglat(lngLat) {\n    this.show();\n    this.lngLat = lngLat;\n    if (Array.isArray(lngLat)) {\n      this.lngLat = {\n        lng: lngLat[0],\n        lat: lngLat[1]\n      };\n    }\n    if (this.mapsService) {\n      // 防止事件重复监听\n      // this.mapsService.off('zoonanim', this.updateWhenZoom);\n      this.mapsService.off('camerachange', this.update);\n      this.mapsService.off('viewchange', this.update);\n\n      // this.mapsService.on('zoonanim', this.updateWhenZoom);\n      this.mapsService.on('camerachange', this.update);\n      this.mapsService.on('viewchange', this.update);\n    }\n    this.update();\n    if (this.popupOption.autoPan) {\n      setTimeout(() => {\n        this.panToPopup();\n      }, 0);\n    }\n    return this;\n  }\n\n  /**\n   * 获取 Popup 所在经纬度\n   */\n  getLnglat() {\n    return this.lngLat;\n  }\n\n  /**\n   * 设置 Popup 最大宽度\n   * @param maxWidth\n   */\n  setMaxWidth(maxWidth) {\n    this.popupOption.maxWidth = maxWidth;\n    this.update();\n    return this;\n  }\n  isOpen() {\n    return !!this.mapsService;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getDefault(option) {\n    // tslint:disable-next-line:no-object-literal-type-assertion\n    return {\n      closeButton: true,\n      closeOnClick: false,\n      maxWidth: '240px',\n      offsets: [0, 0],\n      anchor: anchorType.BOTTOM,\n      stopPropagation: true,\n      autoPan: false,\n      autoClose: true,\n      closeOnEsc: false,\n      followCursor: false\n    };\n  }\n\n  /**\n   * 设置 Popup 内容 HTML\n   * @param element\n   */\n  setDOMContent(element) {\n    this.show();\n    this.createContent();\n    DOM.appendElementType(this.contentPanel, element);\n    this.update();\n    return this;\n  }\n\n  /**\n   * 绑定地图点击事件触发销毁 Popup\n   * @protected\n   */\n  updateCloseOnClick(onlyClear) {\n    const mapsService = this.mapsService;\n    if (mapsService) {\n      mapsService === null || mapsService === void 0 || mapsService.off('click', this.onCloseButtonClick);\n      if (this.popupOption.closeOnClick && !onlyClear) {\n        requestAnimationFrame(() => {\n          mapsService === null || mapsService === void 0 || mapsService.on('click', this.onCloseButtonClick);\n        });\n      }\n    }\n  }\n  updateCloseOnEsc(onlyClear) {\n    window.removeEventListener('keydown', this.onKeyDown);\n    if (this.popupOption.closeOnEsc && !onlyClear) {\n      window.addEventListener('keydown', this.onKeyDown);\n    }\n  }\n  updateFollowCursor(onlyClear) {\n    var _this$mapsService;\n    const container = (_this$mapsService = this.mapsService) === null || _this$mapsService === void 0 ? void 0 : _this$mapsService.getContainer();\n    if (container) {\n      container === null || container === void 0 || container.removeEventListener('mousemove', this.onMouseMove);\n      if (this.popupOption.followCursor && !onlyClear) {\n        container === null || container === void 0 || container.addEventListener('mousemove', this.onMouseMove);\n      }\n    }\n  }\n  /**\n   * 创建 Popup 内容容器的 DOM （在每次 setHTML 或 setText 时都会被调用）\n   * @protected\n   */\n  createContent() {\n    if (this.content) {\n      DOM.remove(this.content);\n    }\n    this.contentTitle = undefined;\n    this.content = DOM.create('div', 'l7-popup-content', this.container);\n    this.setTitle(this.popupOption.title);\n    if (this.popupOption.closeButton) {\n      const closeButton = createL7Icon('l7-icon-guanbi');\n      DOM.addClass(closeButton, 'l7-popup-close-button');\n      this.content.appendChild(closeButton);\n      if (this.popupOption.closeButtonOffsets) {\n        // 关闭按钮的偏移\n        closeButton.style.right = this.popupOption.closeButtonOffsets[0] + 'px';\n        closeButton.style.top = this.popupOption.closeButtonOffsets[1] + 'px';\n      }\n\n      // this.closeButton.type = 'button';\n      closeButton.setAttribute('aria-label', 'Close popup');\n      closeButton.addEventListener('click', () => {\n        this.hide();\n      });\n\n      // 防止点击 Popup 关闭按钮时，触发 Layer click 事件\n      closeButton.addEventListener('pointerup', e => {\n        e.stopPropagation();\n      });\n      closeButton.addEventListener('pointerdown', e => {\n        e.stopPropagation();\n      });\n      this.closeButton = closeButton;\n    } else {\n      this.closeButton = undefined;\n    }\n    this.contentPanel = DOM.create('div', 'l7-popup-content__panel', this.content);\n  }\n  /**\n   * 设置 Popup 相对于地图容器的 Position\n   * @param {Number} left\n   * @param {Number} top\n   * @param {Boolean} [useTransition=false] 是否使用过度效果\n   * @protected\n   */\n  setPopupPosition(left, top, useTransition = false) {\n    if (this.container) {\n      const {\n        offsets\n      } = this.popupOption;\n      this.container.style.left = left + offsets[0] + 'px';\n      this.container.style.top = top - offsets[1] + 'px';\n      if (useTransition) {\n        this.container.style.transition = 'left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)';\n      } else {\n        this.container.style.transition = '';\n      }\n    }\n  }\n\n  /**\n   * 检查当前传入 option 是否包含 keys 字段\n   * @param option\n   * @param keys\n   * @protected\n   */\n  checkUpdateOption(option, keys) {\n    return keys.some(key => key in option);\n  }\n}","map":{"version":3,"names":["_objectSpread","_defineProperty","DOM","anchorTranslate","anchorType","applyAnchorClass","EventEmitter","createL7Icon","Popup","lngLat","_this$popupOption$lng","popupOption","lng","lat","newLngLat","constructor","cfg","e","_container$getBoundin","container","mapsService","getMapContainer","left","top","getBoundingClientRect","setPopupPosition","clientX","clientY","followCursor","x","y","lngLatToContainer","ev","map","viewHalf","getSize","center","zoom","projectedCenter","DE","Math","round","keyCode","remove","stopPropagation","hide","hasPosition","className","style","maxWidth","anchor","content","popupContainer","getMarkerContainer","create","isShow","setAttribute","tip","appendChild","forEach","type","addEventListener","whiteSpace","updateLngLatPositionWhenZoom","updateLngLatPosition","setTransform","width","parseFloat","removeProperty","updatePosition","getDefault","getIsShow","addTo","scene","mapService","sceneService","layerService","on","update","updateCloseOnClick","updateCloseOnEsc","updateFollowCursor","html","text","title","setHTML","setText","setTitle","emit","isOpen","off","getOptions","setOptions","option","show","oldClassName","checkUpdateOption","undefined","_option$className","classList","add","_option$style","addStyle","setLnglat","open","close","removeClass","addClass","setDOMContent","window","document","createTextNode","contentTitle","firstChild","insertBefore","append","clearChildren","appendElementType","panToPopup","autoPan","panTo","setLngLat","Array","isArray","setTimeout","getLnglat","setMaxWidth","closeButton","closeOnClick","offsets","BOTTOM","autoClose","closeOnEsc","element","createContent","contentPanel","onlyClear","onCloseButtonClick","requestAnimationFrame","removeEventListener","onKeyDown","_this$mapsService","getContainer","onMouseMove","closeButtonOffsets","right","useTransition","transition","keys","some","key"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-component/es/popup/popup.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { DOM, anchorTranslate, anchorType, applyAnchorClass } from '@antv/l7-utils';\nimport { EventEmitter } from 'eventemitter3';\nimport { createL7Icon } from \"../utils/icon\";\nexport { Popup };\nexport default class Popup extends EventEmitter {\n  get lngLat() {\n    var _this$popupOption$lng;\n    return (_this$popupOption$lng = this.popupOption.lngLat) !== null && _this$popupOption$lng !== void 0 ? _this$popupOption$lng : {\n      lng: 0,\n      lat: 0\n    };\n  }\n  set lngLat(newLngLat) {\n    this.popupOption.lngLat = newLngLat;\n  }\n  constructor(cfg) {\n    super();\n    /**\n     * 配置\n     * @protected\n     */\n    _defineProperty(this, \"popupOption\", void 0);\n    _defineProperty(this, \"mapsService\", void 0);\n    _defineProperty(this, \"sceneService\", void 0);\n    _defineProperty(this, \"layerService\", void 0);\n    _defineProperty(this, \"scene\", void 0);\n    /**\n     * 关闭按钮对应的 DOM\n     * @protected\n     */\n    _defineProperty(this, \"closeButton\", void 0);\n    /**\n     * Popup 的总容器 DOM，包含 content 和 tip\n     * @protected\n     */\n    _defineProperty(this, \"container\", void 0);\n    /**\n     * popup 气泡容器\n     * @protected\n     */\n    _defineProperty(this, \"content\", void 0);\n    /**\n     * popup 气泡标题\n     * @protected\n     */\n    _defineProperty(this, \"contentTitle\", void 0);\n    /**\n     * popup 内容容器\n     * @protected\n     */\n    _defineProperty(this, \"contentPanel\", void 0);\n    /**\n     * 气泡箭头对应的 DOM\n     * @protected\n     */\n    _defineProperty(this, \"tip\", void 0);\n    /**\n     * 当前是否展示\n     * @protected\n     */\n    _defineProperty(this, \"isShow\", true);\n    _defineProperty(this, \"onMouseMove\", e => {\n      var _container$getBoundin;\n      const container = this.mapsService.getMapContainer();\n      const {\n        left = 0,\n        top = 0\n      } = (_container$getBoundin = container === null || container === void 0 ? void 0 : container.getBoundingClientRect()) !== null && _container$getBoundin !== void 0 ? _container$getBoundin : {};\n      this.setPopupPosition(e.clientX - left, e.clientY - top);\n    });\n    /**\n     * 将经纬度转换成对应的像素偏移位置\n     * @protected\n     */\n    _defineProperty(this, \"updateLngLatPosition\", () => {\n      if (!this.mapsService || this.popupOption.followCursor) {\n        return;\n      }\n      const {\n        lng,\n        lat\n      } = this.lngLat;\n      const {\n        x,\n        y\n      } = this.mapsService.lngLatToContainer([lng, lat]);\n      this.setPopupPosition(x, y);\n    });\n    //zoom时计算PopUp的位置并更新\n    _defineProperty(this, \"updateLngLatPositionWhenZoom\", ev => {\n      if (!this.mapsService || this.popupOption.followCursor) {\n        return;\n      }\n      const map = ev.map;\n      const viewHalf = map.getSize();\n      viewHalf.x = viewHalf.x / 2;\n      viewHalf.y = viewHalf.y / 2;\n      const center = ev.center;\n      const zoom = ev.zoom;\n      const projectedCenter = map.DE(this.lngLat, zoom, center);\n      projectedCenter.x = Math.round(projectedCenter.x);\n      projectedCenter.y = Math.round(projectedCenter.y);\n      this.setPopupPosition(projectedCenter.x, projectedCenter.y, true);\n    });\n    _defineProperty(this, \"onKeyDown\", e => {\n      if (e.keyCode === 27) {\n        this.remove();\n      }\n    });\n    _defineProperty(this, \"onCloseButtonClick\", e => {\n      if (e.stopPropagation) {\n        e.stopPropagation();\n      }\n      this.hide();\n    });\n    //更新位置 支持zoom时更新\n    _defineProperty(this, \"updatePosition\", (ev, zoom = true) => {\n      const hasPosition = !!this.lngLat;\n      const {\n        className,\n        style,\n        maxWidth,\n        anchor,\n        stopPropagation\n      } = this.popupOption;\n      if (!this.mapsService || !hasPosition || !this.content) {\n        return;\n      }\n      const popupContainer = this.mapsService.getMarkerContainer();\n      // 如果当前没有创建 Popup 容器则创建\n      if (!this.container && popupContainer) {\n        this.container = DOM.create('div', `l7-popup ${className !== null && className !== void 0 ? className : ''} ${!this.isShow ? 'l7-popup-hide' : ''}`, popupContainer);\n        if (style) {\n          this.container.setAttribute('style', style);\n        }\n        this.tip = DOM.create('div', 'l7-popup-tip', this.container);\n        this.container.appendChild(this.content);\n\n        // 高德地图需要阻止事件冒泡 // 测试mapbox 地图不需要添加\n        if (stopPropagation) {\n          ['mousemove', 'mousedown', 'mouseup', 'click', 'dblclick'].forEach(type => {\n            this.container.addEventListener(type, e => {\n              e.stopPropagation();\n            });\n          });\n        }\n        this.container.style.whiteSpace = 'nowrap';\n      }\n      if (zoom) {\n        this.updateLngLatPositionWhenZoom(ev);\n      } else {\n        this.updateLngLatPosition();\n      }\n      DOM.setTransform(this.container, `${anchorTranslate[anchor]}`);\n      applyAnchorClass(this.container, anchor, 'popup');\n      if (maxWidth) {\n        const {\n          width\n        } = this.container.getBoundingClientRect();\n        if (width > parseFloat(maxWidth)) {\n          this.container.style.width = maxWidth;\n        }\n      } else {\n        this.container.style.removeProperty('width');\n      }\n    });\n    _defineProperty(this, \"updateWhenZoom\", ev => {\n      this.updatePosition(ev, true);\n    });\n    _defineProperty(this, \"update\", () => {\n      this.updatePosition(null, false);\n    });\n    this.popupOption = _objectSpread(_objectSpread({}, this.getDefault(cfg !== null && cfg !== void 0 ? cfg : {})), cfg);\n    const {\n      lngLat\n    } = this.popupOption;\n    if (lngLat) {\n      this.lngLat = lngLat;\n    }\n  }\n  getIsShow() {\n    return this.isShow;\n  }\n  addTo(scene) {\n    this.mapsService = scene.mapService;\n    this.sceneService = scene.sceneService;\n    this.layerService = scene.layerService;\n    //天地图仅监听zoomchange 不注册camerachane,对于平移,在mapsService中实现\n    // this.mapsService.on('zoomchange', this.updateWhenZoom);\n    this.mapsService.on('camerachange', this.update);\n    this.mapsService.on('viewchange', this.update);\n    this.scene = scene;\n    this.update();\n    // 临时关闭\n    this.updateCloseOnClick();\n    this.updateCloseOnEsc();\n    this.updateFollowCursor();\n    const {\n      html,\n      text,\n      title\n    } = this.popupOption;\n    if (html) {\n      this.setHTML(html);\n    } else if (text) {\n      this.setText(text);\n    }\n    if (title) {\n      this.setTitle(title);\n    }\n    this.emit('open');\n    return this;\n  }\n\n  // 移除popup\n  remove() {\n    if (!(this !== null && this !== void 0 && this.isOpen())) {\n      return;\n    }\n    if (this.content) {\n      DOM.remove(this.content);\n    }\n    if (this.container) {\n      DOM.remove(this.container);\n      // @ts-ignore\n      delete this.container;\n    }\n    if (this.mapsService) {\n      // TODO: mapbox AMap 事件同步\n      this.mapsService.off('camerachange', this.update);\n      this.mapsService.off('viewchange', this.update);\n      //天地图的缩放事件\n      // this.mapsService.off('zoomchange', this.updateWhenZoom);\n      this.updateCloseOnClick(true);\n      this.updateCloseOnEsc(true);\n      this.updateFollowCursor(true);\n      // @ts-ignore\n      delete this.mapsService;\n    }\n    this.emit('close');\n    return this;\n  }\n\n  /**\n   * 获取 option 配置\n   */\n  getOptions() {\n    return this.popupOption;\n  }\n  setOptions(option) {\n    this.show();\n    const {\n      className: oldClassName\n    } = this.popupOption;\n    this.popupOption = _objectSpread(_objectSpread({}, this.popupOption), option);\n    if (this.checkUpdateOption(option, ['html', 'text', 'title', 'closeButton', 'closeButtonOffsets', 'maxWidth', 'anchor', 'stopPropagation', 'lngLat', 'offsets'])) {\n      if (this.container) {\n        DOM.remove(this.container);\n        // @ts-ignore\n        this.container = undefined;\n      }\n      if (this.popupOption.html) {\n        this.setHTML(this.popupOption.html);\n      } else if (this.popupOption.text) {\n        this.setText(this.popupOption.text);\n      }\n      if (this.popupOption.title) {\n        this.setTitle(this.popupOption.title);\n      }\n    }\n    if (this.checkUpdateOption(option, ['closeOnEsc'])) {\n      this.updateCloseOnEsc();\n    }\n    if (this.checkUpdateOption(option, ['closeOnClick'])) {\n      this.updateCloseOnClick();\n    }\n    if (this.checkUpdateOption(option, ['followCursor'])) {\n      this.updateFollowCursor();\n    }\n    if (this.checkUpdateOption(option, ['html']) && option.html) {\n      this.setHTML(option.html);\n    } else if (this.checkUpdateOption(option, ['text']) && option.text) {\n      this.setText(option.text);\n    }\n    if (this.checkUpdateOption(option, ['className'])) {\n      var _option$className;\n      if (oldClassName) {\n        this.container.classList.remove(oldClassName !== null && oldClassName !== void 0 ? oldClassName : '');\n      }\n      this.container.classList.add((_option$className = option.className) !== null && _option$className !== void 0 ? _option$className : '');\n    }\n    if (this.checkUpdateOption(option, ['style'])) {\n      var _option$style;\n      DOM.addStyle(this.container, (_option$style = option.style) !== null && _option$style !== void 0 ? _option$style : '');\n    }\n    if (this.checkUpdateOption(option, ['lngLat']) && option.lngLat) {\n      this.setLnglat(option.lngLat);\n    }\n    return this;\n  }\n  open() {\n    this.addTo(this.scene);\n    return this;\n  }\n  close() {\n    this.remove();\n    return this;\n  }\n  show() {\n    if (this.isShow) {\n      return;\n    }\n    if (this.container) {\n      DOM.removeClass(this.container, 'l7-popup-hide');\n    }\n    this.isShow = true;\n    this.emit('show');\n    return this;\n  }\n  hide() {\n    if (!this.isShow) {\n      return;\n    }\n    if (this.container) {\n      DOM.addClass(this.container, 'l7-popup-hide');\n    }\n    this.isShow = false;\n    this.emit('hide');\n    return this;\n  }\n\n  /**\n   * 设置 HTML 内容\n   * @param html\n   */\n  setHTML(html) {\n    this.popupOption.html = html;\n    return this.setDOMContent(html);\n  }\n\n  /**\n   * 设置 Popup 展示文本\n   * @param text\n   */\n  setText(text) {\n    this.popupOption.text = text;\n    return this.setDOMContent(window.document.createTextNode(text));\n  }\n  setTitle(title) {\n    this.show();\n    this.popupOption.title = title;\n    if (title) {\n      if (!this.contentTitle) {\n        this.contentTitle = DOM.create('div', 'l7-popup-content__title');\n        if (this.content.firstChild) {\n          this.content.insertBefore(this.contentTitle, this.content.firstChild);\n        } else {\n          this.content.append(this.contentTitle);\n        }\n      }\n      DOM.clearChildren(this.contentTitle);\n      DOM.appendElementType(this.contentTitle, title);\n    } else if (this.contentTitle) {\n      DOM.remove(this.contentTitle);\n      this.contentTitle = undefined;\n    }\n  }\n\n  /**\n   * 将地图自动平移到气泡位置\n   */\n  panToPopup() {\n    const {\n      lng,\n      lat\n    } = this.lngLat;\n    if (this.popupOption.autoPan) {\n      this.mapsService.panTo([lng, lat]);\n    }\n    return this;\n  }\n  setLngLat(lngLat) {\n    return this.setLnglat(lngLat);\n  }\n\n  /**\n   * 设置 Popup 所在经纬度\n   * @param lngLat\n   */\n  setLnglat(lngLat) {\n    this.show();\n    this.lngLat = lngLat;\n    if (Array.isArray(lngLat)) {\n      this.lngLat = {\n        lng: lngLat[0],\n        lat: lngLat[1]\n      };\n    }\n    if (this.mapsService) {\n      // 防止事件重复监听\n      // this.mapsService.off('zoonanim', this.updateWhenZoom);\n      this.mapsService.off('camerachange', this.update);\n      this.mapsService.off('viewchange', this.update);\n\n      // this.mapsService.on('zoonanim', this.updateWhenZoom);\n      this.mapsService.on('camerachange', this.update);\n      this.mapsService.on('viewchange', this.update);\n    }\n    this.update();\n    if (this.popupOption.autoPan) {\n      setTimeout(() => {\n        this.panToPopup();\n      }, 0);\n    }\n    return this;\n  }\n\n  /**\n   * 获取 Popup 所在经纬度\n   */\n  getLnglat() {\n    return this.lngLat;\n  }\n\n  /**\n   * 设置 Popup 最大宽度\n   * @param maxWidth\n   */\n  setMaxWidth(maxWidth) {\n    this.popupOption.maxWidth = maxWidth;\n    this.update();\n    return this;\n  }\n  isOpen() {\n    return !!this.mapsService;\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  getDefault(option) {\n    // tslint:disable-next-line:no-object-literal-type-assertion\n    return {\n      closeButton: true,\n      closeOnClick: false,\n      maxWidth: '240px',\n      offsets: [0, 0],\n      anchor: anchorType.BOTTOM,\n      stopPropagation: true,\n      autoPan: false,\n      autoClose: true,\n      closeOnEsc: false,\n      followCursor: false\n    };\n  }\n\n  /**\n   * 设置 Popup 内容 HTML\n   * @param element\n   */\n  setDOMContent(element) {\n    this.show();\n    this.createContent();\n    DOM.appendElementType(this.contentPanel, element);\n    this.update();\n    return this;\n  }\n\n  /**\n   * 绑定地图点击事件触发销毁 Popup\n   * @protected\n   */\n  updateCloseOnClick(onlyClear) {\n    const mapsService = this.mapsService;\n    if (mapsService) {\n      mapsService === null || mapsService === void 0 || mapsService.off('click', this.onCloseButtonClick);\n      if (this.popupOption.closeOnClick && !onlyClear) {\n        requestAnimationFrame(() => {\n          mapsService === null || mapsService === void 0 || mapsService.on('click', this.onCloseButtonClick);\n        });\n      }\n    }\n  }\n  updateCloseOnEsc(onlyClear) {\n    window.removeEventListener('keydown', this.onKeyDown);\n    if (this.popupOption.closeOnEsc && !onlyClear) {\n      window.addEventListener('keydown', this.onKeyDown);\n    }\n  }\n  updateFollowCursor(onlyClear) {\n    var _this$mapsService;\n    const container = (_this$mapsService = this.mapsService) === null || _this$mapsService === void 0 ? void 0 : _this$mapsService.getContainer();\n    if (container) {\n      container === null || container === void 0 || container.removeEventListener('mousemove', this.onMouseMove);\n      if (this.popupOption.followCursor && !onlyClear) {\n        container === null || container === void 0 || container.addEventListener('mousemove', this.onMouseMove);\n      }\n    }\n  }\n  /**\n   * 创建 Popup 内容容器的 DOM （在每次 setHTML 或 setText 时都会被调用）\n   * @protected\n   */\n  createContent() {\n    if (this.content) {\n      DOM.remove(this.content);\n    }\n    this.contentTitle = undefined;\n    this.content = DOM.create('div', 'l7-popup-content', this.container);\n    this.setTitle(this.popupOption.title);\n    if (this.popupOption.closeButton) {\n      const closeButton = createL7Icon('l7-icon-guanbi');\n      DOM.addClass(closeButton, 'l7-popup-close-button');\n      this.content.appendChild(closeButton);\n      if (this.popupOption.closeButtonOffsets) {\n        // 关闭按钮的偏移\n        closeButton.style.right = this.popupOption.closeButtonOffsets[0] + 'px';\n        closeButton.style.top = this.popupOption.closeButtonOffsets[1] + 'px';\n      }\n\n      // this.closeButton.type = 'button';\n      closeButton.setAttribute('aria-label', 'Close popup');\n      closeButton.addEventListener('click', () => {\n        this.hide();\n      });\n\n      // 防止点击 Popup 关闭按钮时，触发 Layer click 事件\n      closeButton.addEventListener('pointerup', e => {\n        e.stopPropagation();\n      });\n      closeButton.addEventListener('pointerdown', e => {\n        e.stopPropagation();\n      });\n      this.closeButton = closeButton;\n    } else {\n      this.closeButton = undefined;\n    }\n    this.contentPanel = DOM.create('div', 'l7-popup-content__panel', this.content);\n  }\n  /**\n   * 设置 Popup 相对于地图容器的 Position\n   * @param {Number} left\n   * @param {Number} top\n   * @param {Boolean} [useTransition=false] 是否使用过度效果\n   * @protected\n   */\n  setPopupPosition(left, top, useTransition = false) {\n    if (this.container) {\n      const {\n        offsets\n      } = this.popupOption;\n      this.container.style.left = left + offsets[0] + 'px';\n      this.container.style.top = top - offsets[1] + 'px';\n      if (useTransition) {\n        this.container.style.transition = 'left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)';\n      } else {\n        this.container.style.transition = '';\n      }\n    }\n  }\n\n  /**\n   * 检查当前传入 option 是否包含 keys 字段\n   * @param option\n   * @param keys\n   * @protected\n   */\n  checkUpdateOption(option, keys) {\n    return keys.some(key => key in option);\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}