{"ast":null,"code":"import { pick, isUndefined } from '@antv/util';\nimport * as topojson from 'topojson-client';\nimport { GEO_AREA_URL } from './constants';\nexport const getGeoAreaConfig = geoArea => {\n  const config = {\n    url: GEO_AREA_URL,\n    type: 'topojson',\n    extension: 'topo.json'\n  };\n  if (isUndefined(geoArea)) return config;\n  if (typeof geoArea === 'string') {\n    config.url = geoArea;\n  } else {\n    config.url = (geoArea === null || geoArea === void 0 ? void 0 : geoArea.url) || GEO_AREA_URL;\n    config.type = geoArea.type;\n    config.extension = geoArea.type === 'topojson' ? 'topo.json' : 'json';\n  }\n  return config;\n};\nexport const topojson2geojson = json => {\n  try {\n    const geojson = topojson.feature(json, 'json');\n    return geojson;\n  } catch (err) {\n    throw new Error('Failed convert to geojson from topojson, topojson default layer name \"json\"');\n  }\n};\nexport const isEqualDrillSteps = (newSteps, oldSteps) => {\n  if (newSteps.length !== oldSteps.length) {\n    return false;\n  }\n  for (let index = 0; index < newSteps.length; index++) {\n    const {\n      level,\n      granularity\n    } = newSteps[index];\n    if (oldSteps[index].level !== level || oldSteps[index].granularity !== granularity) {\n      return false;\n    }\n  }\n  return true;\n};\nexport const getDrillStepDefaultConfig = options => {\n  const config = pick(options, ['source', 'color', 'style', 'state', 'label', 'tooltip']);\n  return config;\n};","map":{"version":3,"names":["pick","isUndefined","topojson","GEO_AREA_URL","getGeoAreaConfig","geoArea","config","url","type","extension","topojson2geojson","json","geojson","feature","err","Error","isEqualDrillSteps","newSteps","oldSteps","length","index","level","granularity","getDrillStepDefaultConfig","options"],"sources":["../../../../src/plots/choropleth/helper.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,IAAI,EAAEC,WAAW,QAAQ,YAAY;AAC9C,OAAO,KAAKC,QAAQ,MAAM,iBAAiB;AAE3C,SAASC,YAAY,QAAQ,aAAa;AAG1C,OAAO,MAAMC,gBAAgB,GAAIC,OAAsC,IAAI;EACzE,MAAMC,MAAM,GAAG;IAAEC,GAAG,EAAEJ,YAAY;IAAEK,IAAI,EAAE,UAAU;IAAEC,SAAS,EAAE;EAAW,CAAE;EAC9E,IAAIR,WAAW,CAACI,OAAO,CAAC,EAAE,OAAOC,MAAM;EACvC,IAAI,OAAOD,OAAO,KAAK,QAAQ,EAAE;IAC/BC,MAAM,CAACC,GAAG,GAAGF,OAAO;EACtB,CAAC,MAAM;IACLC,MAAM,CAACC,GAAG,GAAG,CAAAF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEE,GAAG,KAAIJ,YAAY;IACzCG,MAAM,CAACE,IAAI,GAAGH,OAAO,CAACG,IAAI;IAC1BF,MAAM,CAACG,SAAS,GAAGJ,OAAO,CAACG,IAAI,KAAK,UAAU,GAAG,WAAW,GAAG,MAAM;EACvE;EACA,OAAOF,MAAM;AACf,CAAC;AAED,OAAO,MAAMI,gBAAgB,GAAIC,IAAc,IAAI;EACjD,IAAI;IACF,MAAMC,OAAO,GAAGV,QAAQ,CAACW,OAAO,CAACF,IAAI,EAAE,MAAM,CAAC;IAC9C,OAAOC,OAAO;EAChB,CAAC,CAAC,OAAOE,GAAG,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,6EAA6E,CAAC;EAChG;AACF,CAAC;AAED,OAAO,MAAMC,iBAAiB,GAAGA,CAACC,QAAqB,EAAEC,QAAqB,KAAI;EAChF,IAAID,QAAQ,CAACE,MAAM,KAAKD,QAAQ,CAACC,MAAM,EAAE;IACvC,OAAO,KAAK;EACd;EAEA,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGH,QAAQ,CAACE,MAAM,EAAEC,KAAK,EAAE,EAAE;IACpD,MAAM;MAAEC,KAAK;MAAEC;IAAW,CAAE,GAAGL,QAAQ,CAACG,KAAK,CAAC;IAC9C,IAAIF,QAAQ,CAACE,KAAK,CAAC,CAACC,KAAK,KAAKA,KAAK,IAAIH,QAAQ,CAACE,KAAK,CAAC,CAACE,WAAW,KAAKA,WAAW,EAAE;MAClF,OAAO,KAAK;IACd;EACF;EAEA,OAAO,IAAI;AACb,CAAC;AAED,OAAO,MAAMC,yBAAyB,GAAIC,OAA0B,IAAI;EACtE,MAAMlB,MAAM,GAAGN,IAAI,CAAMwB,OAAO,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,SAAS,CAAC,CAAoB;EAE/G,OAAOlB,MAAM;AACf,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}