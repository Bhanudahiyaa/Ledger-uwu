{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/initializerWarningHelper\";\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _class, _class2, _descriptor, _descriptor2, _descriptor3, _descriptor4, _temp;\nimport { inject, injectable, named } from 'inversify';\nimport { IDENTIFIER } from '../../identifier';\nimport { CopyPass } from './passes/CopyPass';\nimport { PixelPickingPass } from './passes/PixelPickingPass';\nimport { RenderPass } from './passes/RenderPass';\nexport var RendererSystem = (_dec = injectable(), _dec2 = inject(IDENTIFIER.Systems), _dec3 = named(IDENTIFIER.FrameGraphSystem), _dec4 = inject(IDENTIFIER.RenderPassFactory), _dec5 = inject(IDENTIFIER.ConfigService), _dec6 = inject(IDENTIFIER.ResourcePool), _dec(_class = (_class2 = (_temp = /*#__PURE__*/function () {\n  function RendererSystem() {\n    _classCallCheck(this, RendererSystem);\n    _initializerDefineProperty(this, \"frameGraphSystem\", _descriptor, this);\n    _initializerDefineProperty(this, \"renderPassFactory\", _descriptor2, this);\n    _initializerDefineProperty(this, \"configService\", _descriptor3, this);\n    _initializerDefineProperty(this, \"resourcePool\", _descriptor4, this);\n  }\n  _createClass(RendererSystem, [{\n    key: \"execute\",\n    value: function () {\n      var _execute = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(views) {\n        var _this$renderPassFacto, setupRenderPass, executeRenderPass, renderPass, _this$renderPassFacto2, setupCopyPass, executeCopyPass, tearDownCopyPass, copyPass;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // const pixelPickingPass = this.renderPassFactory<PixelPickingPassData>(\n                //   PixelPickingPass.IDENTIFIER,\n                // );\n                // const {\n                //   setup: setupPixelPickingPass,\n                //   execute: executePixelPickingPass,\n                //   tearDown: tearDownPickingPass,\n                // } = pixelPickingPass;\n                // this.frameGraphSystem.addPass<PixelPickingPassData>(\n                //   PixelPickingPass.IDENTIFIER,\n                //   setupPixelPickingPass,\n                //   executePixelPickingPass,\n                //   tearDownPickingPass,\n                // );\n                _this$renderPassFacto = this.renderPassFactory(RenderPass.IDENTIFIER), setupRenderPass = _this$renderPassFacto.setup, executeRenderPass = _this$renderPassFacto.execute;\n                renderPass = this.frameGraphSystem.addPass(RenderPass.IDENTIFIER, setupRenderPass, executeRenderPass);\n                _this$renderPassFacto2 = this.renderPassFactory(CopyPass.IDENTIFIER), setupCopyPass = _this$renderPassFacto2.setup, executeCopyPass = _this$renderPassFacto2.execute, tearDownCopyPass = _this$renderPassFacto2.tearDown;\n                copyPass = this.frameGraphSystem.addPass(CopyPass.IDENTIFIER, setupCopyPass, executeCopyPass, tearDownCopyPass);\n                this.frameGraphSystem.present(copyPass.data.output);\n              // this.frameGraphSystem.present(renderPass.data.output);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function execute(_x) {\n        return _execute.apply(this, arguments);\n      }\n      return execute;\n    }()\n  }, {\n    key: \"tearDown\",\n    value: function tearDown() {\n      this.resourcePool.clean();\n    }\n  }, {\n    key: \"pick\",\n    value: function pick(position, view) {\n      var pickingPass = this.renderPassFactory(PixelPickingPass.IDENTIFIER);\n      return pickingPass.pick(position, view);\n    }\n  }]);\n  return RendererSystem;\n}(), _temp), _descriptor = _applyDecoratedDescriptor(_class2.prototype, \"frameGraphSystem\", [_dec2, _dec3], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"renderPassFactory\", [_dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"configService\", [_dec5], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class2.prototype, \"resourcePool\", [_dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _class2)) || _class);","map":{"version":3,"names":["inject","injectable","named","IDENTIFIER","CopyPass","PixelPickingPass","RenderPass","RendererSystem","_dec","_dec2","Systems","_dec3","FrameGraphSystem","_dec4","RenderPassFactory","_dec5","ConfigService","_dec6","ResourcePool","_class","_class2","_temp","_classCallCheck","_initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","_createClass","key","value","_execute","_asyncToGenerator","_regeneratorRuntime","mark","_callee","views","_this$renderPassFacto","setupRenderPass","executeRenderPass","renderPass","_this$renderPassFacto2","setupCopyPass","executeCopyPass","tearDownCopyPass","copyPass","wrap","_callee$","_context","prev","next","renderPassFactory","setup","execute","frameGraphSystem","addPass","tearDown","present","data","output","stop","_x","apply","arguments","resourcePool","clean","pick","position","view","pickingPass","_applyDecoratedDescriptor","prototype","configurable","enumerable","writable","initializer"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/g-webgpu-core/src/components/renderer/System.ts"],"sourcesContent":["import { inject, injectable, named } from 'inversify';\nimport { IConfigService, ISystem } from '../..';\nimport { IDENTIFIER } from '../../identifier';\nimport { ResourcePool } from '../framegraph/ResourcePool';\nimport { FrameGraphSystem } from '../framegraph/System';\nimport { IView } from './IRendererService';\nimport { CopyPass, CopyPassData } from './passes/CopyPass';\nimport { IRenderPass } from './passes/IRenderPass';\nimport {\n  PixelPickingPass,\n  PixelPickingPassData,\n} from './passes/PixelPickingPass';\nimport { RenderPass, RenderPassData } from './passes/RenderPass';\n\n@injectable()\nexport class RendererSystem implements ISystem {\n  @inject(IDENTIFIER.Systems)\n  @named(IDENTIFIER.FrameGraphSystem)\n  private readonly frameGraphSystem: FrameGraphSystem;\n\n  @inject(IDENTIFIER.RenderPassFactory)\n  private readonly renderPassFactory: <T>(name: string) => IRenderPass<T>;\n\n  @inject(IDENTIFIER.ConfigService)\n  private readonly configService: IConfigService;\n\n  @inject(IDENTIFIER.ResourcePool)\n  private readonly resourcePool: ResourcePool;\n\n  public async execute(views: IView[]) {\n    // const pixelPickingPass = this.renderPassFactory<PixelPickingPassData>(\n    //   PixelPickingPass.IDENTIFIER,\n    // );\n    // const {\n    //   setup: setupPixelPickingPass,\n    //   execute: executePixelPickingPass,\n    //   tearDown: tearDownPickingPass,\n    // } = pixelPickingPass;\n    // this.frameGraphSystem.addPass<PixelPickingPassData>(\n    //   PixelPickingPass.IDENTIFIER,\n    //   setupPixelPickingPass,\n    //   executePixelPickingPass,\n    //   tearDownPickingPass,\n    // );\n\n    const {\n      setup: setupRenderPass,\n      execute: executeRenderPass,\n    } = this.renderPassFactory<RenderPassData>(RenderPass.IDENTIFIER);\n    const renderPass = this.frameGraphSystem.addPass<RenderPassData>(\n      RenderPass.IDENTIFIER,\n      setupRenderPass,\n      executeRenderPass,\n    );\n\n    const {\n      setup: setupCopyPass,\n      execute: executeCopyPass,\n      tearDown: tearDownCopyPass,\n    } = this.renderPassFactory<CopyPassData>(CopyPass.IDENTIFIER);\n    const copyPass = this.frameGraphSystem.addPass<CopyPassData>(\n      CopyPass.IDENTIFIER,\n      setupCopyPass,\n      executeCopyPass,\n      tearDownCopyPass,\n    );\n\n    this.frameGraphSystem.present(copyPass.data.output);\n    // this.frameGraphSystem.present(renderPass.data.output);\n  }\n\n  public tearDown() {\n    this.resourcePool.clean();\n  }\n\n  public pick(position: { x: number; y: number }, view: IView) {\n    const pickingPass = this.renderPassFactory<PixelPickingPassData>(\n      PixelPickingPass.IDENTIFIER,\n    ) as PixelPickingPass;\n\n    return pickingPass.pick(position, view);\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}