{"ast":null,"code":"import { Graph, Path, Registry, Shape } from '@antv/x6';\nimport { EDGE_PATH_TYPE, XFLOW_SHAPE } from '../constants';\nif (!Registry.Connector.registry.exist(EDGE_PATH_TYPE.VERTICAL_NODE)) {\n  Graph.registerConnector(EDGE_PATH_TYPE.VERTICAL_NODE, (s, e) => {\n    const offset = 16;\n    const deltaY = Math.abs(e.y - s.y);\n    const control = Math.floor(deltaY / 3 * 2);\n    const v1 = {\n      x: s.x,\n      y: s.y + offset + control\n    };\n    const v2 = {\n      x: e.x,\n      y: e.y - offset - control\n    };\n    return Path.normalize(`M ${s.x} ${s.y}\n         L ${s.x} ${s.y + offset}\n         C ${v1.x} ${v1.y} ${v2.x} ${v2.y} ${e.x} ${e.y - offset}\n         L ${e.x} ${e.y}\n        `);\n  }, true);\n}\nif (!Registry.Connector.registry.exist(EDGE_PATH_TYPE.VERTICAL_GROUP)) {\n  Graph.registerConnector(EDGE_PATH_TYPE.VERTICAL_GROUP, (s, t) => {\n    const offset = 4;\n    const control = Math.abs(t.y - s.y);\n    const v1 = {\n      x: s.x,\n      y: s.y + offset + control\n    };\n    const v2 = {\n      x: t.x,\n      y: t.y - offset - control\n    };\n    return Path.normalize(`M ${s.x} ${s.y}\n       L ${s.x} ${s.y + offset}\n       C ${v1.x} ${v1.y} ${v2.x} ${v2.y} ${t.x} ${t.y - offset}\n       L ${t.x} ${t.y}\n      `);\n  }, true);\n}\n// TODO: fix this vertical function\nif (!Registry.Connector.registry.exist(EDGE_PATH_TYPE.HORIRONTAL_NODE)) {\n  Graph.registerConnector(EDGE_PATH_TYPE.HORIRONTAL_NODE, (s, e) => {\n    const offset = 4;\n    // const control = 80;\n    const deltaY = Math.abs(e.y - s.y);\n    const control = Math.floor(deltaY / 3 * 2);\n    const v1 = {\n      x: s.x,\n      y: s.y + offset + control\n    };\n    const v2 = {\n      x: e.x,\n      y: e.y - offset - control\n    };\n    return Path.normalize(`M ${s.x} ${s.y}\n         L ${s.x} ${s.y + offset}\n         C ${v1.x} ${v1.y} ${v2.x} ${v2.y} ${e.x} ${e.y - offset}\n         L ${e.x} ${e.y}\n        `);\n  }, true);\n}\nlet XFlowEdge = Shape.Edge.registry.get(XFLOW_SHAPE.EDGE);\nif (!Shape.Edge.registry.exist(XFLOW_SHAPE.EDGE)) {\n  XFlowEdge = Shape.Edge.registry.register(XFLOW_SHAPE.EDGE, Shape.Edge.define({\n    zIndex: 1,\n    highlight: false,\n    shape: XFLOW_SHAPE.EDGE\n    // https://x6.antv.vision/zh/docs/api/registry/node-anchor\n    // source: {\n    //   anchor: {\n    //     name: 'bottom',\n    //   },\n    // },\n    // target: {\n    //   anchor: {\n    //     name: 'center',\n    //   },\n    // },\n  }), true);\n}\nexport { EDGE_PATH_TYPE, XFlowEdge };","map":{"version":3,"names":["Graph","Path","Registry","Shape","EDGE_PATH_TYPE","XFLOW_SHAPE","Connector","registry","exist","VERTICAL_NODE","registerConnector","s","e","offset","deltaY","Math","abs","y","control","floor","v1","x","v2","normalize","VERTICAL_GROUP","t","HORIRONTAL_NODE","XFlowEdge","Edge","get","EDGE","register","define","zIndex","highlight","shape"],"sources":["../../../src/canvas-dag-extension/x6-extension/edge.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}