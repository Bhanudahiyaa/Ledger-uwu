{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { DOM, lodashUtil } from '@antv/l7-utils';\nimport Popup from \"./popup\";\nconst {\n  get\n} = lodashUtil;\nexport { LayerPopup };\nexport default class LayerPopup extends Popup {\n  constructor(...args) {\n    super(...args);\n    /**\n     * 用于统计当前帧当中，layer 被点击的次数\n     */\n    _defineProperty(this, \"layerClickCountByFrame\", 0);\n    /**\n     * 用于保存图层对应的事件回调以及配置信息\n     * @protected\n     */\n    _defineProperty(this, \"layerConfigMap\", new WeakMap());\n    /**\n     * 当期正在展示的图层以及对应元素 id 的信息\n     * @protected\n     */\n    _defineProperty(this, \"displayFeatureInfo\", void 0);\n    _defineProperty(this, \"onLayerClick\", (layer, e) => {\n      requestAnimationFrame(() => {\n        if (this.popupOption.closeOnClick) {\n          this.layerClickCountByFrame++;\n        }\n        if (this.isShow && this.isSameFeature(layer, e.featureId)) {\n          this.hide();\n        } else {\n          const {\n            title,\n            content\n          } = this.getLayerInfoFrag(layer, e);\n          this.setDOMContent(content);\n          this.setLnglat(e.lngLat);\n          this.setTitle(title);\n          this.setDisplayFeatureInfo({\n            layer,\n            featureId: e.featureId\n          });\n          this.show();\n        }\n      });\n    });\n    _defineProperty(this, \"onSceneClick\", () => {\n      this.layerClickCountByFrame = 0;\n      requestAnimationFrame(() => {\n        if (!this.layerClickCountByFrame) {\n          this.hide();\n        }\n      });\n    });\n    _defineProperty(this, \"onLayerHide\", () => {\n      this.hide();\n      this.setDisplayFeatureInfo(undefined);\n    });\n    /**\n     * 覆盖 Popup 中的默认的 closeOnClick 行为\n     */\n    // tslint:disable-next-line:no-empty\n    _defineProperty(this, \"updateCloseOnClick\", () => {});\n  }\n  get layerConfigItems() {\n    var _ref;\n    const {\n      config,\n      items\n    } = this.popupOption;\n    return (_ref = config !== null && config !== void 0 ? config : items) !== null && _ref !== void 0 ? _ref : [];\n  }\n  addTo(scene) {\n    super.addTo(scene);\n    this.bindLayerEvent();\n    this.hide();\n    return this;\n  }\n  remove() {\n    super.remove();\n    this.unbindLayerEvent();\n    return this;\n  }\n  setOptions(option) {\n    this.unbindLayerEvent();\n    const newOption = _objectSpread({}, option);\n    const trigger = newOption.trigger || this.popupOption.trigger;\n    const items = newOption.items || this.popupOption.items;\n    const isEmptyItems = (items === null || items === void 0 ? void 0 : items.length) === 0;\n    newOption.followCursor = trigger === 'hover' && !isEmptyItems;\n    const isShow = this.isShow;\n    super.setOptions(newOption);\n    this.bindLayerEvent();\n    if (isEmptyItems || !isShow) {\n      this.hide();\n    }\n    return this;\n  }\n  getDefault(option) {\n    const isHoverTrigger = option.trigger !== 'click';\n    return _objectSpread(_objectSpread({}, super.getDefault(option)), {}, {\n      trigger: 'hover',\n      followCursor: isHoverTrigger,\n      lngLat: {\n        lng: 0,\n        lat: 0\n      },\n      offsets: [0, 10],\n      closeButton: false,\n      closeOnClick: true,\n      autoClose: false,\n      closeOnEsc: false\n    });\n  }\n\n  /**\n   * 绑定对应的图层事件\n   * @protected\n   */\n  bindLayerEvent() {\n    const {\n      trigger,\n      closeOnClick\n    } = this.popupOption;\n    this.layerConfigItems.forEach(configItem => {\n      var _layer$getSource;\n      const layer = this.getLayerByConfig(configItem);\n      if (!layer) {\n        return;\n      }\n      const layerInfo = _objectSpread({}, configItem);\n      if (trigger === 'hover') {\n        const onMouseMove = this.onLayerMouseMove.bind(this, layer);\n        const onMouseOut = this.onLayerMouseOut.bind(this, layer);\n        layerInfo.onMouseMove = onMouseMove;\n        layerInfo.onMouseOut = onMouseOut;\n        layer === null || layer === void 0 || layer.on('mousemove', onMouseMove);\n        layer === null || layer === void 0 || layer.on('mouseout', onMouseOut);\n      } else {\n        var _this$mapsService;\n        const onLayerClick = this.onLayerClick.bind(this, layer);\n        layerInfo.onClick = onLayerClick;\n        layer === null || layer === void 0 || layer.on('click', onLayerClick);\n        const mapContainer = (_this$mapsService = this.mapsService) === null || _this$mapsService === void 0 ? void 0 : _this$mapsService.getMapContainer();\n        if (mapContainer && closeOnClick) {\n          mapContainer.addEventListener('click', this.onSceneClick);\n        }\n      }\n      const source = layer === null || layer === void 0 || (_layer$getSource = layer.getSource) === null || _layer$getSource === void 0 ? void 0 : _layer$getSource.call(layer);\n      const onSourceUpdate = this.onSourceUpdate.bind(this);\n      source === null || source === void 0 || source.on('update', onSourceUpdate);\n      layerInfo.onSourceUpdate = onSourceUpdate;\n      this.layerConfigMap.set(layer, layerInfo);\n    });\n  }\n\n  /**\n   * 解绑对应的图层事件\n   * @protected\n   */\n  unbindLayerEvent() {\n    this.layerConfigItems.forEach(configItem => {\n      var _this$mapsService2;\n      const layer = this.getLayerByConfig(configItem);\n      const layerInfo = layer && this.layerConfigMap.get(layer);\n      if (!layerInfo) {\n        return;\n      }\n      const {\n        onMouseMove,\n        onMouseOut,\n        onClick,\n        onSourceUpdate\n      } = layerInfo;\n      if (onMouseMove) {\n        layer.off('mousemove', onMouseMove);\n      }\n      if (onMouseOut) {\n        layer.off('mouseout', onMouseOut);\n      }\n      if (onClick) {\n        layer.off('click', onClick);\n      }\n      if (onSourceUpdate) {\n        var _layer$getSource2;\n        layer === null || layer === void 0 || (_layer$getSource2 = layer.getSource()) === null || _layer$getSource2 === void 0 || _layer$getSource2.off('update', onSourceUpdate);\n      }\n      const mapContainer = (_this$mapsService2 = this.mapsService) === null || _this$mapsService2 === void 0 ? void 0 : _this$mapsService2.getMapContainer();\n      if (mapContainer) {\n        mapContainer.removeEventListener('click', this.onSceneClick);\n      }\n    });\n  }\n  onLayerMouseMove(layer, e) {\n    if (!this.isSameFeature(layer, e.featureId)) {\n      const {\n        title,\n        content\n      } = this.getLayerInfoFrag(layer, e);\n      this.setDOMContent(content);\n      this.setTitle(title);\n      this.setDisplayFeatureInfo({\n        layer,\n        featureId: e.featureId\n      });\n      this.show();\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  onLayerMouseOut(layer, e) {\n    this.setDisplayFeatureInfo(undefined);\n    if (this.isShow) {\n      this.hide();\n    }\n  }\n  onSourceUpdate() {\n    this.hide();\n    this.setDisplayFeatureInfo(undefined);\n  }\n\n  /**\n   * 通过当前图层和对应选中的元素获取气泡展示的 HTML 内容\n   * @param layer\n   * @param e\n   * @protected\n   */\n  getLayerInfoFrag(layer, e) {\n    const layerInfo = this.layerConfigMap.get(layer);\n    let titleFrag;\n    const contentFrag = document.createDocumentFragment();\n    if (layerInfo) {\n      let feature = e.feature;\n      if (feature.type === 'Feature' && 'properties' in feature && 'geometry' in feature) {\n        feature = feature.properties;\n      }\n      const {\n        title,\n        fields,\n        customContent\n      } = layerInfo;\n      if (title) {\n        titleFrag = document.createDocumentFragment();\n        const titleElement = title instanceof Function ? title(feature) : title;\n        DOM.appendElementType(titleFrag, titleElement);\n      }\n      if (customContent) {\n        const content = customContent instanceof Function ? customContent(feature) : customContent;\n        DOM.appendElementType(contentFrag, content);\n      } else if (fields !== null && fields !== void 0 && fields.length) {\n        fields === null || fields === void 0 || fields.forEach(fieldConfig => {\n          var _ref2, _ref3;\n          const {\n            field,\n            formatField,\n            formatValue,\n            getValue\n          } = typeof fieldConfig === 'string' ?\n          // tslint:disable-next-line:no-object-literal-type-assertion\n          {\n            field: fieldConfig\n          } : fieldConfig;\n          const row = DOM.create('div', 'l7-layer-popup__row');\n          const value = getValue ? getValue(e.feature) : get(feature, field);\n          const fieldElement = (_ref2 = formatField instanceof Function ? formatField(field, feature) : formatField) !== null && _ref2 !== void 0 ? _ref2 : field;\n          let valueElement = (_ref3 = formatValue instanceof Function ? formatValue(value, feature) : formatValue) !== null && _ref3 !== void 0 ? _ref3 : value;\n          const fieldSpan = DOM.create('span', 'l7-layer-popup__key', row);\n          DOM.appendElementType(fieldSpan, fieldElement);\n          DOM.appendElementType(fieldSpan, document.createTextNode('：'));\n          const valueSpan = DOM.create('span', 'l7-layer-popup__value', row);\n\n          // 当 value 中每项元素均为基础数据类型时，用逗号隔开\n          if (Array.isArray(valueElement) && valueElement.every(item => !(item instanceof Object))) {\n            valueElement = valueElement.map(item => String(item)).join(',');\n          }\n          DOM.appendElementType(valueSpan, valueElement);\n          contentFrag.appendChild(row);\n        });\n      }\n    }\n    return {\n      title: titleFrag,\n      content: contentFrag\n    };\n  }\n\n  /**\n   * 通过 Layer 配置访问到真实的 Layer 实例\n   * @param configItem\n   * @protected\n   */\n  getLayerByConfig(configItem) {\n    const layer = configItem.layer;\n    if (layer instanceof Object) {\n      return layer;\n    }\n    if (typeof layer === 'string') {\n      return this.layerService.getLayer(layer) || this.layerService.getLayerByName(layer);\n    }\n  }\n\n  /**\n   * 判断当前展示的 Feature 是否和上一次查看的一致\n   * @param layer\n   * @param featureId\n   * @protected\n   */\n  isSameFeature(layer, featureId) {\n    const displayFeatureInfo = this.displayFeatureInfo;\n    return displayFeatureInfo && layer === displayFeatureInfo.layer && featureId === displayFeatureInfo.featureId;\n  }\n  setDisplayFeatureInfo(displayFeatureInfo) {\n    const oldDisplayFeatureInfo = this.displayFeatureInfo;\n    if (oldDisplayFeatureInfo) {\n      oldDisplayFeatureInfo.layer.off('hide', this.onLayerHide);\n    }\n    if (displayFeatureInfo) {\n      displayFeatureInfo.layer.on('hide', this.onLayerHide);\n    }\n    this.displayFeatureInfo = displayFeatureInfo;\n  }\n}","map":{"version":3,"names":["_objectSpread","_defineProperty","DOM","lodashUtil","Popup","get","LayerPopup","constructor","args","WeakMap","layer","e","requestAnimationFrame","popupOption","closeOnClick","layerClickCountByFrame","isShow","isSameFeature","featureId","hide","title","content","getLayerInfoFrag","setDOMContent","setLnglat","lngLat","setTitle","setDisplayFeatureInfo","show","undefined","layerConfigItems","_ref","config","items","addTo","scene","bindLayerEvent","remove","unbindLayerEvent","setOptions","option","newOption","trigger","isEmptyItems","length","followCursor","getDefault","isHoverTrigger","lng","lat","offsets","closeButton","autoClose","closeOnEsc","forEach","configItem","_layer$getSource","getLayerByConfig","layerInfo","onMouseMove","onLayerMouseMove","bind","onMouseOut","onLayerMouseOut","on","_this$mapsService","onLayerClick","onClick","mapContainer","mapsService","getMapContainer","addEventListener","onSceneClick","source","getSource","call","onSourceUpdate","layerConfigMap","set","_this$mapsService2","off","_layer$getSource2","removeEventListener","titleFrag","contentFrag","document","createDocumentFragment","feature","type","properties","fields","customContent","titleElement","Function","appendElementType","fieldConfig","_ref2","_ref3","field","formatField","formatValue","getValue","row","create","value","fieldElement","valueElement","fieldSpan","createTextNode","valueSpan","Array","isArray","every","item","Object","map","String","join","appendChild","layerService","getLayer","getLayerByName","displayFeatureInfo","oldDisplayFeatureInfo","onLayerHide"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-component/es/popup/layerPopup.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { DOM, lodashUtil } from '@antv/l7-utils';\nimport Popup from \"./popup\";\nconst {\n  get\n} = lodashUtil;\nexport { LayerPopup };\nexport default class LayerPopup extends Popup {\n  constructor(...args) {\n    super(...args);\n    /**\n     * 用于统计当前帧当中，layer 被点击的次数\n     */\n    _defineProperty(this, \"layerClickCountByFrame\", 0);\n    /**\n     * 用于保存图层对应的事件回调以及配置信息\n     * @protected\n     */\n    _defineProperty(this, \"layerConfigMap\", new WeakMap());\n    /**\n     * 当期正在展示的图层以及对应元素 id 的信息\n     * @protected\n     */\n    _defineProperty(this, \"displayFeatureInfo\", void 0);\n    _defineProperty(this, \"onLayerClick\", (layer, e) => {\n      requestAnimationFrame(() => {\n        if (this.popupOption.closeOnClick) {\n          this.layerClickCountByFrame++;\n        }\n        if (this.isShow && this.isSameFeature(layer, e.featureId)) {\n          this.hide();\n        } else {\n          const {\n            title,\n            content\n          } = this.getLayerInfoFrag(layer, e);\n          this.setDOMContent(content);\n          this.setLnglat(e.lngLat);\n          this.setTitle(title);\n          this.setDisplayFeatureInfo({\n            layer,\n            featureId: e.featureId\n          });\n          this.show();\n        }\n      });\n    });\n    _defineProperty(this, \"onSceneClick\", () => {\n      this.layerClickCountByFrame = 0;\n      requestAnimationFrame(() => {\n        if (!this.layerClickCountByFrame) {\n          this.hide();\n        }\n      });\n    });\n    _defineProperty(this, \"onLayerHide\", () => {\n      this.hide();\n      this.setDisplayFeatureInfo(undefined);\n    });\n    /**\n     * 覆盖 Popup 中的默认的 closeOnClick 行为\n     */\n    // tslint:disable-next-line:no-empty\n    _defineProperty(this, \"updateCloseOnClick\", () => {});\n  }\n  get layerConfigItems() {\n    var _ref;\n    const {\n      config,\n      items\n    } = this.popupOption;\n    return (_ref = config !== null && config !== void 0 ? config : items) !== null && _ref !== void 0 ? _ref : [];\n  }\n  addTo(scene) {\n    super.addTo(scene);\n    this.bindLayerEvent();\n    this.hide();\n    return this;\n  }\n  remove() {\n    super.remove();\n    this.unbindLayerEvent();\n    return this;\n  }\n  setOptions(option) {\n    this.unbindLayerEvent();\n    const newOption = _objectSpread({}, option);\n    const trigger = newOption.trigger || this.popupOption.trigger;\n    const items = newOption.items || this.popupOption.items;\n    const isEmptyItems = (items === null || items === void 0 ? void 0 : items.length) === 0;\n    newOption.followCursor = trigger === 'hover' && !isEmptyItems;\n    const isShow = this.isShow;\n    super.setOptions(newOption);\n    this.bindLayerEvent();\n    if (isEmptyItems || !isShow) {\n      this.hide();\n    }\n    return this;\n  }\n  getDefault(option) {\n    const isHoverTrigger = option.trigger !== 'click';\n    return _objectSpread(_objectSpread({}, super.getDefault(option)), {}, {\n      trigger: 'hover',\n      followCursor: isHoverTrigger,\n      lngLat: {\n        lng: 0,\n        lat: 0\n      },\n      offsets: [0, 10],\n      closeButton: false,\n      closeOnClick: true,\n      autoClose: false,\n      closeOnEsc: false\n    });\n  }\n\n  /**\n   * 绑定对应的图层事件\n   * @protected\n   */\n  bindLayerEvent() {\n    const {\n      trigger,\n      closeOnClick\n    } = this.popupOption;\n    this.layerConfigItems.forEach(configItem => {\n      var _layer$getSource;\n      const layer = this.getLayerByConfig(configItem);\n      if (!layer) {\n        return;\n      }\n      const layerInfo = _objectSpread({}, configItem);\n      if (trigger === 'hover') {\n        const onMouseMove = this.onLayerMouseMove.bind(this, layer);\n        const onMouseOut = this.onLayerMouseOut.bind(this, layer);\n        layerInfo.onMouseMove = onMouseMove;\n        layerInfo.onMouseOut = onMouseOut;\n        layer === null || layer === void 0 || layer.on('mousemove', onMouseMove);\n        layer === null || layer === void 0 || layer.on('mouseout', onMouseOut);\n      } else {\n        var _this$mapsService;\n        const onLayerClick = this.onLayerClick.bind(this, layer);\n        layerInfo.onClick = onLayerClick;\n        layer === null || layer === void 0 || layer.on('click', onLayerClick);\n        const mapContainer = (_this$mapsService = this.mapsService) === null || _this$mapsService === void 0 ? void 0 : _this$mapsService.getMapContainer();\n        if (mapContainer && closeOnClick) {\n          mapContainer.addEventListener('click', this.onSceneClick);\n        }\n      }\n      const source = layer === null || layer === void 0 || (_layer$getSource = layer.getSource) === null || _layer$getSource === void 0 ? void 0 : _layer$getSource.call(layer);\n      const onSourceUpdate = this.onSourceUpdate.bind(this);\n      source === null || source === void 0 || source.on('update', onSourceUpdate);\n      layerInfo.onSourceUpdate = onSourceUpdate;\n      this.layerConfigMap.set(layer, layerInfo);\n    });\n  }\n\n  /**\n   * 解绑对应的图层事件\n   * @protected\n   */\n  unbindLayerEvent() {\n    this.layerConfigItems.forEach(configItem => {\n      var _this$mapsService2;\n      const layer = this.getLayerByConfig(configItem);\n      const layerInfo = layer && this.layerConfigMap.get(layer);\n      if (!layerInfo) {\n        return;\n      }\n      const {\n        onMouseMove,\n        onMouseOut,\n        onClick,\n        onSourceUpdate\n      } = layerInfo;\n      if (onMouseMove) {\n        layer.off('mousemove', onMouseMove);\n      }\n      if (onMouseOut) {\n        layer.off('mouseout', onMouseOut);\n      }\n      if (onClick) {\n        layer.off('click', onClick);\n      }\n      if (onSourceUpdate) {\n        var _layer$getSource2;\n        layer === null || layer === void 0 || (_layer$getSource2 = layer.getSource()) === null || _layer$getSource2 === void 0 || _layer$getSource2.off('update', onSourceUpdate);\n      }\n      const mapContainer = (_this$mapsService2 = this.mapsService) === null || _this$mapsService2 === void 0 ? void 0 : _this$mapsService2.getMapContainer();\n      if (mapContainer) {\n        mapContainer.removeEventListener('click', this.onSceneClick);\n      }\n    });\n  }\n  onLayerMouseMove(layer, e) {\n    if (!this.isSameFeature(layer, e.featureId)) {\n      const {\n        title,\n        content\n      } = this.getLayerInfoFrag(layer, e);\n      this.setDOMContent(content);\n      this.setTitle(title);\n      this.setDisplayFeatureInfo({\n        layer,\n        featureId: e.featureId\n      });\n      this.show();\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  onLayerMouseOut(layer, e) {\n    this.setDisplayFeatureInfo(undefined);\n    if (this.isShow) {\n      this.hide();\n    }\n  }\n  onSourceUpdate() {\n    this.hide();\n    this.setDisplayFeatureInfo(undefined);\n  }\n\n  /**\n   * 通过当前图层和对应选中的元素获取气泡展示的 HTML 内容\n   * @param layer\n   * @param e\n   * @protected\n   */\n  getLayerInfoFrag(layer, e) {\n    const layerInfo = this.layerConfigMap.get(layer);\n    let titleFrag;\n    const contentFrag = document.createDocumentFragment();\n    if (layerInfo) {\n      let feature = e.feature;\n      if (feature.type === 'Feature' && 'properties' in feature && 'geometry' in feature) {\n        feature = feature.properties;\n      }\n      const {\n        title,\n        fields,\n        customContent\n      } = layerInfo;\n      if (title) {\n        titleFrag = document.createDocumentFragment();\n        const titleElement = title instanceof Function ? title(feature) : title;\n        DOM.appendElementType(titleFrag, titleElement);\n      }\n      if (customContent) {\n        const content = customContent instanceof Function ? customContent(feature) : customContent;\n        DOM.appendElementType(contentFrag, content);\n      } else if (fields !== null && fields !== void 0 && fields.length) {\n        fields === null || fields === void 0 || fields.forEach(fieldConfig => {\n          var _ref2, _ref3;\n          const {\n            field,\n            formatField,\n            formatValue,\n            getValue\n          } = typeof fieldConfig === 'string' ?\n          // tslint:disable-next-line:no-object-literal-type-assertion\n          {\n            field: fieldConfig\n          } : fieldConfig;\n          const row = DOM.create('div', 'l7-layer-popup__row');\n          const value = getValue ? getValue(e.feature) : get(feature, field);\n          const fieldElement = (_ref2 = formatField instanceof Function ? formatField(field, feature) : formatField) !== null && _ref2 !== void 0 ? _ref2 : field;\n          let valueElement = (_ref3 = formatValue instanceof Function ? formatValue(value, feature) : formatValue) !== null && _ref3 !== void 0 ? _ref3 : value;\n          const fieldSpan = DOM.create('span', 'l7-layer-popup__key', row);\n          DOM.appendElementType(fieldSpan, fieldElement);\n          DOM.appendElementType(fieldSpan, document.createTextNode('：'));\n          const valueSpan = DOM.create('span', 'l7-layer-popup__value', row);\n\n          // 当 value 中每项元素均为基础数据类型时，用逗号隔开\n          if (Array.isArray(valueElement) && valueElement.every(item => !(item instanceof Object))) {\n            valueElement = valueElement.map(item => String(item)).join(',');\n          }\n          DOM.appendElementType(valueSpan, valueElement);\n          contentFrag.appendChild(row);\n        });\n      }\n    }\n    return {\n      title: titleFrag,\n      content: contentFrag\n    };\n  }\n\n  /**\n   * 通过 Layer 配置访问到真实的 Layer 实例\n   * @param configItem\n   * @protected\n   */\n  getLayerByConfig(configItem) {\n    const layer = configItem.layer;\n    if (layer instanceof Object) {\n      return layer;\n    }\n    if (typeof layer === 'string') {\n      return this.layerService.getLayer(layer) || this.layerService.getLayerByName(layer);\n    }\n  }\n\n  /**\n   * 判断当前展示的 Feature 是否和上一次查看的一致\n   * @param layer\n   * @param featureId\n   * @protected\n   */\n  isSameFeature(layer, featureId) {\n    const displayFeatureInfo = this.displayFeatureInfo;\n    return displayFeatureInfo && layer === displayFeatureInfo.layer && featureId === displayFeatureInfo.featureId;\n  }\n  setDisplayFeatureInfo(displayFeatureInfo) {\n    const oldDisplayFeatureInfo = this.displayFeatureInfo;\n    if (oldDisplayFeatureInfo) {\n      oldDisplayFeatureInfo.layer.off('hide', this.onLayerHide);\n    }\n    if (displayFeatureInfo) {\n      displayFeatureInfo.layer.on('hide', this.onLayerHide);\n    }\n    this.displayFeatureInfo = displayFeatureInfo;\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}