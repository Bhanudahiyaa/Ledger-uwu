{"ast":null,"code":"/**\n * @fileOverview random layout\n * @author shiwu.wyy@antfin.com\n */\nimport { Base } from \"./base\";\n/**\n * 随机布局\n */\nexport class RandomLayout extends Base {\n  constructor(options) {\n    super();\n    /** 布局中心 */\n    this.center = [0, 0];\n    /** 宽度 */\n    this.width = 300;\n    /** 高度 */\n    this.height = 300;\n    this.nodes = [];\n    this.edges = [];\n    /** 迭代结束的回调函数 */\n    this.onLayoutEnd = () => {};\n    this.updateCfg(options);\n  }\n  getDefaultCfg() {\n    return {\n      center: [0, 0],\n      width: 300,\n      height: 300\n    };\n  }\n  /**\n   * 执行布局\n   */\n  execute() {\n    const self = this;\n    const nodes = self.nodes;\n    const layoutScale = 0.9;\n    const center = self.center;\n    if (!self.width && typeof window !== \"undefined\") {\n      self.width = window.innerWidth;\n    }\n    if (!self.height && typeof window !== \"undefined\") {\n      self.height = window.innerHeight;\n    }\n    if (nodes) {\n      nodes.forEach(node => {\n        node.x = (Math.random() - 0.5) * layoutScale * self.width + center[0];\n        node.y = (Math.random() - 0.5) * layoutScale * self.height + center[1];\n      });\n    }\n    if (self.onLayoutEnd) self.onLayoutEnd();\n    return {\n      nodes,\n      edges: this.edges\n    };\n  }\n  getType() {\n    return \"random\";\n  }\n}","map":{"version":3,"names":["Base","RandomLayout","constructor","options","center","width","height","nodes","edges","onLayoutEnd","updateCfg","getDefaultCfg","execute","self","layoutScale","window","innerWidth","innerHeight","forEach","node","x","Math","random","y","getType"],"sources":["../../src/layout/random.ts"],"sourcesContent":[null],"mappings":"AAAA;;;;AAMA,SAASA,IAAI,QAAQ,QAAQ;AAE7B;;;AAGA,OAAM,MAAOC,YAAa,SAAQD,IAAI;EAiBpCE,YAAYC,OAA6B;IACvC,KAAK,EAAE;IAjBT;IACO,KAAAC,MAAM,GAAe,CAAC,CAAC,EAAE,CAAC,CAAC;IAElC;IACO,KAAAC,KAAK,GAAW,GAAG;IAE1B;IACO,KAAAC,MAAM,GAAW,GAAG;IAEpB,KAAAC,KAAK,GAAc,EAAE;IAErB,KAAAC,KAAK,GAAW,EAAE;IAEzB;IACO,KAAAC,WAAW,GAAe,MAAK,CAAE,CAAC;IAIvC,IAAI,CAACC,SAAS,CAACP,OAAO,CAAC;EACzB;EAEOQ,aAAaA,CAAA;IAClB,OAAO;MACLP,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;MACdC,KAAK,EAAE,GAAG;MACVC,MAAM,EAAE;KACT;EACH;EAEA;;;EAGOM,OAAOA,CAAA;IACZ,MAAMC,IAAI,GAAG,IAAI;IACjB,MAAMN,KAAK,GAAGM,IAAI,CAACN,KAAK;IACxB,MAAMO,WAAW,GAAG,GAAG;IACvB,MAAMV,MAAM,GAAGS,IAAI,CAACT,MAAM;IAC1B,IAAI,CAACS,IAAI,CAACR,KAAK,IAAI,OAAOU,MAAM,KAAK,WAAW,EAAE;MAChDF,IAAI,CAACR,KAAK,GAAGU,MAAM,CAACC,UAAU;;IAEhC,IAAI,CAACH,IAAI,CAACP,MAAM,IAAI,OAAOS,MAAM,KAAK,WAAW,EAAE;MACjDF,IAAI,CAACP,MAAM,GAAGS,MAAM,CAACE,WAAW;;IAGlC,IAAIV,KAAK,EAAE;MACTA,KAAK,CAACW,OAAO,CAAEC,IAAI,IAAI;QACrBA,IAAI,CAACC,CAAC,GAAG,CAACC,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIR,WAAW,GAAGD,IAAI,CAACR,KAAK,GAAGD,MAAM,CAAC,CAAC,CAAC;QACrEe,IAAI,CAACI,CAAC,GAAG,CAACF,IAAI,CAACC,MAAM,EAAE,GAAG,GAAG,IAAIR,WAAW,GAAGD,IAAI,CAACP,MAAM,GAAGF,MAAM,CAAC,CAAC,CAAC;MACxE,CAAC,CAAC;;IAGJ,IAAIS,IAAI,CAACJ,WAAW,EAAEI,IAAI,CAACJ,WAAW,EAAE;IAExC,OAAO;MACLF,KAAK;MACLC,KAAK,EAAE,IAAI,CAACA;KACb;EACH;EAEOgB,OAAOA,CAAA;IACZ,OAAO,QAAQ;EACjB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}