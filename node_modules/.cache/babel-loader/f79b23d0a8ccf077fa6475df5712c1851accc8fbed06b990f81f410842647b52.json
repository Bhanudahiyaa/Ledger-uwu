{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { GaodeMapStyleConfig, MapboxMapStyleConfig } from \"../constants\";\nimport { createL7Icon } from \"../utils/icon\";\nimport SelectControl from \"./baseControl/selectControl\";\nexport { MapTheme };\nexport default class MapTheme extends SelectControl {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"onMapThemeChange\", () => {\n      this.mapsService.setMapStyle(this.selectValue[0]);\n    });\n  }\n  getDefault(option) {\n    return _objectSpread(_objectSpread({}, super.getDefault(option)), {}, {\n      title: '地图样式',\n      btnIcon: createL7Icon('l7-icon-color'),\n      options: []\n    });\n  }\n  getStyleOptions() {\n    const mapStyleConfig = this.mapsService.getType() === 'mapbox' ? MapboxMapStyleConfig : GaodeMapStyleConfig;\n    return Object.entries(this.mapsService.getMapStyleConfig()).filter(([key, value]) => typeof value === 'string' && key !== 'blank').map(([key, value]) => {\n      var _mapStyleConfig$key;\n      // @ts-ignore\n      const {\n        text,\n        img\n      } = (_mapStyleConfig$key = mapStyleConfig[key]) !== null && _mapStyleConfig$key !== void 0 ? _mapStyleConfig$key : {};\n      return {\n        text: text !== null && text !== void 0 ? text : key,\n        value,\n        img,\n        key\n      };\n    });\n  }\n  getMapStyle() {\n    return this.mapsService.getMapStyle();\n  }\n  onAdd() {\n    var _this$controlOption$o;\n    if (!((_this$controlOption$o = this.controlOption.options) !== null && _this$controlOption$o !== void 0 && _this$controlOption$o.length)) {\n      this.controlOption.options = this.getStyleOptions();\n    }\n    if (this.controlOption.defaultValue) {\n      var _this$controlOption$o2, _this$controlOption$o3;\n      const defaultValue = this.controlOption.defaultValue;\n      this.controlOption.defaultValue = (_this$controlOption$o2 = (_this$controlOption$o3 = this.controlOption.options.find(item => item.key === defaultValue)) === null || _this$controlOption$o3 === void 0 ? void 0 : _this$controlOption$o3.value) !== null && _this$controlOption$o2 !== void 0 ? _this$controlOption$o2 : defaultValue;\n    } else {\n      const defaultStyle = this.getMapStyle();\n      if (defaultStyle) {\n        this.controlOption.defaultValue = defaultStyle;\n      } else {\n        // @ts-ignore\n        this.mapsService.map.once('styledata', () => {\n          const mapboxStyle = this.mapsService.getMapStyle();\n          this.controlOption.defaultValue = mapboxStyle;\n          this.setSelectValue(mapboxStyle, false);\n        });\n      }\n    }\n    this.on('selectChange', this.onMapThemeChange);\n    return super.onAdd();\n  }\n  getIsMultiple() {\n    return false;\n  }\n}","map":{"version":3,"names":["_objectSpread","_defineProperty","GaodeMapStyleConfig","MapboxMapStyleConfig","createL7Icon","SelectControl","MapTheme","constructor","args","mapsService","setMapStyle","selectValue","getDefault","option","title","btnIcon","options","getStyleOptions","mapStyleConfig","getType","Object","entries","getMapStyleConfig","filter","key","value","map","_mapStyleConfig$key","text","img","getMapStyle","onAdd","_this$controlOption$o","controlOption","length","defaultValue","_this$controlOption$o2","_this$controlOption$o3","find","item","defaultStyle","once","mapboxStyle","setSelectValue","on","onMapThemeChange","getIsMultiple"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-component/es/control/mapTheme.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { GaodeMapStyleConfig, MapboxMapStyleConfig } from \"../constants\";\nimport { createL7Icon } from \"../utils/icon\";\nimport SelectControl from \"./baseControl/selectControl\";\nexport { MapTheme };\nexport default class MapTheme extends SelectControl {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"onMapThemeChange\", () => {\n      this.mapsService.setMapStyle(this.selectValue[0]);\n    });\n  }\n  getDefault(option) {\n    return _objectSpread(_objectSpread({}, super.getDefault(option)), {}, {\n      title: '地图样式',\n      btnIcon: createL7Icon('l7-icon-color'),\n      options: []\n    });\n  }\n  getStyleOptions() {\n    const mapStyleConfig = this.mapsService.getType() === 'mapbox' ? MapboxMapStyleConfig : GaodeMapStyleConfig;\n    return Object.entries(this.mapsService.getMapStyleConfig()).filter(([key, value]) => typeof value === 'string' && key !== 'blank').map(([key, value]) => {\n      var _mapStyleConfig$key;\n      // @ts-ignore\n      const {\n        text,\n        img\n      } = (_mapStyleConfig$key = mapStyleConfig[key]) !== null && _mapStyleConfig$key !== void 0 ? _mapStyleConfig$key : {};\n      return {\n        text: text !== null && text !== void 0 ? text : key,\n        value,\n        img,\n        key\n      };\n    });\n  }\n  getMapStyle() {\n    return this.mapsService.getMapStyle();\n  }\n  onAdd() {\n    var _this$controlOption$o;\n    if (!((_this$controlOption$o = this.controlOption.options) !== null && _this$controlOption$o !== void 0 && _this$controlOption$o.length)) {\n      this.controlOption.options = this.getStyleOptions();\n    }\n    if (this.controlOption.defaultValue) {\n      var _this$controlOption$o2, _this$controlOption$o3;\n      const defaultValue = this.controlOption.defaultValue;\n      this.controlOption.defaultValue = (_this$controlOption$o2 = (_this$controlOption$o3 = this.controlOption.options.find(item => item.key === defaultValue)) === null || _this$controlOption$o3 === void 0 ? void 0 : _this$controlOption$o3.value) !== null && _this$controlOption$o2 !== void 0 ? _this$controlOption$o2 : defaultValue;\n    } else {\n      const defaultStyle = this.getMapStyle();\n      if (defaultStyle) {\n        this.controlOption.defaultValue = defaultStyle;\n      } else {\n        // @ts-ignore\n        this.mapsService.map.once('styledata', () => {\n          const mapboxStyle = this.mapsService.getMapStyle();\n          this.controlOption.defaultValue = mapboxStyle;\n          this.setSelectValue(mapboxStyle, false);\n        });\n      }\n    }\n    this.on('selectChange', this.onMapThemeChange);\n    return super.onAdd();\n  }\n  getIsMultiple() {\n    return false;\n  }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}