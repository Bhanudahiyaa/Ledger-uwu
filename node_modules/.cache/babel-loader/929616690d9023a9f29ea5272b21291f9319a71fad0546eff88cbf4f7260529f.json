{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createL7Icon } from \"../utils/icon\";\nimport ButtonControl from \"./baseControl/buttonControl\";\nexport { GeoLocate };\nexport default class GeoLocate extends ButtonControl {\n  constructor(option) {\n    var _this;\n    super(option);\n    _this = this;\n    /**\n     * 通过浏览器 API 获取当前所在经纬度\n     */\n    _defineProperty(this, \"getGeoLocation\", () => {\n      return new Promise((resolve, reject) => {\n        window.navigator.geolocation.getCurrentPosition(({\n          coords\n        }) => {\n          const {\n            longitude,\n            latitude\n          } = coords !== null && coords !== void 0 ? coords : {};\n          if (!isNaN(longitude) && !isNaN(latitude)) {\n            resolve([longitude, latitude]);\n          } else {\n            reject();\n          }\n        }, e => {\n          reject(e);\n        });\n      });\n    });\n    _defineProperty(this, \"onClick\", /*#__PURE__*/_asyncToGenerator(function* () {\n      if (!window.navigator.geolocation) {\n        return;\n      }\n      const {\n        transform\n      } = _this.controlOption;\n      const position = yield _this.getGeoLocation();\n      const currentZoom = _this.mapsService.getZoom();\n      _this.mapsService.setZoomAndCenter(currentZoom > 15 ? currentZoom : 15, transform ? yield transform(position) : position);\n    }));\n    if (!window.navigator.geolocation) {\n      console.warn('当前浏览器环境不支持获取地理定位');\n    }\n  }\n  getDefault(option) {\n    return _objectSpread(_objectSpread({}, super.getDefault(option)), {}, {\n      title: '定位',\n      btnIcon: createL7Icon('l7-icon-reposition')\n    });\n  }\n  onAdd() {\n    const button = super.onAdd();\n    button.addEventListener('click', this.onClick);\n    return button;\n  }\n}","map":{"version":3,"names":["_objectSpread","_asyncToGenerator","_defineProperty","createL7Icon","ButtonControl","GeoLocate","constructor","option","_this","Promise","resolve","reject","window","navigator","geolocation","getCurrentPosition","coords","longitude","latitude","isNaN","e","transform","controlOption","position","getGeoLocation","currentZoom","mapsService","getZoom","setZoomAndCenter","console","warn","getDefault","title","btnIcon","onAdd","button","addEventListener","onClick"],"sources":["/Users/bhanudahiya/Desktop/ledger-IQ/node_modules/@antv/l7-component/es/control/geoLocate.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createL7Icon } from \"../utils/icon\";\nimport ButtonControl from \"./baseControl/buttonControl\";\nexport { GeoLocate };\nexport default class GeoLocate extends ButtonControl {\n  constructor(option) {\n    var _this;\n    super(option);\n    _this = this;\n    /**\n     * 通过浏览器 API 获取当前所在经纬度\n     */\n    _defineProperty(this, \"getGeoLocation\", () => {\n      return new Promise((resolve, reject) => {\n        window.navigator.geolocation.getCurrentPosition(({\n          coords\n        }) => {\n          const {\n            longitude,\n            latitude\n          } = coords !== null && coords !== void 0 ? coords : {};\n          if (!isNaN(longitude) && !isNaN(latitude)) {\n            resolve([longitude, latitude]);\n          } else {\n            reject();\n          }\n        }, e => {\n          reject(e);\n        });\n      });\n    });\n    _defineProperty(this, \"onClick\", /*#__PURE__*/_asyncToGenerator(function* () {\n      if (!window.navigator.geolocation) {\n        return;\n      }\n      const {\n        transform\n      } = _this.controlOption;\n      const position = yield _this.getGeoLocation();\n      const currentZoom = _this.mapsService.getZoom();\n      _this.mapsService.setZoomAndCenter(currentZoom > 15 ? currentZoom : 15, transform ? yield transform(position) : position);\n    }));\n    if (!window.navigator.geolocation) {\n      console.warn('当前浏览器环境不支持获取地理定位');\n    }\n  }\n  getDefault(option) {\n    return _objectSpread(_objectSpread({}, super.getDefault(option)), {}, {\n      title: '定位',\n      btnIcon: createL7Icon('l7-icon-reposition')\n    });\n  }\n  onAdd() {\n    const button = super.onAdd();\n    button.addEventListener('click', this.onClick);\n    return button;\n  }\n}"],"mappings":"AAAA,OAAOA,aAAa,MAAM,0CAA0C;AACpE,OAAOC,iBAAiB,MAAM,6CAA6C;AAC3E,OAAOC,eAAe,MAAM,2CAA2C;AACvE,SAASC,YAAY,QAAQ,eAAe;AAC5C,OAAOC,aAAa,MAAM,6BAA6B;AACvD,SAASC,SAAS;AAClB,eAAe,MAAMA,SAAS,SAASD,aAAa,CAAC;EACnDE,WAAWA,CAACC,MAAM,EAAE;IAClB,IAAIC,KAAK;IACT,KAAK,CAACD,MAAM,CAAC;IACbC,KAAK,GAAG,IAAI;IACZ;AACJ;AACA;IACIN,eAAe,CAAC,IAAI,EAAE,gBAAgB,EAAE,MAAM;MAC5C,OAAO,IAAIO,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;QACtCC,MAAM,CAACC,SAAS,CAACC,WAAW,CAACC,kBAAkB,CAAC,CAAC;UAC/CC;QACF,CAAC,KAAK;UACJ,MAAM;YACJC,SAAS;YACTC;UACF,CAAC,GAAGF,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAGA,MAAM,GAAG,CAAC,CAAC;UACtD,IAAI,CAACG,KAAK,CAACF,SAAS,CAAC,IAAI,CAACE,KAAK,CAACD,QAAQ,CAAC,EAAE;YACzCR,OAAO,CAAC,CAACO,SAAS,EAAEC,QAAQ,CAAC,CAAC;UAChC,CAAC,MAAM;YACLP,MAAM,CAAC,CAAC;UACV;QACF,CAAC,EAAES,CAAC,IAAI;UACNT,MAAM,CAACS,CAAC,CAAC;QACX,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;IACFlB,eAAe,CAAC,IAAI,EAAE,SAAS,EAAE,aAAaD,iBAAiB,CAAC,aAAa;MAC3E,IAAI,CAACW,MAAM,CAACC,SAAS,CAACC,WAAW,EAAE;QACjC;MACF;MACA,MAAM;QACJO;MACF,CAAC,GAAGb,KAAK,CAACc,aAAa;MACvB,MAAMC,QAAQ,GAAG,MAAMf,KAAK,CAACgB,cAAc,CAAC,CAAC;MAC7C,MAAMC,WAAW,GAAGjB,KAAK,CAACkB,WAAW,CAACC,OAAO,CAAC,CAAC;MAC/CnB,KAAK,CAACkB,WAAW,CAACE,gBAAgB,CAACH,WAAW,GAAG,EAAE,GAAGA,WAAW,GAAG,EAAE,EAAEJ,SAAS,GAAG,MAAMA,SAAS,CAACE,QAAQ,CAAC,GAAGA,QAAQ,CAAC;IAC3H,CAAC,CAAC,CAAC;IACH,IAAI,CAACX,MAAM,CAACC,SAAS,CAACC,WAAW,EAAE;MACjCe,OAAO,CAACC,IAAI,CAAC,kBAAkB,CAAC;IAClC;EACF;EACAC,UAAUA,CAACxB,MAAM,EAAE;IACjB,OAAOP,aAAa,CAACA,aAAa,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC+B,UAAU,CAACxB,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;MACpEyB,KAAK,EAAE,IAAI;MACXC,OAAO,EAAE9B,YAAY,CAAC,oBAAoB;IAC5C,CAAC,CAAC;EACJ;EACA+B,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAM,GAAG,KAAK,CAACD,KAAK,CAAC,CAAC;IAC5BC,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACC,OAAO,CAAC;IAC9C,OAAOF,MAAM;EACf;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}