{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { debounce } from 'lodash';\n// 解决配置共享问题\nexport const globalProps = {\n  config: {}\n};\nexport const setProps = props => {\n  globalProps.config = Object.assign({}, globalProps.config, props);\n};\nexport const getProps = key => {\n  var _a;\n  return (_a = globalProps.config) === null || _a === void 0 ? void 0 : _a[key];\n};\nconst graphInstance = new Map();\nconst appInstance = new Map();\nexport const setInstance = app => __awaiter(void 0, void 0, void 0, function* () {\n  const x6graph = yield app.getGraphInstance();\n  graphInstance.set('x6graph', x6graph);\n  appInstance.set('app', app);\n});\nexport const getGraphInstance = () => {\n  return graphInstance.get('x6graph');\n};\nexport const getAppInstance = () => {\n  return appInstance.get('app');\n};\nexport const getGraphData = () => __awaiter(void 0, void 0, void 0, function* () {\n  const app = getAppInstance();\n  return app.getGraphData();\n});\n/** 更新配置时通知上传执行保存 */\nexport const onConfigChange = debounce(config => {\n  const configChange = getProps('onConfigChange');\n  if (!configChange || typeof configChange !== 'function') {\n    return;\n  }\n  return configChange(Object.assign({\n    data: getGraphData()\n  }, config));\n}, 300, {\n  trailing: true\n});","map":{"version":3,"names":["debounce","globalProps","config","setProps","props","Object","assign","getProps","key","_a","graphInstance","Map","appInstance","setInstance","app","__awaiter","x6graph","getGraphInstance","set","get","getAppInstance","getGraphData","onConfigChange","configChange","data","trailing"],"sources":["../../../src/flowchart-canvas/utils/util.ts"],"sourcesContent":[null],"mappings":";AAEA,SAASA,QAAQ,QAAQ,QAAQ;AAEjC;AACA,OAAO,MAAMC,WAAW,GAAG;EACzBC,MAAM,EAAE;CACT;AAED,OAAO,MAAMC,QAAQ,GAAGC,KAAK,IAAG;EAC9BH,WAAW,CAACC,MAAM,GAAGG,MAAM,CAACC,MAAM,CAAC,EAAE,EAAEL,WAAW,CAACC,MAAM,EAAEE,KAAK,CAAC;AACnE,CAAC;AACD,OAAO,MAAMG,QAAQ,GAAIC,GAAW,IAAI;;EACtC,OAAO,CAAAC,EAAA,GAAAR,WAAW,CAACC,MAAM,cAAAO,EAAA,uBAAAA,EAAA,CAAGD,GAAG,CAAC;AAClC,CAAC;AAED,MAAME,aAAa,GAAG,IAAIC,GAAG,EAAiB;AAC9C,MAAMC,WAAW,GAAG,IAAID,GAAG,EAAwB;AAEnD,OAAO,MAAME,WAAW,GAAUC,GAAkB,IAAIC,SAAA;EACtD,MAAMC,OAAO,GAAG,MAAMF,GAAG,CAACG,gBAAgB,EAAE;EAC5CP,aAAa,CAACQ,GAAG,CAAC,SAAS,EAAEF,OAAO,CAAC;EACrCJ,WAAW,CAACM,GAAG,CAAC,KAAK,EAAEJ,GAAG,CAAC;AAC7B,CAAC;AAED,OAAO,MAAMG,gBAAgB,GAAGA,CAAA,KAAK;EACnC,OAAOP,aAAa,CAACS,GAAG,CAAC,SAAS,CAAU;AAC9C,CAAC;AAED,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAK;EACjC,OAAOR,WAAW,CAACO,GAAG,CAAC,KAAK,CAAC;AAC/B,CAAC;AAED,OAAO,MAAME,YAAY,GAAGA,CAAA,KAAWN,SAAA;EACrC,MAAMD,GAAG,GAAGM,cAAc,EAAE;EAC5B,OAAON,GAAG,CAACO,YAAY,EAAE;AAC3B,CAAC;AAED;AACA,OAAO,MAAMC,cAAc,GAAGtB,QAAQ,CACpCE,MAAM,IAAG;EACP,MAAMqB,YAAY,GAAGhB,QAAQ,CAAC,gBAAgB,CAAC;EAC/C,IAAI,CAACgB,YAAY,IAAI,OAAOA,YAAY,KAAK,UAAU,EAAE;IACvD;;EAEF,OAAOA,YAAY,CAAAlB,MAAA,CAAAC,MAAA;IACjBkB,IAAI,EAAEH,YAAY;EAAE,GACjBnB,MAAM,EACT;AACJ,CAAC,EACD,GAAG,EACH;EACEuB,QAAQ,EAAE;CACX,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}