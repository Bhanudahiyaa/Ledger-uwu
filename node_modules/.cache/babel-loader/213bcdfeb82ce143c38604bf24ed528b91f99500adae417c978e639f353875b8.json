{"ast":null,"code":"/**\n * @fileOverview Force Layout Grid Align layout\n * @author wenyanqi\n */\nimport { Base } from \"../base\";\nimport layout from './core';\nexport class ERLayout extends Base {\n  constructor(options) {\n    super();\n    this.width = 300;\n    this.height = 300;\n    this.nodeMinGap = 50;\n    /** 迭代结束的回调函数 */\n    this.onLayoutEnd = () => {};\n    if (options) {\n      this.updateCfg(options);\n    }\n  }\n  getDefaultCfg() {\n    return {\n      width: 300,\n      height: 300,\n      nodeMinGap: 50\n    };\n  }\n  /**\n   * 执行布局\n   */\n  execute() {\n    const self = this;\n    const nodes = self.nodes;\n    const edges = self.edges;\n    // 节点初始化，size初始化\n    nodes === null || nodes === void 0 ? void 0 : nodes.forEach(node => {\n      if (!node.size) {\n        node.size = [50, 50];\n      }\n    });\n    return layout({\n      nodes,\n      edges\n    }, {\n      width: this.width,\n      height: this.height,\n      nodeMinGap: this.nodeMinGap\n    }).then(() => {\n      if (self.onLayoutEnd) self.onLayoutEnd();\n    });\n  }\n  getType() {\n    return \"er\";\n  }\n}","map":{"version":3,"names":["Base","layout","ERLayout","constructor","options","width","height","nodeMinGap","onLayoutEnd","updateCfg","getDefaultCfg","execute","self","nodes","edges","forEach","node","size","then","getType"],"sources":["../../../src/layout/er/index.ts"],"sourcesContent":[null],"mappings":"AAAA;;;;AAKA,SAASA,IAAI,QAAQ,SAAS;AAC9B,OAAOC,MAAM,MAAM,QAAQ;AAU3B,OAAM,MAAOC,QAAS,SAAQF,IAAI;EAShCG,YAAYC,OAAa;IACvB,KAAK,EAAE;IARF,KAAAC,KAAK,GAAW,GAAG;IACnB,KAAAC,MAAM,GAAW,GAAG;IACpB,KAAAC,UAAU,GAAW,EAAE;IAE9B;IACO,KAAAC,WAAW,GAAe,MAAK,CAAG,CAAC;IAIxC,IAAIJ,OAAO,EAAE;MACX,IAAI,CAACK,SAAS,CAACL,OAAO,CAAC;;EAE3B;EAEOM,aAAaA,CAAA;IAClB,OAAO;MACLL,KAAK,EAAE,GAAG;MACVC,MAAM,EAAE,GAAG;MACXC,UAAU,EAAE;KACb;EACH;EAEA;;;EAGOI,OAAOA,CAAA;IACZ,MAAMC,IAAI,GAAG,IAAI;IACjB,MAAMC,KAAK,GAAGD,IAAI,CAACC,KAAK;IACxB,MAAMC,KAAK,GAAGF,IAAI,CAACE,KAAK;IACxB;IACAD,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEE,OAAO,CAAEC,IAAW,IAAI;MAC7B,IAAI,CAACA,IAAI,CAACC,IAAI,EAAE;QACdD,IAAI,CAACC,IAAI,GAAG,CAAC,EAAE,EAAE,EAAE,CAAC;;IAExB,CAAC,CAAC;IACF,OAAOhB,MAAM,CAAC;MACZY,KAAK;MAAEC;KACR,EAAE;MACDT,KAAK,EAAE,IAAI,CAACA,KAAK;MACjBC,MAAM,EAAE,IAAI,CAACA,MAAM;MACnBC,UAAU,EAAE,IAAI,CAACA;KAClB,CAAC,CAACW,IAAI,CAAC,MAAK;MACX,IAAIN,IAAI,CAACJ,WAAW,EAAEI,IAAI,CAACJ,WAAW,EAAE;IAC1C,CAAC,CAAC;EACJ;EAEOW,OAAOA,CAAA;IACZ,OAAO,IAAI;EACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}